"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[4045],{90306:function(e,t){Object.defineProperty(t,"__esModule",{value:!0}),t.default={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M400 317.7h73.9V656c0 4.4 3.6 8 8 8h60c4.4 0 8-3.6 8-8V317.7H624c6.7 0 10.4-7.7 6.3-12.9L518.3 163a8 8 0 00-12.6 0l-112 141.7c-4.1 5.3-.4 13 6.3 13zM878 626h-60c-4.4 0-8 3.6-8 8v154H214V634c0-4.4-3.6-8-8-8h-60c-4.4 0-8 3.6-8 8v198c0 17.7 14.3 32 32 32h684c17.7 0 32-14.3 32-32V634c0-4.4-3.6-8-8-8z"}}]},name:"upload",theme:"outlined"}},35855:function(e,t,l){var a=l(64836),r=l(18698);t.Z=void 0;var i=a(l(42122)),s=function(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!==r(e)&&"function"!=typeof e)return{default:e};var l=d(t);if(l&&l.has(e))return l.get(e);var a={},i=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var s in e)if("default"!==s&&Object.prototype.hasOwnProperty.call(e,s)){var n=i?Object.getOwnPropertyDescriptor(e,s):null;n&&(n.get||n.set)?Object.defineProperty(a,s,n):a[s]=e[s]}return a.default=e,l&&l.set(e,a),a}(l(67294)),n=a(l(90306)),o=a(l(92074));function d(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,l=new WeakMap;return(d=function(e){return e?l:t})(e)}var c=function(e,t){return s.createElement(o.default,(0,i.default)((0,i.default)({},e),{},{ref:t,icon:n.default}))};c.displayName="UploadOutlined";var u=s.forwardRef(c);t.Z=u},49923:function(e,t,l){var a=l(85893),r=l(67294),i=l(11163),s=l(4851);t.Z=e=>{let{path:t="/"}=e,[l,n]=(0,r.useState)(3),o=(0,i.useRouter)();return(0,r.useEffect)(()=>{let e=setInterval(()=>{n(l-1)},1e3);return 0===l&&(clearInterval(e),o.push(t)),()=>clearInterval(e)},[l]),(0,a.jsx)("div",{style:{display:"flex",justifyContent:"center",alignItems:"center",height:"100vh"},children:(0,a.jsx)(s.default,{style:{display:"flex",justifyContent:"center",alignItems:"center",height:"100vh",fontSize:"50px",color:"red"}})})}},50721:function(e,t,l){var a=l(85893),r=l(67294),i=l(28465),s=l(11187),n=l(91633),o=l(84996),d=l(35297),c=l(42074),u=l(92018),p=l(83555),f=l(94212),x=l(6154),h=l(86501);let{Dragger:m}=i.default;t.Z=e=>{var t;let{page:l="admin"}=e,[i,g]=(0,r.useContext)(c.V),[v,j]=(0,r.useContext)(f.Y),[y,b]=(0,r.useState)(!1);(0,r.useEffect)(()=>{let e=async()=>{try{let{data:e}=await x.Z.get("/media");j(t=>({...t,images:e}))}catch(e){console.log(e)}};e()},[]);let w={name:"file",multiple:!0,action:"".concat("https://ideaweave-backend.onrender.com/api","/upload-image-file"),headers:{Authorization:"Bearer ".concat(i.token)},onChange(e){"uploading"!==e.file.status&&console.log(e.file,e.fileList),"done"===e.file.status?(s.default.success("".concat(e.file.name," file uploaded successfully")),j({images:[...v.images,e.file.response],selected:e.file.response,showMediaModal:!1})):"error"===e.file.status&&s.default.error("".concat(e.file.name," file upload failed."))},onDrop(e){console.log("Dropped files",e.dataTransfer.files)}},A=async e=>{try{let{data:t}=await x.Z.delete("/media/".concat(e));t.ok&&(j({...v,images:v.images.filter(t=>t._id!==e),selected:null}),h.Am.success("Image deleted successfully"))}catch(e){console.log(e)}};return(0,a.jsxs)("div",{style:{width:"75%",margin:"0 auto",marginTop:40},children:[(0,a.jsxs)(m,{...w,accept:"image/*",children:[(0,a.jsx)("p",{className:"ant-upload-drag-icon",children:(0,a.jsx)(p.Z,{})}),(0,a.jsx)("p",{className:"ant-upload-text",children:"Click or drag file to this area to upload"})]}),(0,a.jsx)("div",{style:{textAlign:"center",marginTop:20,display:"flex",flexWrap:"wrap",justifyContent:"center"},children:null==v?void 0:null===(t=v.images)||void 0===t?void 0:t.filter(e=>{var t,a;return"admin"===l||(null==e?void 0:null===(t=e.postedBy)||void 0===t?void 0:t._id)===(null==i?void 0:null===(a=i.user)||void 0===a?void 0:a._id)}).map(e=>{var t,r;return(0,a.jsx)(o.Z,{children:(0,a.jsxs)("div",{style:{margin:"10px",padding:"10px",border:"1px solid #ddd",borderRadius:"8px",boxShadow:"0 4px 8px rgba(0, 0, 0, 0.1)",position:"relative"},children:[(0,a.jsx)(n.Z,{onClick:()=>j({...v,selected:e}),preview:y,src:e.url,style:{height:"100px",width:"100px",objectFit:"cover",cursor:"pointer",borderRadius:"8px"}}),(0,a.jsx)("br",{}),"author"===l&&(null==e?void 0:null===(t=e.postedBy)||void 0===t?void 0:t._id)==(null==i?void 0:null===(r=i.user)||void 0===r?void 0:r._id)?(0,a.jsx)(d.Z,{title:"Are you sure to delete this image?",onConfirm:()=>A(e._id),okText:"Yes",cancelText:"No",placement:"bottomRight",children:(0,a.jsx)(u.default,{style:{position:"absolute",bottom:"5px",right:"5px",color:"#f5222d",cursor:"pointer"}})}):"admin"===l?(0,a.jsx)(d.Z,{title:"Are you sure to delete this image?",onConfirm:()=>A(e._id),okText:"Yes",cancelText:"No",placement:"bottomRight",children:(0,a.jsx)(u.default,{style:{position:"absolute",bottom:"5px",right:"5px",color:"#f5222d",cursor:"pointer"}})}):""]})},e._id)})})]})}},93338:function(e,t,l){var a=l(85893),r=l(67294),i=l(28465),s=l(11187),n=l(65400),o=l(42074),d=l(35855),c=l(94212),u=l(11163);t.Z=e=>{let{redirectToLibrary:t=!1,page:l="admin"}=e,[p,f]=(0,r.useContext)(o.V),[x,h]=(0,r.useContext)(c.Y),m=(0,u.useRouter)(),g={name:"file",action:"".concat("https://ideaweave-backend.onrender.com/api","/upload-image-file"),headers:{Authorization:"Bearer ".concat(p.token)},onChange(e){"uploading"!==e.file.status&&console.log(e.file,e.fileList),"done"===e.file.status?(s.default.success("".concat(e.file.name," file uploaded successfully")),h({images:[...x.images,e.file.response],selected:e.file.response,showMediaModal:!1}),t&&m.push("/".concat(l,"/media/library"))):"error"===e.file.status&&s.default.error("".concat(e.file.name," file upload failed."))}};return(0,a.jsxs)("div",{children:[(0,a.jsx)("style",{children:"\n          .ant-upload-list-item-card-actions {\n            display: none;\n          }\n        "}),(0,a.jsx)(i.default,{...g,maxCount:1,children:(0,a.jsx)(n.default,{icon:(0,a.jsx)(d.Z,{}),children:"Click to Upload"})})]})}},90148:function(e,t,l){var a=l(85893);l(67294);var r=l(93338),i=l(50721),s=l(20838);let{TabPane:n}=s.default;t.Z=()=>(0,a.jsxs)(s.default,{children:[(0,a.jsx)(n,{tab:"Upload File",children:(0,a.jsx)(r.Z,{})},"1"),(0,a.jsx)(n,{tab:"Media Library",children:(0,a.jsx)(i.Z,{})},"2")]})},57150:function(e,t,l){var a=l(85893),r=l(67294),i=l(55673),s=l(5789),n=l(65400),o=l(51024),d=l(64749),c=l(84960),u=l(20838),p=l(6154),f=l(86501),x=l(11163),h=l(42074),m=l(94212),g=l(90148);let{TabPane:v}=u.default;t.Z=e=>{var t;let{page:l="admin"}=e,[j,y]=(0,r.useContext)(h.V),[b,w]=(0,r.useContext)(m.Y),[A,S]=(0,r.useState)(""),[Z,C]=(0,r.useState)(""),[_,k]=(0,r.useState)(""),[B,P]=(0,r.useState)(""),[O,z]=(0,r.useState)(""),[M,I]=(0,r.useState)(""),[N,R]=(0,r.useState)(!1),[T,F]=(0,r.useState)({}),[U,E]=(0,r.useState)(!1),[V,W]=(0,r.useState)(""),[Y,L]=(0,r.useState)(""),[D,q]=(0,r.useState)(""),[$,H]=(0,r.useState)(""),[J,G]=(0,r.useState)(!1),K=(0,x.useRouter)();(0,r.useEffect)(()=>{let e=async()=>{try{var e;let{data:t}=await p.Z.get("/user/".concat(null==K?void 0:null===(e=K.query)||void 0===e?void 0:e.id));C(t.name),k(t.email),P(t.website),I(t.role),S(t._id),F(t.image)}catch(e){console.log(e)}};(null==j?void 0:j.token)&&e()},[j,null==K?void 0:null===(t=K.query)||void 0===t?void 0:t.id]);let Q=e=>""===e.trim()?(W("Name is required"),!1):(W(""),!0),X=e=>e&&!e.startsWith("http")?(H("Website URL should start with 'http'"),!1):(H(""),!0),ee=e=>{G(!0);let t=e.match(/^(?=.*\d)(?=.*[!@#$%^&*])(?=.*[a-z])(?=.*[A-Z]).{8,}$/);return E(t),q(""),t},et=async()=>{try{var e,t;R(!0);let{data:a}=await p.Z.put("/update-user-by-".concat(l),{id:A,name:Z,email:_,website:B,password:O,role:M,image:(null==b?void 0:null===(e=b.selected)||void 0===e?void 0:e._id)?b.selected._id:(null==T?void 0:T._id)?T._id:void 0});if(null==a?void 0:a.error)a.error.includes("E11000 duplicate key error")&&a.error.includes("name")?f.Am.error("User name already taken. Please choose a different name."):f.Am.error(a.error),R(!1);else{if((null==j?void 0:null===(t=j.user)||void 0===t?void 0:t._id)===a._id){y({...j,user:a});let e=JSON.parse(localStorage.getItem("auth"));e.user=a,localStorage.setItem("auth",JSON.stringify(e))}f.Am.success("Profile updated successfully"),R(!1)}}catch(e){console.log(e),f.Am.error("Profile update failed. Try again."),R(!1)}};return(0,a.jsx)(i.default,{style:{paddingTop:"50px"},children:(0,a.jsx)(s.default,{span:12,offset:6,children:(0,a.jsxs)(u.default,{tabBarStyle:{marginBottom:0},children:[(0,a.jsxs)(v,{tab:"User Info",children:[(0,a.jsx)("div",{style:{marginBottom:20}}),(0,a.jsx)("h4",{style:{marginBottom:"-10px"},children:"Update User Profile"}),(0,a.jsx)("div",{style:{marginBottom:30}}),(0,a.jsx)("div",{style:{marginBottom:20,textAlign:"center"},children:b.selected?(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)("div",{style:{marginBottom:15}}),(0,a.jsx)(c.ZP,{src:b.selected.url,size:100})]}):T?(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)("div",{style:{marginBottom:15}}),(0,a.jsx)(c.ZP,{src:T.url,size:100})]}):""}),(0,a.jsx)(o.default,{style:{margin:"20px 0px 10px 0px"},size:"large",placeholder:"Full name",value:Z,id:"username",onChange:e=>{C(e.target.value),Q(e.target.value)}}),V&&(0,a.jsx)("div",{style:{color:"red"},children:V}),(0,a.jsx)(o.default,{style:{margin:"10px 0px 10px 0px"},size:"large",value:_,readOnly:!0,disabled:!0}),Y&&(0,a.jsx)("div",{style:{color:"red"},children:Y}),(0,a.jsx)(o.default,{style:{margin:"10px 0px 10px 0px"},size:"large",placeholder:"Website (optional)",value:B,onChange:e=>{P(e.target.value),X(e.target.value)}}),$&&(0,a.jsx)("div",{style:{color:"red"},children:$}),(0,a.jsx)(o.default.Password,{style:{margin:"10px 0px 10px 0px"},size:"large",placeholder:"Password",id:"password",value:O,onChange:e=>{z(e.target.value),ee(e.target.value)}}),D&&(0,a.jsx)("div",{style:{color:"red"},children:D}),J&&(0,a.jsxs)("div",{className:"password-strength",children:[(0,a.jsxs)("p",{children:[O.length>=8?"✔":"✘"," At least 8 characters"]}),(0,a.jsxs)("p",{children:[/[A-Z]/.test(O)?"✔":"✘"," At least one uppercase character"]}),(0,a.jsxs)("p",{children:[/[a-z]/.test(O)?"✔":"✘"," At least one lowercase character"]}),(0,a.jsxs)("p",{children:[/[0-9]/.test(O)?"✔":"✘"," At least one number"]}),(0,a.jsxs)("p",{children:[/[!@#$%^&*]/.test(O)?"✔":"✘"," At least one special character"]})]}),"admin"===l&&(0,a.jsx)(d.default,{value:M,style:{margin:"10px 0px 10px 0px",width:"100%"},onChange:e=>I(e),children:(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(d.default.Option,{value:"Subscriber",disabled:"Admin"===M,children:"Subscriber"}),(0,a.jsx)(d.default.Option,{value:"Author",disabled:"Admin"===M,children:"Author"}),(0,a.jsx)(d.default.Option,{value:"Admin",children:"Admin"}),(0,a.jsx)(d.default.Option,{value:"Reviewer",disabled:"Admin"===M,children:"Reviewer"})]})}),(0,a.jsx)(n.default,{onClick:et,type:"default",style:{margin:"10px 0px 10px 0px"},loading:N,block:!0,id:"submit-btn",children:"Submit"})]},"1"),(0,a.jsxs)(v,{tab:"Profile Image",children:[(0,a.jsx)("div",{style:{marginBottom:20}}),(0,a.jsx)("h4",{style:{marginBottom:"-10px"},children:"Your Current Profile Image:"}),(0,a.jsx)("div",{style:{marginBottom:30}}),(0,a.jsx)("div",{style:{marginBottom:20,textAlign:"center"},children:b.selected?(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)("div",{style:{marginBottom:15}}),(0,a.jsx)(c.ZP,{src:b.selected.url,size:100})]}):T?(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)("div",{style:{marginBottom:15}}),(0,a.jsx)(c.ZP,{src:T.url,size:100})]}):""}),(0,a.jsx)(g.Z,{})]},"2")]})})})}}}]);