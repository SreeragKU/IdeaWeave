(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[1870],{26291:function(e,t,i){(window.__NEXT_P=window.__NEXT_P||[]).push(["/author/library",function(){return i(57967)}])},49923:function(e,t,i){"use strict";var a=i(85893),s=i(67294),o=i(11163),l=i(4851);t.Z=e=>{let{path:t="/"}=e,[i,r]=(0,s.useState)(3),c=(0,o.useRouter)();return(0,s.useEffect)(()=>{let e=setInterval(()=>{r(i-1)},1e3);return 0===i&&(clearInterval(e),c.push(t)),()=>clearInterval(e)},[i]),(0,a.jsx)("div",{style:{display:"flex",justifyContent:"center",alignItems:"center",height:"100vh"},children:(0,a.jsx)(l.default,{style:{display:"flex",justifyContent:"center",alignItems:"center",height:"100vh",fontSize:"50px",color:"red"}})})}},91161:function(e,t,i){"use strict";i.d(t,{Z:function(){return N}});var a=i(85893),s=i(67294),o=i(16373),l=i(12386),r=i(41664),c=i.n(r),n=i(9470),d=i(26401),x=i(35741),u=i(27478),h=i(46403),b=i(63521),f=i(42074),m=i(42567);let{SubMenu:j}=l.default,{Sider:p}=o.default;var v=()=>{var e,t,i,o;let[r,v]=(0,s.useState)(""),[w,y]=(0,s.useState)(""),[k,g]=(0,s.useContext)(f.V),[N]=(0,s.useContext)(m.N),[I,_]=(0,s.useState)(!1),z=()=>{_(window.innerWidth<1e3)};(0,s.useEffect)(()=>{v(window.location.pathname);let e=window.location.pathname.split("/");return e.length>=3?y("/".concat(e[1])):y(""),window.addEventListener("resize",z),()=>{window.removeEventListener("resize",z)}},[]),(0,s.useEffect)(()=>{z()},[]);let S={sider:{width:I?50:100,height:"100vh",transition:"width 0.3s cubic-bezier(0.645, 0.045, 0.355, 1)",overflow:"hidden",paddingTop:"64px"},fixedSider:{position:"fixed",top:0,left:0,height:"100vh",zIndex:1e3,background:"dark"===N?"#001529":"#fff",boxShadow:"0 2px 8px rgba(0, 0, 0, 0.1)"},menu:{background:"dark"===N?"#001529":"#fff",height:"calc(100% - 64px)",overflowY:"auto",overflowX:"hidden",scrollbarWidth:"thin",WebkitOverflowScrolling:"touch"},item:{background:"transparent",transition:"background 0.3s"},activeItem:{background:"dark"===N?"#007F7F":"#00BFFF",color:"#fff"},activeSubMenu:{background:"dark"===N?"#007F7F":"#00BFFF",color:"#fff",transition:"width 0.3s cubic-bezier(0.645, 0.045, 0.355, 1) 0.1s"}};return(0,a.jsx)(p,{collapsible:!0,collapsed:I,onCollapse:()=>_(!I),style:{...S.sider,...S.fixedSider},children:(0,a.jsxs)(l.default,{defaultOpenKeys:["2","6","10"],mode:"inline",inlineCollapsed:I,selectedKeys:[r],style:S.menu,theme:N,children:[(0,a.jsx)(l.default.Item,{icon:(0,a.jsx)(x.Z,{}),className:"/author"===r?"active":"",style:"/author"===r?S.activeItem:S.item,children:(0,a.jsx)(c(),{href:"/author",children:"Dashboard"})},"/author"),(0,a.jsx)(l.default.Item,{icon:(0,a.jsx)(u.Z,{}),className:"/author/library"===r?"active":"",style:"/author/library"===r?S.activeItem:S.item,children:(0,a.jsx)(c(),{href:"/author/library",children:"Library"})},"/author/library"),(0,a.jsxs)(j,{icon:(0,a.jsx)(n.Z,{}),title:"Posts",className:"/author"===w?"active":"",style:"/author"===w?S.activeSubMenu:{},children:[(0,a.jsx)(l.default.Item,{className:"/author/posts"===r?"active":"",style:"/author/posts"===r?S.activeItem:S.item,children:(0,a.jsx)(c(),{href:"/author/posts",children:"All Books"})},"/author/posts"),(0,a.jsx)(l.default.Item,{className:"/author/posts/drafts"===r?"active":"",style:"/author/posts/drafts"===r?S.activeItem:S.item,children:(0,a.jsx)(c(),{href:"/author/posts/drafts",children:"All Drafts"})},"/author/drafts"),(0,a.jsx)(l.default.Item,{className:"/author/posts/new"===r?"active":"",style:"/author/posts/new"===r?S.activeItem:S.item,children:(0,a.jsx)(c(),{href:"/author/posts/new",children:"Add New Book"})},"/author/posts/new")]},"2"),(0,a.jsxs)(j,{icon:(0,a.jsx)(d.Z,{}),title:"Media",children:[(0,a.jsx)(l.default.Item,{className:"/author/media/library"===r?"active":"",style:"/author/media/library"===r?S.activeItem:S.item,children:(0,a.jsx)(c(),{href:"/author/media/library",children:"Media Library"})},"/author/media/library"),(0,a.jsx)(l.default.Item,{className:"/author/media/new"===r?"active":"",style:"/author/media/new"===r?S.activeItem:S.item,children:(0,a.jsx)(c(),{href:"/author/media/new",children:"Add New Media"})},"/author/media/new")]},"6"),(0,a.jsx)(l.default.Item,{icon:(0,a.jsx)(b.Z,{}),className:"/author/comments"===r?"active":"",style:"/author/comments"===r?S.activeItem:S.item,children:(0,a.jsx)(c(),{href:"/author/comments",children:"Comments"})},"/author/comments"),(0,a.jsx)(l.default.Item,{icon:(0,a.jsx)(h.Z,{}),className:r==="/author/".concat(null==k?void 0:null===(e=k.user)||void 0===e?void 0:e._id)?"active":"",style:r==="/author/".concat(null==k?void 0:null===(t=k.user)||void 0===t?void 0:t._id)?S.activeItem:S.item,children:(0,a.jsx)(c(),{href:"/author/".concat(null==k?void 0:null===(i=k.user)||void 0===i?void 0:i._id),children:"Profile"})},"/author/".concat(null==k?void 0:null===(o=k.user)||void 0===o?void 0:o._id))]})})},w=i(11163),y=i(6154),k=i(49923);let{Content:g}=o.default;function N(e){let{children:t}=e,[i,l]=(0,s.useContext)(f.V),[r,c]=(0,s.useState)(!0),[n,d]=(0,s.useState)(!0),x=(0,w.useRouter)();(0,s.useEffect)(()=>{(null==i?void 0:i.token)&&u()},[null==i?void 0:i.token]);let u=async()=>{try{let{data:e}=await y.Z.get("/current-author");c(!1)}catch(e){console.log(e),x.push("/")}};return r?(0,a.jsx)(k.Z,{}):(0,a.jsxs)(o.default,{children:[(0,a.jsx)(v,{isOpen:n,toggleNav:()=>{d(!n)}}),(0,a.jsx)(o.default,{style:{marginLeft:n?90:80,transition:"margin 0.5s"},children:(0,a.jsx)(g,{style:{padding:"10px"},children:t})})]})}},57967:function(e,t,i){"use strict";i.r(t);var a=i(85893),s=i(48848),o=i.n(s),l=i(67294),r=i(6154),c=i(70302),n=i(56590),d=i(53740),x=i(65400),u=i(74048),h=i(42074),b=i(41664),f=i.n(b),m=i(60077),j=i(45799),p=i(19702),v=i(91161);let{Meta:w}=c.default,{Text:y}=d.default;t.default=()=>{let[e,t]=(0,l.useState)([]),[i,s]=(0,l.useState)(!0),[d,b]=(0,l.useContext)(h.V),[k,g]=(0,l.useState)("grid"),[N,I]=(0,l.useState)([]),[_,z]=(0,l.useState)(!1);(0,l.useEffect)(()=>{let e=async()=>{try{let e=d.user._id,i=await r.Z.get("/get-library/".concat(e));t(i.data.library),s(!1)}catch(e){console.error(e),s(!1)}};e()},[d]);let S=e=>{g(e)},C=e=>{let t=N.includes(e._id);t?I(N.filter(t=>t!==e._id)):I([...N,e._id])},Z=async()=>{try{console.log("Book Ids",N),await r.Z.delete("/bulkdelete-from-library",{data:{bookIds:N}});let e=d.user._id,i=await r.Z.get("/get-library/".concat(e));t(i.data.library),I([]),z(!1)}catch(e){console.error("Failed to delete books:",e)}};return(0,a.jsxs)(v.Z,{children:[(0,a.jsxs)("div",{className:"jsx-8a37979ceb38f789 library-container",children:[(0,a.jsx)("div",{className:"jsx-8a37979ceb38f789 view-mode",children:(0,a.jsxs)(u.default,{children:[(0,a.jsx)(x.default,{icon:(0,a.jsx)(m.Z,{}),onClick:()=>S("grid"),type:"grid"===k?"primary":"default"}),(0,a.jsx)(x.default,{icon:(0,a.jsx)(j.default,{}),onClick:()=>S("list"),type:"list"===k?"primary":"default"}),(0,a.jsx)(x.default,{onClick:Z,danger:!0,icon:(0,a.jsx)(p.default,{}),children:"Delete Selected"}),(0,a.jsxs)("div",{className:"jsx-8a37979ceb38f789 select-all",children:[(0,a.jsx)("input",{type:"checkbox",onChange:()=>{if(_)I([]);else{let t=e.map(e=>e._id);I(t)}z(!_)},checked:_,className:"jsx-8a37979ceb38f789"}),(0,a.jsx)("span",{className:"jsx-8a37979ceb38f789",children:"Select All"})]})]})}),(0,a.jsx)("h1",{className:"jsx-8a37979ceb38f789",children:"Personal Library"}),i?(0,a.jsx)("p",{className:"jsx-8a37979ceb38f789",children:"Loading..."}):"grid"===k?(0,a.jsx)(n.default,{grid:{gutter:16,xs:1,sm:2,md:3,lg:4,xl:5,xxl:6},dataSource:e,renderItem:e=>(0,a.jsx)(n.default.Item,{children:(0,a.jsxs)("div",{className:"jsx-8a37979ceb38f789 "+"book-card ".concat(N.includes(e._id)?"selected":""),children:[(0,a.jsx)("input",{type:"checkbox",onChange:()=>C(e),checked:N.includes(e._id),className:"jsx-8a37979ceb38f789"}),(0,a.jsx)(f(),{href:"/post/".concat(e.slug),children:(0,a.jsxs)(c.default,{hoverable:!0,className:"book-card",cover:(0,a.jsx)("img",{alt:e.title,src:e.coverImage,className:"jsx-8a37979ceb38f789 book-cover"}),children:[(0,a.jsx)(w,{title:e.title,description:"By ".concat(e.postedBy)}),(0,a.jsx)("div",{className:"jsx-8a37979ceb38f789 book-details",children:(0,a.jsx)(y,{children:"By ".concat(e.postedBy)})})]})})]})})}):(0,a.jsx)(n.default,{dataSource:e,renderItem:e=>(0,a.jsx)(n.default.Item,{children:(0,a.jsxs)("div",{className:"jsx-8a37979ceb38f789 "+"book-list-card ".concat(N.includes(e._id)?"selected":""),children:[(0,a.jsx)("input",{type:"checkbox",onChange:()=>C(e),checked:N.includes(e._id),className:"jsx-8a37979ceb38f789"}),(0,a.jsx)(f(),{href:"/post/".concat(e.slug),children:(0,a.jsx)(c.default,{className:"book-list-card",children:(0,a.jsxs)("div",{className:"jsx-8a37979ceb38f789 book-list-content",children:[(0,a.jsx)("div",{className:"jsx-8a37979ceb38f789 book-list-cover-container",children:(0,a.jsx)("img",{alt:e.title,src:e.coverImage,className:"jsx-8a37979ceb38f789 book-list-cover"})}),(0,a.jsx)("div",{className:"jsx-8a37979ceb38f789 book-details",children:(0,a.jsx)(w,{title:e.title,description:"By ".concat(e.postedBy)})})]})})})]})})})]}),(0,a.jsx)(o(),{id:"8a37979ceb38f789",children:".library-container.jsx-8a37979ceb38f789{margin:70px 110px}.view-mode.jsx-8a37979ceb38f789{margin-bottom:10px}h1.jsx-8a37979ceb38f789{font-size:24px;margin-bottom:20px}.book-card.jsx-8a37979ceb38f789{width:100%;position:relative}.book-cover.jsx-8a37979ceb38f789{width:100%;height:200px;-o-object-fit:cover;object-fit:cover}.book-list-card.jsx-8a37979ceb38f789,.book-card.jsx-8a37979ceb38f789{position:relative}.book-list-card.jsx-8a37979ceb38f789 .individual-delete-btn.jsx-8a37979ceb38f789,.book-card.jsx-8a37979ceb38f789 .individual-delete-btn.jsx-8a37979ceb38f789{position:absolute;top:10px;right:10px}.book-list-card.jsx-8a37979ceb38f789{width:100%;height:200px;display:-webkit-box;display:-webkit-flex;display:-moz-box;display:-ms-flexbox;display:flex;border:1px solid#d9d9d9;-webkit-border-radius:4px;-moz-border-radius:4px;border-radius:4px;overflow:hidden;-webkit-transition:box-shadow.3s;-moz-transition:box-shadow.3s;-o-transition:box-shadow.3s;transition:box-shadow.3s;cursor:pointer;&.jsx-8a37979ceb38f789:hover{-webkit-box-shadow:0 4px 8px rgba(0,0,0,.1);-moz-box-shadow:0 4px 8px rgba(0,0,0,.1);box-shadow:0 4px 8px rgba(0,0,0,.1)}}.book-list-content.jsx-8a37979ceb38f789{display:-webkit-box;display:-webkit-flex;display:-moz-box;display:-ms-flexbox;display:flex;-webkit-box-orient:vertical;-webkit-box-direction:normal;-webkit-flex-direction:column;-moz-box-orient:vertical;-moz-box-direction:normal;-ms-flex-direction:column;flex-direction:column;width:100%;@media only screen and (min-width:768px){-webkit-box-orient:horizontal;-webkit-box-direction:normal;-webkit-flex-direction:row;-moz-box-orient:horizontal;-moz-box-direction:normal;-ms-flex-direction:row;flex-direction:row;width:1200px}}.book-list-cover-container.jsx-8a37979ceb38f789{-webkit-box-flex:0;-webkit-flex:0 0 120px;-moz-box-flex:0;-ms-flex:0 0 120px;flex:0 0 120px;width:120px;height:120px;overflow:hidden}.book-list-cover.jsx-8a37979ceb38f789{width:100%;height:100%;-o-object-fit:cover;object-fit:cover}.book-details.jsx-8a37979ceb38f789{-webkit-box-flex:1;-webkit-flex:1;-moz-box-flex:1;-ms-flex:1;flex:1;padding:16px}.select-all.jsx-8a37979ceb38f789{margin-top:10px;display:-webkit-box;display:-webkit-flex;display:-moz-box;display:-ms-flexbox;display:flex;-webkit-box-align:center;-webkit-align-items:center;-moz-box-align:center;-ms-flex-align:center;align-items:center}.select-all.jsx-8a37979ceb38f789 input.jsx-8a37979ceb38f789{margin-right:8px}.individual-delete-btn.jsx-8a37979ceb38f789{margin-left:10px}.selected.jsx-8a37979ceb38f789{background-color:#606361}@media only screen and (max-width:767px){.library-container.jsx-8a37979ceb38f789{margin:40px}.book-details.jsx-8a37979ceb38f789{display:none}}"})]})}}},function(e){e.O(0,[5584,5400,4104,1350,9009,4749,3740,2476,3391,3114,9774,2888,179],function(){return e(e.s=26291)}),_N_E=e.O()}]);