(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[6267],{25330:function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M912 190h-69.9c-9.8 0-19.1 4.5-25.1 12.2L404.7 724.5 207 474a32 32 0 00-25.1-12.2H112c-6.7 0-10.4 7.7-6.3 12.9l273.9 347c12.8 16.2 37.4 16.2 50.3 0l488.4-618.9c4.1-5.1.4-12.8-6.3-12.8z"}}]},name:"check",theme:"outlined"}},14059:function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M878.3 392.1L631.9 145.7c-6.5-6.5-15-9.7-23.5-9.7s-17 3.2-23.5 9.7L423.8 306.9c-12.2-1.4-24.5-2-36.8-2-73.2 0-146.4 24.1-206.5 72.3a33.23 33.23 0 00-2.7 49.4l181.7 181.7-215.4 215.2a15.8 15.8 0 00-4.6 9.8l-3.4 37.2c-.9 9.4 6.6 17.4 15.9 17.4.5 0 1 0 1.5-.1l37.2-3.4c3.7-.3 7.2-2 9.8-4.6l215.4-215.4 181.7 181.7c6.5 6.5 15 9.7 23.5 9.7 9.7 0 19.3-4.2 25.9-12.4 56.3-70.3 79.7-158.3 70.2-243.4l161.1-161.1c12.9-12.8 12.9-33.8 0-46.8zM666.2 549.3l-24.5 24.5 3.8 34.4a259.92 259.92 0 01-30.4 153.9L262 408.8c12.9-7.1 26.3-13.1 40.3-17.9 27.2-9.4 55.7-14.1 84.7-14.1 9.6 0 19.3.5 28.9 1.6l34.4 3.8 24.5-24.5L608.5 224 800 415.5 666.2 549.3z"}}]},name:"pushpin",theme:"outlined"}},71961:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var a,r=(a=n(79686))&&a.__esModule?a:{default:a};t.default=r,e.exports=r},79686:function(e,t,n){"use strict";var a=n(64836),r=n(18698);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var l=a(n(42122)),o=function(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!==r(e)&&"function"!=typeof e)return{default:e};var n=u(t);if(n&&n.has(e))return n.get(e);var a={},l=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var o in e)if("default"!==o&&Object.prototype.hasOwnProperty.call(e,o)){var i=l?Object.getOwnPropertyDescriptor(e,o):null;i&&(i.get||i.set)?Object.defineProperty(a,o,i):a[o]=e[o]}return a.default=e,n&&n.set(e,a),a}(n(67294)),i=a(n(25330)),s=a(n(92074));function u(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,n=new WeakMap;return(u=function(e){return e?n:t})(e)}var c=function(e,t){return o.createElement(s.default,(0,l.default)((0,l.default)({},e),{},{ref:t,icon:i.default}))};c.displayName="CheckOutlined";var d=o.forwardRef(c);t.default=d},9470:function(e,t,n){"use strict";var a=n(64836),r=n(18698);t.Z=void 0;var l=a(n(42122)),o=function(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!==r(e)&&"function"!=typeof e)return{default:e};var n=u(t);if(n&&n.has(e))return n.get(e);var a={},l=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var o in e)if("default"!==o&&Object.prototype.hasOwnProperty.call(e,o)){var i=l?Object.getOwnPropertyDescriptor(e,o):null;i&&(i.get||i.set)?Object.defineProperty(a,o,i):a[o]=e[o]}return a.default=e,n&&n.set(e,a),a}(n(67294)),i=a(n(14059)),s=a(n(92074));function u(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,n=new WeakMap;return(u=function(e){return e?n:t})(e)}var c=function(e,t){return o.createElement(s.default,(0,l.default)((0,l.default)({},e),{},{ref:t,icon:i.default}))};c.displayName="PushpinOutlined";var d=o.forwardRef(c);t.Z=d},93875:function(e,t,n){(window.__NEXT_P=window.__NEXT_P||[]).push(["/author/comments",function(){return n(43633)}])},49923:function(e,t,n){"use strict";var a=n(85893),r=n(67294),l=n(11163),o=n(4851);t.Z=e=>{let{path:t="/"}=e,[n,i]=(0,r.useState)(3),s=(0,l.useRouter)();return(0,r.useEffect)(()=>{let e=setInterval(()=>{i(n-1)},1e3);return 0===n&&(clearInterval(e),s.push(t)),()=>clearInterval(e)},[n]),(0,a.jsx)("div",{style:{display:"flex",justifyContent:"center",alignItems:"center",height:"100vh"},children:(0,a.jsx)(o.default,{style:{display:"flex",justifyContent:"center",alignItems:"center",height:"100vh",fontSize:"50px",color:"red"}})})}},52988:function(e,t,n){"use strict";var a=n(85893),r=n(67294),l=n(42074),o=n(51024),i=n(65400);let{TextArea:s}=o.default;t.Z=e=>{let{comment:t,setComment:n,handleSubmit:o,loading:u}=e,[c,d]=(0,r.useContext)(l.V);return(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)("br",{}),(0,a.jsx)(s,{value:t,onChange:e=>n(e.target.value),placeholder:"Write a comment...(Max: 2000)",rows:"4",disabled:(null==c?void 0:c.user)===null&&(null==c?void 0:c.token)==="",maxLength:2e3}),(0,a.jsx)(i.default,{style:{marginTop:5},loading:u,type:"primary",disabled:""===t||(null==c?void 0:c.user)===null&&(null==c?void 0:c.token)==="",onClick:o,children:"Post"})]})}},48316:function(e,t,n){"use strict";var a=n(85893),r=n(67294),l=n(55673),o=n(5789),i=n(51024),s=n(56590),u=n(56697),c=n(89552),d=n(41664),f=n.n(d),h=n(6154),m=n(11163),v=n(42074),p=n(27484),x=n.n(p),y=n(56176),j=n.n(y),g=n(52988),w=n(3855),b=n(86501);x().extend(j()),t.Z=function(){let[e,t]=(0,r.useContext)(v.V),[n,d]=(0,r.useState)([]),[p,y]=(0,r.useState)(!0),[j,k]=(0,r.useState)(""),[_,I]=(0,r.useState)({}),[O,C]=(0,r.useState)(""),[M,S]=(0,r.useState)(!1);(0,m.useRouter)(),(0,r.useEffect)(()=>{(null==e?void 0:e.token)&&N()},[null==e?void 0:e.token]);let N=async()=>{try{let{data:e}=await h.Z.get("/user-comments");d(e),y(!1)}catch(e){console.log(e),y(!1)}},L=async e=>{confirm({title:"Are you sure you want to delete this comment?",icon:(0,a.jsx)(w.default,{}),content:"This action cannot be undone.",async onOk(){try{let{data:t}=await h.Z.delete("/comment/".concat(e._id));(null==t?void 0:t.ok)&&(d(n.filter(t=>t._id!==e._id)),setTotal(total-1),b.Am.success("Comment deleted successfully"))}catch(e){console.log(e)}},onCancel(){}})},P=async()=>{try{y(!0);let{data:e}=await h.Z.put("/comment/".concat(_._id),{content:O}),t=n.findIndex(e=>e._id===_._id);n[t].content=e.content,d(n),S(!1),y(!1),I({}),b.Am.success("Comment updated")}catch(e){console.log(e),S(!1)}},Z=null==n?void 0:n.filter(e=>{var t,n;return e.content.toLowerCase().includes(j)||(null==e?void 0:null===(t=e.postedBy)||void 0===t?void 0:t.name.toLowerCase().includes(j))||(null==e?void 0:null===(n=e.postedBy)||void 0===n?void 0:n.role)&&e.postedBy.role.toLowerCase().includes(j)});return(0,a.jsxs)(a.Fragment,{children:[p?(0,a.jsx)(c.default,{size:"large",style:{marginLeft:120,marginTop:80}}):(0,a.jsx)(l.default,{style:{paddingLeft:80,marginTop:40,paddingRight:50},children:(0,a.jsxs)(o.default,{xs:24,sm:24,lg:16,offset:1,children:[(0,a.jsxs)("h1",{style:{marginTop:15},children:[null==n?void 0:n.length," Comments"]}),(0,a.jsx)(i.default,{placeholder:"Search",type:"search",value:j,onChange:e=>k(e.target.value.toLowerCase())}),(0,a.jsx)(s.default,{itemLayout:"horizontal",dataSource:Z,renderItem:e=>{var t,n,r;return(0,a.jsx)(s.default.Item,{actions:[(0,a.jsx)(f(),{href:"/post/".concat(null==e?void 0:null===(t=e.postId)||void 0===t?void 0:t.slug,"#").concat(e._id),children:"view"}),(0,a.jsx)("a",{onClick:()=>{I(e),S(!0),C(e.content)},children:"edit"}),(0,a.jsx)("a",{onClick:()=>L(e),children:"delete"})],children:(0,a.jsx)(s.default.Item.Meta,{description:"On ".concat(null==e?void 0:null===(n=e.postId)||void 0===n?void 0:n.title," | ").concat(null==e?void 0:null===(r=e.postedBy)||void 0===r?void 0:r.name," | ").concat(x()(e.createdAt).format("L LT")),title:e.content})})}})]})}),(0,a.jsx)(l.default,{children:(0,a.jsx)(o.default,{span:24,children:(0,a.jsx)(u.default,{visible:M,title:"Update comment",onOk:()=>S(!1),onCancel:()=>S(!1),footer:null,children:(0,a.jsx)(g.Z,{handleSubmit:P,comment:O,setComment:C,loading:p})})})})]})}},91161:function(e,t,n){"use strict";n.d(t,{Z:function(){return _}});var a=n(85893),r=n(67294),l=n(16373),o=n(12386),i=n(41664),s=n.n(i),u=n(9470),c=n(26401),d=n(35741),f=n(27478),h=n(46403),m=n(63521),v=n(42074),p=n(42567);let{SubMenu:x}=o.default,{Sider:y}=l.default;var j=()=>{var e,t,n,l;let[i,j]=(0,r.useState)(""),[g,w]=(0,r.useState)(""),[b,k]=(0,r.useContext)(v.V),[_]=(0,r.useContext)(p.N),[I,O]=(0,r.useState)(!1),C=()=>{O(window.innerWidth<1e3)};(0,r.useEffect)(()=>{j(window.location.pathname);let e=window.location.pathname.split("/");return e.length>=3?w("/".concat(e[1])):w(""),window.addEventListener("resize",C),()=>{window.removeEventListener("resize",C)}},[]),(0,r.useEffect)(()=>{C()},[]);let M={sider:{width:I?50:100,height:"100vh",transition:"width 0.3s cubic-bezier(0.645, 0.045, 0.355, 1)",overflow:"hidden",paddingTop:"64px"},fixedSider:{position:"fixed",top:0,left:0,height:"100vh",zIndex:1e3,background:"dark"===_?"#001529":"#fff",boxShadow:"0 2px 8px rgba(0, 0, 0, 0.1)"},menu:{background:"dark"===_?"#001529":"#fff",height:"calc(100% - 64px)",overflowY:"auto",overflowX:"hidden",scrollbarWidth:"thin",WebkitOverflowScrolling:"touch"},item:{background:"transparent",transition:"background 0.3s"},activeItem:{background:"dark"===_?"#007F7F":"#00BFFF",color:"#fff"},activeSubMenu:{background:"dark"===_?"#007F7F":"#00BFFF",color:"#fff",transition:"width 0.3s cubic-bezier(0.645, 0.045, 0.355, 1) 0.1s"}};return(0,a.jsx)(y,{collapsible:!0,collapsed:I,onCollapse:()=>O(!I),style:{...M.sider,...M.fixedSider},children:(0,a.jsxs)(o.default,{defaultOpenKeys:["2","6","10"],mode:"inline",inlineCollapsed:I,selectedKeys:[i],style:M.menu,theme:_,children:[(0,a.jsx)(o.default.Item,{icon:(0,a.jsx)(d.Z,{}),className:"/author"===i?"active":"",style:"/author"===i?M.activeItem:M.item,children:(0,a.jsx)(s(),{href:"/author",children:"Dashboard"})},"/author"),(0,a.jsx)(o.default.Item,{icon:(0,a.jsx)(f.Z,{}),className:"/author/library"===i?"active":"",style:"/author/library"===i?M.activeItem:M.item,children:(0,a.jsx)(s(),{href:"/author/library",children:"Library"})},"/author/library"),(0,a.jsxs)(x,{icon:(0,a.jsx)(u.Z,{}),title:"Posts",className:"/author"===g?"active":"",style:"/author"===g?M.activeSubMenu:{},children:[(0,a.jsx)(o.default.Item,{className:"/author/posts"===i?"active":"",style:"/author/posts"===i?M.activeItem:M.item,children:(0,a.jsx)(s(),{href:"/author/posts",children:"All Books"})},"/author/posts"),(0,a.jsx)(o.default.Item,{className:"/author/posts/drafts"===i?"active":"",style:"/author/posts/drafts"===i?M.activeItem:M.item,children:(0,a.jsx)(s(),{href:"/author/posts/drafts",children:"All Drafts"})},"/author/drafts"),(0,a.jsx)(o.default.Item,{className:"/author/posts/new"===i?"active":"",style:"/author/posts/new"===i?M.activeItem:M.item,children:(0,a.jsx)(s(),{href:"/author/posts/new",children:"Add New Book"})},"/author/posts/new")]},"2"),(0,a.jsxs)(x,{icon:(0,a.jsx)(c.Z,{}),title:"Media",children:[(0,a.jsx)(o.default.Item,{className:"/author/media/library"===i?"active":"",style:"/author/media/library"===i?M.activeItem:M.item,children:(0,a.jsx)(s(),{href:"/author/media/library",children:"Media Library"})},"/author/media/library"),(0,a.jsx)(o.default.Item,{className:"/author/media/new"===i?"active":"",style:"/author/media/new"===i?M.activeItem:M.item,children:(0,a.jsx)(s(),{href:"/author/media/new",children:"Add New Media"})},"/author/media/new")]},"6"),(0,a.jsx)(o.default.Item,{icon:(0,a.jsx)(m.Z,{}),className:"/author/comments"===i?"active":"",style:"/author/comments"===i?M.activeItem:M.item,children:(0,a.jsx)(s(),{href:"/author/comments",children:"Comments"})},"/author/comments"),(0,a.jsx)(o.default.Item,{icon:(0,a.jsx)(h.Z,{}),className:i==="/author/".concat(null==b?void 0:null===(e=b.user)||void 0===e?void 0:e._id)?"active":"",style:i==="/author/".concat(null==b?void 0:null===(t=b.user)||void 0===t?void 0:t._id)?M.activeItem:M.item,children:(0,a.jsx)(s(),{href:"/author/".concat(null==b?void 0:null===(n=b.user)||void 0===n?void 0:n._id),children:"Profile"})},"/author/".concat(null==b?void 0:null===(l=b.user)||void 0===l?void 0:l._id))]})})},g=n(11163),w=n(6154),b=n(49923);let{Content:k}=l.default;function _(e){let{children:t}=e,[n,o]=(0,r.useContext)(v.V),[i,s]=(0,r.useState)(!0),[u,c]=(0,r.useState)(!0),d=(0,g.useRouter)();(0,r.useEffect)(()=>{(null==n?void 0:n.token)&&f()},[null==n?void 0:n.token]);let f=async()=>{try{let{data:e}=await w.Z.get("/current-author");s(!1)}catch(e){console.log(e),d.push("/")}};return i?(0,a.jsx)(b.Z,{}):(0,a.jsxs)(l.default,{children:[(0,a.jsx)(j,{isOpen:u,toggleNav:()=>{c(!u)}}),(0,a.jsx)(l.default,{style:{marginLeft:u?90:80,transition:"margin 0.5s"},children:(0,a.jsx)(k,{style:{padding:"10px"},children:t})})]})}},43633:function(e,t,n){"use strict";n.r(t),n.d(t,{default:function(){return u}});var a=n(85893),r=n(16373),l=n(91161),o=n(48316);let{Content:i,Sider:s}=r.default;function u(e){let{children:t}=e;return(0,a.jsx)(l.Z,{children:(0,a.jsx)(i,{children:(0,a.jsx)(o.Z,{})})})}}},function(e){e.O(0,[5584,5400,4104,1024,4749,6298,6697,2476,533,9774,2888,179],function(){return e(e.s=93875)}),_N_E=e.O()}]);