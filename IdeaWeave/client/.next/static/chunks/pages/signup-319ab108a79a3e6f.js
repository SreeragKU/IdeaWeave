(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[7616],{31682:function(e,a){"use strict";Object.defineProperty(a,"__esModule",{value:!0}),a.default={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M832 464h-68V240c0-70.7-57.3-128-128-128H388c-70.7 0-128 57.3-128 128v224h-68c-17.7 0-32 14.3-32 32v384c0 17.7 14.3 32 32 32h640c17.7 0 32-14.3 32-32V496c0-17.7-14.3-32-32-32zM332 240c0-30.9 25.1-56 56-56h248c30.9 0 56 25.1 56 56v224H332V240zm460 600H232V536h560v304zM484 701v53c0 4.4 3.6 8 8 8h40c4.4 0 8-3.6 8-8v-53a48.01 48.01 0 10-56 0z"}}]},name:"lock",theme:"outlined"}},79739:function(e,a,t){"use strict";var r=t(64836),s=t(18698);a.Z=void 0;var n=r(t(42122)),i=function(e,a){if(!a&&e&&e.__esModule)return e;if(null===e||"object"!==s(e)&&"function"!=typeof e)return{default:e};var t=c(a);if(t&&t.has(e))return t.get(e);var r={},n=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var i in e)if("default"!==i&&Object.prototype.hasOwnProperty.call(e,i)){var l=n?Object.getOwnPropertyDescriptor(e,i):null;l&&(l.get||l.set)?Object.defineProperty(r,i,l):r[i]=e[i]}return r.default=e,t&&t.set(e,r),r}(t(67294)),l=r(t(31682)),o=r(t(92074));function c(e){if("function"!=typeof WeakMap)return null;var a=new WeakMap,t=new WeakMap;return(c=function(e){return e?t:a})(e)}var u=function(e,a){return i.createElement(o.default,(0,n.default)((0,n.default)({},e),{},{ref:a,icon:l.default}))};u.displayName="LockOutlined";var d=i.forwardRef(u);a.Z=d},98588:function(e,a,t){(window.__NEXT_P=window.__NEXT_P||[]).push(["/signup",function(){return t(11374)}])},11374:function(e,a,t){"use strict";t.r(a);var r=t(85893),s=t(67294),n=t(97538),i=t(51024),l=t(65400),o=t(5789),c=t(55673),u=t(46403),d=t(79739),p=t(94119),m=t(34265),f=t(42419),h=t(41664),y=t.n(h),g=t(6154),v=t(86501),w=t(42074),x=t(11163);a.default=function(){let[e,a]=(0,s.useContext)(w.V),[t,h]=(0,s.useState)({length:!1,uppercase:!1,lowercase:!1,number:!1,special:!1}),[P,j]=(0,s.useState)(""),[Z,O]=(0,s.useState)(!1),[b,T]=(0,s.useState)(1),[_,N]=(0,s.useState)({email:"",otp:"",name:"",password:""}),k=(0,x.useRouter)(),[S,E]=(0,s.useState)(!1);(0,s.useEffect)(()=>{(null==e?void 0:e.token)&&k.push("/")},[e,k]);let A=e=>{j(e);let a={length:e.length>=8,uppercase:/[A-Z]/.test(e),lowercase:/[a-z]/.test(e),number:/[0-9]/.test(e),special:/[!@#$%^&*]/.test(e)};h(a);let t=Object.values(a).every(e=>e);O(!t)},M=async()=>{if(_.email&&""!==_.email.trim())try{var e;E(!0);let a=await g.Z.post("/send-otp",{email:_.email});(null===(e=a.data)||void 0===e?void 0:e.success)?(v.ZP.success("Check your email (even spam). OTP is sent"),T(2)):v.ZP.error("Failed to send OTP. Try again.")}catch(e){v.ZP.error("Failed to send OTP. Try again.")}finally{E(!1)}},q=async()=>{if(_.otp&&""!==_.otp.trim())try{var e;E(!0);let a=await g.Z.post("/verify-otp",{email:_.email,otp:_.otp});(null===(e=a.data)||void 0===e?void 0:e.token)?(v.ZP.success("OTP verified successfully"),T(3)):v.ZP.error("Failed to verify OTP. Please try again.")}catch(e){v.ZP.error("Failed to verify OTP. Please try again.")}finally{E(!1)}},C=async()=>{try{var e;if(E(!0),3===b&&(!_.name||!_.password)){v.ZP.error("Name and password are required"),E(!1);return}let a=await g.Z.post("/signup",{email:_.email,name:_.name,password:_.password,otp:_.otp});(null===(e=a.data)||void 0===e?void 0:e.token)?(v.ZP.success("Successfully signed up"),k.push("/signin")):v.ZP.error(a.data.error||"Signup failed. Try again.")}catch(e){v.ZP.error("Signup failed. Try again"),console.error(e)}finally{E(!1)}},V=async e=>{try{if(E(!0),1===b)await N({..._,email:e.email}),await M();else if(2===b)await N({..._,otp:e.otp}),await q();else if(3===b){if(await N({..._,name:e.name,password:e.password}),!_.name||!_.password)return;await C()}}catch(e){console.error(e),v.ZP.error("An error occurred. Please try again.")}finally{E(!1)}},B=1===b,F=(e,a)=>(0,r.jsxs)("p",{style:{color:e?"green":"red",textDecoration:e?"line-through":"none"},children:[e?"✔":"✘"," ",a]});return(0,r.jsx)(c.default,{children:(0,r.jsxs)(o.default,{span:8,offset:8,children:[(0,r.jsx)("h1",{style:{paddingTop:"100px"},children:"Sign Up"}),(0,r.jsxs)(n.Z,{name:"normal_login",className:"login-form",initialValues:{remember:!0},onFinish:V,children:[B&&(0,r.jsx)(n.Z.Item,{name:"email",rules:[{type:"email",required:!0,message:"Please input a valid email!"}],style:{marginBottom:"20px"},children:(0,r.jsx)(i.default,{prefix:(0,r.jsx)(p.Z,{className:"site-form-item-icon"}),placeholder:"Email"})}),2===b&&(0,r.jsx)(n.Z.Item,{name:"otp",rules:[{required:!0,message:"Please input the OTP sent to your email"}],style:{marginBottom:"20px"},children:(0,r.jsx)(i.default,{prefix:(0,r.jsx)(d.Z,{className:"site-form-item-icon"}),placeholder:"Enter OTP",value:_.otp,onChange:e=>N({..._,otp:e.target.value})})}),3===b&&(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(n.Z.Item,{name:"name",rules:[{required:!0,message:"Name is required"}],style:{marginBottom:"20px"},children:(0,r.jsx)(i.default,{prefix:(0,r.jsx)(u.Z,{className:"site-form-item-icon"}),placeholder:"Name"})}),(0,r.jsx)(n.Z.Item,{name:"password",rules:[{required:!0,validator:(e,a)=>{let r=Object.values(t).every(e=>e);return r?Promise.resolve():Promise.reject("Password does not meet the requirements.")}}],style:{marginBottom:"20px"},children:(0,r.jsxs)("div",{children:[(0,r.jsx)(i.default.Password,{prefix:(0,r.jsx)(d.Z,{className:"site-form-item-icon"}),type:"password",placeholder:"Password",iconRender:e=>e?(0,r.jsx)(f.default,{}):(0,r.jsx)(m.default,{}),onChange:e=>{A(e.target.value),N({..._,password:e.target.value})}}),Z&&(0,r.jsxs)("div",{className:"password-strength",children:[F(t.length,"At least 8 characters"),F(t.uppercase,"At least one uppercase character"),F(t.lowercase,"At least one lowercase character"),F(t.number,"At least one number"),F(t.special,"At least one special character")]})]})})]}),(0,r.jsx)(n.Z.Item,{style:{marginBottom:"0"},children:(0,r.jsx)(l.default,{type:"primary",htmlType:"submit",className:"login-form-button",loading:S,disabled:S,children:1===b?"Get OTP":2===b?"Verify OTP":"Register"})}),(0,r.jsxs)("div",{style:{paddingTop:"16px"},children:[B?"Already have an account? ":(0,r.jsx)("span",{onClick:()=>{N({email:"",otp:"",name:"",password:""}),T(1)},style:{cursor:"pointer"},children:"Go back"}),B?(0,r.jsx)(y(),{href:"/signin",children:"Login now!"}):null]})]})]})})}}},function(e){e.O(0,[5584,5400,4104,1024,7538,9774,2888,179],function(){return e(e.s=98588)}),_N_E=e.O()}]);