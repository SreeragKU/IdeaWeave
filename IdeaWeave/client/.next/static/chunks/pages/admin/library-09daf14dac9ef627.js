(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[1311],{83936:function(e,i,t){(window.__NEXT_P=window.__NEXT_P||[]).push(["/admin/library",function(){return t(40501)}])},49923:function(e,i,t){"use strict";var a=t(85893),d=t(67294),s=t(11163),l=t(4851);i.Z=e=>{let{path:i="/"}=e,[t,n]=(0,d.useState)(3),o=(0,s.useRouter)();return(0,d.useEffect)(()=>{let e=setInterval(()=>{n(t-1)},1e3);return 0===t&&(clearInterval(e),o.push(i)),()=>clearInterval(e)},[t]),(0,a.jsx)("div",{style:{display:"flex",justifyContent:"center",alignItems:"center",height:"100vh"},children:(0,a.jsx)(l.default,{style:{display:"flex",justifyContent:"center",alignItems:"center",height:"100vh",fontSize:"50px",color:"red"}})})}},22631:function(e,i,t){"use strict";t.d(i,{Z:function(){return z}});var a=t(85893),d=t(67294),s=t(16373),l=t(12386),n=t(41664),o=t.n(n),c=t(9470),r=t(26401),x=t(5099),m=t(35741),b=t(65772),u=t(46403),h=t(63521),f=t(27478),j=t(42074),p=t(42567);let{SubMenu:v}=l.default,{Sider:w}=s.default;var y=()=>{var e,i,t,s;let[n,y]=(0,d.useState)(""),[k,g]=(0,d.useState)(""),[N,I]=(0,d.useContext)(j.V),[z]=(0,d.useContext)(p.N),[_,S]=(0,d.useState)(!1),C=()=>{S(window.innerWidth<1e3)};(0,d.useEffect)(()=>{y(window.location.pathname);let e=window.location.pathname.split("/");return e.length>=3?g("/".concat(e[1])):g(""),window.addEventListener("resize",C),()=>{window.removeEventListener("resize",C)}},[]),(0,d.useEffect)(()=>{C()},[]);let Z={sider:{width:_?50:100,transition:"width 0.3s cubic-bezier(0.645, 0.045, 0.355, 1)",overflow:"hidden",paddingTop:"64px",height:"100vh"},fixedSider:{position:"fixed",top:0,left:0,bottom:0,zIndex:1e3,background:"dark"===z?"#001529":"#fff",boxShadow:"0 2px 8px rgba(0, 0, 0, 0.1)"},menu:{background:"dark"===z?"#001529":"#fff",height:"calc(100% - 64px)",overflowY:"auto",overflowX:"hidden",scrollbarWidth:"thin",WebkitOverflowScrolling:"touch"},item:{background:"transparent",transition:"background 0.3s"},activeItem:{background:"dark"===z?"#007F7F":"#00BFFF",color:"#fff"},activeSubMenu:{background:"dark"===z?"#007F7F":"#00BFFF",color:"#fff",transition:"width 0.3s cubic-bezier(0.645, 0.045, 0.355, 1) 0.1s"}};return(0,a.jsx)(w,{collapsible:!0,collapsed:_,onCollapse:()=>S(!_),style:{...Z.sider,...Z.fixedSider},children:(0,a.jsxs)(l.default,{defaultOpenKeys:["2","6","10"],mode:"inline",inlineCollapsed:_,selectedKeys:[n],style:Z.menu,theme:z,children:[(0,a.jsx)(l.default.Item,{icon:(0,a.jsx)(m.Z,{}),className:"/admin"===n?"active":"",style:"/admin"===n?Z.activeItem:Z.item,children:(0,a.jsx)(o(),{href:"/admin",children:"Dashboard"})},"/admin"),(0,a.jsx)(l.default.Item,{icon:(0,a.jsx)(f.Z,{}),className:"/admin/library"===n?"active":"",style:"/admin/library"===n?Z.activeItem:Z.item,children:(0,a.jsx)(o(),{href:"/admin/library",children:"Library"})},"/admin/library"),(0,a.jsxs)(v,{icon:(0,a.jsx)(c.Z,{}),title:"Posts",className:"/admin"===k?"active":"",style:"/admin"===k?Z.activeSubMenu:{},children:[(0,a.jsx)(l.default.Item,{className:"/admin/posts"===n?"active":"",style:"/admin/posts"===n?Z.activeItem:Z.item,children:(0,a.jsx)(o(),{href:"/admin/posts",children:"All Books"})},"/admin/posts"),(0,a.jsx)(l.default.Item,{className:"/admin/posts/drafts"===n?"active":"",style:"/admin/posts/drafts"===n?Z.activeItem:Z.item,children:(0,a.jsx)(o(),{href:"/admin/posts/drafts",children:"All Drafts"})},"/admin/drafts"),(0,a.jsx)(l.default.Item,{className:"/admin/posts/new"===n?"active":"",style:"/admin/posts/new"===n?Z.activeItem:Z.item,children:(0,a.jsx)(o(),{href:"/admin/posts/new",children:"Add New Book"})},"/admin/posts/new"),(0,a.jsx)(l.default.Item,{className:"/admin/categories"===n?"active":"",style:"/admin/categories"===n?Z.activeItem:Z.item,children:(0,a.jsx)(o(),{href:"/admin/categories",children:"Categories"})},"/admin/categories")]},"2"),(0,a.jsxs)(v,{icon:(0,a.jsx)(r.Z,{}),title:"Media",children:[(0,a.jsx)(l.default.Item,{className:"/admin/media/library"===n?"active":"",style:"/admin/media/library"===n?Z.activeItem:Z.item,children:(0,a.jsx)(o(),{href:"/admin/media/library",children:"Media Library"})},"/admin/media/library"),(0,a.jsx)(l.default.Item,{className:"/admin/media/new"===n?"active":"",style:"/admin/media/new"===n?Z.activeItem:Z.item,children:(0,a.jsx)(o(),{href:"/admin/media/new",children:"Add New Media"})},"/admin/media/new")]},"6"),(0,a.jsx)(l.default.Item,{icon:(0,a.jsx)(h.Z,{}),className:"/admin/comments"===n?"active":"",style:"/admin/comments"===n?Z.activeItem:Z.item,children:(0,a.jsx)(o(),{href:"/admin/comments",children:"Comments"})},"/admin/comments"),(0,a.jsxs)(v,{icon:(0,a.jsx)(x.Z,{}),title:"Users",children:[(0,a.jsx)(l.default.Item,{className:"/admin/users"===n?"active":"",style:"/admin/users"===n?Z.activeItem:Z.item,children:(0,a.jsx)(o(),{href:"/admin/users",children:"All Users"})},"/admin/users"),(0,a.jsx)(l.default.Item,{className:"/admin/users/new"===n?"active":"",style:"/admin/users/new"===n?Z.activeItem:Z.item,children:(0,a.jsx)(o(),{href:"/admin/users/new",children:"Add New"})},"/admin/users/new")]},"10"),(0,a.jsx)(l.default.Item,{icon:(0,a.jsx)(u.Z,{}),className:n==="/admin/".concat(null==N?void 0:null===(e=N.user)||void 0===e?void 0:e._id)?"active":"",style:n==="/admin/".concat(null==N?void 0:null===(i=N.user)||void 0===i?void 0:i._id)?Z.activeItem:Z.item,children:(0,a.jsx)(o(),{href:"/admin/".concat(null==N?void 0:null===(t=N.user)||void 0===t?void 0:t._id),id:"profile",children:"Profile"})},"/admin/".concat(null==N?void 0:null===(s=N.user)||void 0===s?void 0:s._id)),(0,a.jsx)(l.default.Item,{icon:(0,a.jsx)(b.Z,{}),className:"/admin/customize"===n?"active":"",style:"/admin/customize"===n?Z.activeItem:Z.item,children:(0,a.jsx)(o(),{href:"/admin/customize",children:"Customize"})},"/admin/customize")]})})},k=t(11163),g=t(6154),N=t(49923);let{Content:I}=s.default;function z(e){let{children:i}=e,[t,l]=(0,d.useContext)(j.V),[n,o]=(0,d.useState)(!0),[c,r]=(0,d.useState)(!0),x=(0,k.useRouter)();(0,d.useEffect)(()=>{(null==t?void 0:t.token)&&m()},[null==t?void 0:t.token]);let m=async()=>{try{let{data:e}=await g.Z.get("/current-admin");o(!1)}catch(e){console.log(e),x.push("/")}};return n?(0,a.jsx)(N.Z,{}):(0,a.jsxs)(s.default,{children:[(0,a.jsx)(y,{isOpen:c,toggleNav:()=>{r(!c)}}),(0,a.jsx)(s.default,{style:{marginLeft:c?90:80,transition:"margin 0.5s"},children:(0,a.jsx)(I,{style:{padding:"10px"},children:i})})]})}},40501:function(e,i,t){"use strict";t.r(i);var a=t(85893),d=t(48848),s=t.n(d),l=t(67294),n=t(6154),o=t(70302),c=t(56590),r=t(53740),x=t(65400),m=t(74048),b=t(42074),u=t(41664),h=t.n(u),f=t(60077),j=t(45799),p=t(19702),v=t(22631);let{Meta:w}=o.default,{Text:y}=r.default;i.default=()=>{let[e,i]=(0,l.useState)([]),[t,d]=(0,l.useState)(!0),[r,u]=(0,l.useContext)(b.V),[k,g]=(0,l.useState)("grid"),[N,I]=(0,l.useState)([]),[z,_]=(0,l.useState)(!1);(0,l.useEffect)(()=>{let e=async()=>{try{let e=r.user._id,t=await n.Z.get("/get-library/".concat(e));i(t.data.library),d(!1)}catch(e){console.error(e),d(!1)}};e()},[r]);let S=e=>{g(e)},C=e=>{let i=N.includes(e._id);i?I(N.filter(i=>i!==e._id)):I([...N,e._id])},Z=async()=>{try{console.log("Book Ids",N),await n.Z.delete("/bulkdelete-from-library",{data:{bookIds:N}});let e=r.user._id,t=await n.Z.get("/get-library/".concat(e));i(t.data.library),I([]),_(!1)}catch(e){console.error("Failed to delete books:",e)}};return(0,a.jsxs)(v.Z,{children:[(0,a.jsxs)("div",{className:"jsx-8ca113d3d4009b4e library-container",children:[(0,a.jsx)("div",{className:"jsx-8ca113d3d4009b4e view-mode",children:(0,a.jsxs)(m.default,{children:[(0,a.jsx)(x.default,{icon:(0,a.jsx)(f.Z,{}),onClick:()=>S("grid"),type:"grid"===k?"primary":"default"}),(0,a.jsx)(x.default,{icon:(0,a.jsx)(j.default,{}),onClick:()=>S("list"),type:"list"===k?"primary":"default"}),(0,a.jsx)(x.default,{onClick:Z,danger:!0,icon:(0,a.jsx)(p.default,{}),children:"Delete Selected"}),(0,a.jsxs)("div",{className:"jsx-8ca113d3d4009b4e select-all",children:[(0,a.jsx)("input",{type:"checkbox",onChange:()=>{if(z)I([]);else{let i=e.map(e=>e._id);I(i)}_(!z)},checked:z,className:"jsx-8ca113d3d4009b4e"}),(0,a.jsx)("span",{className:"jsx-8ca113d3d4009b4e",children:"Select All"})]})]})}),(0,a.jsx)("h1",{className:"jsx-8ca113d3d4009b4e",children:"Personal Library"}),t?(0,a.jsx)("p",{className:"jsx-8ca113d3d4009b4e",children:"Loading..."}):"grid"===k?(0,a.jsx)(c.default,{grid:{gutter:16,xs:1,sm:2,md:3,lg:4,xl:5,xxl:6},dataSource:e,renderItem:e=>(0,a.jsx)(c.default.Item,{children:(0,a.jsxs)("div",{className:"jsx-8ca113d3d4009b4e "+"book-card ".concat(N.includes(e._id)?"selected":""),children:[(0,a.jsx)("input",{type:"checkbox",onChange:()=>C(e),checked:N.includes(e._id),className:"jsx-8ca113d3d4009b4e"}),(0,a.jsx)(h(),{href:"/post/".concat(e.slug),children:(0,a.jsxs)(o.default,{hoverable:!0,className:"book-card",cover:(0,a.jsx)("img",{alt:e.title,src:e.coverImage,className:"jsx-8ca113d3d4009b4e book-cover"}),children:[(0,a.jsx)(w,{title:e.title,description:"By ".concat(e.postedBy)}),(0,a.jsx)("div",{className:"jsx-8ca113d3d4009b4e book-details",children:(0,a.jsx)(y,{children:"By ".concat(e.postedBy)})})]})})]})})}):(0,a.jsx)(c.default,{dataSource:e,renderItem:e=>(0,a.jsx)(c.default.Item,{children:(0,a.jsxs)("div",{className:"jsx-8ca113d3d4009b4e "+"book-list-card ".concat(N.includes(e._id)?"selected":""),children:[(0,a.jsx)("input",{type:"checkbox",onChange:()=>C(e),checked:N.includes(e._id),className:"jsx-8ca113d3d4009b4e"}),(0,a.jsx)(h(),{href:"/post/".concat(e.slug),children:(0,a.jsx)(o.default,{className:"book-list-card",children:(0,a.jsxs)("div",{className:"jsx-8ca113d3d4009b4e book-list-content",children:[(0,a.jsx)("div",{className:"jsx-8ca113d3d4009b4e book-list-cover-container",children:(0,a.jsx)("img",{alt:e.title,src:e.coverImage,className:"jsx-8ca113d3d4009b4e book-list-cover"})}),(0,a.jsx)("div",{className:"jsx-8ca113d3d4009b4e book-details",children:(0,a.jsx)(w,{title:e.title,description:"By ".concat(e.postedBy)})})]})})})]})})})]}),(0,a.jsx)(s(),{id:"8ca113d3d4009b4e",children:".library-container.jsx-8ca113d3d4009b4e{margin:70px 110px}.view-mode.jsx-8ca113d3d4009b4e{margin-bottom:10px}h1.jsx-8ca113d3d4009b4e{font-size:24px;margin-bottom:20px}.book-card.jsx-8ca113d3d4009b4e{width:100%;position:relative}.book-cover.jsx-8ca113d3d4009b4e{width:100%;height:200px;-o-object-fit:cover;object-fit:cover}.book-list-card.jsx-8ca113d3d4009b4e,.book-card.jsx-8ca113d3d4009b4e{position:relative}.book-list-card.jsx-8ca113d3d4009b4e .individual-delete-btn.jsx-8ca113d3d4009b4e,.book-card.jsx-8ca113d3d4009b4e .individual-delete-btn.jsx-8ca113d3d4009b4e{position:absolute;top:10px;right:10px}.book-list-card.jsx-8ca113d3d4009b4e{width:100%;height:200px;display:-webkit-box;display:-webkit-flex;display:-moz-box;display:-ms-flexbox;display:flex;border:1px solid#d9d9d9;-webkit-border-radius:4px;-moz-border-radius:4px;border-radius:4px;overflow:hidden;-webkit-transition:box-shadow.3s;-moz-transition:box-shadow.3s;-o-transition:box-shadow.3s;transition:box-shadow.3s;cursor:pointer;&.jsx-8ca113d3d4009b4e:hover{-webkit-box-shadow:0 4px 8px rgba(0,0,0,.1);-moz-box-shadow:0 4px 8px rgba(0,0,0,.1);box-shadow:0 4px 8px rgba(0,0,0,.1)}}.book-list-content.jsx-8ca113d3d4009b4e{display:-webkit-box;display:-webkit-flex;display:-moz-box;display:-ms-flexbox;display:flex;-webkit-box-orient:vertical;-webkit-box-direction:normal;-webkit-flex-direction:column;-moz-box-orient:vertical;-moz-box-direction:normal;-ms-flex-direction:column;flex-direction:column;width:100%;@media only screen and (min-width:768px){-webkit-box-orient:horizontal;-webkit-box-direction:normal;-webkit-flex-direction:row;-moz-box-orient:horizontal;-moz-box-direction:normal;-ms-flex-direction:row;flex-direction:row;width:1200px}}.book-list-cover-container.jsx-8ca113d3d4009b4e{-webkit-box-flex:0;-webkit-flex:0 0 120px;-moz-box-flex:0;-ms-flex:0 0 120px;flex:0 0 120px;width:120px;height:120px;overflow:hidden}.book-list-cover.jsx-8ca113d3d4009b4e{width:100%;height:100%;-o-object-fit:cover;object-fit:cover}.book-details.jsx-8ca113d3d4009b4e{-webkit-box-flex:1;-webkit-flex:1;-moz-box-flex:1;-ms-flex:1;flex:1;padding:16px}.select-all.jsx-8ca113d3d4009b4e{margin-top:10px;display:-webkit-box;display:-webkit-flex;display:-moz-box;display:-ms-flexbox;display:flex;-webkit-box-align:center;-webkit-align-items:center;-moz-box-align:center;-ms-flex-align:center;align-items:center}.select-all.jsx-8ca113d3d4009b4e input.jsx-8ca113d3d4009b4e{margin-right:8px}.individual-delete-btn.jsx-8ca113d3d4009b4e{margin-left:10px}.selected.jsx-8ca113d3d4009b4e{background-color:#606361}@media only screen and (max-width:767px){.library-container.jsx-8ca113d3d4009b4e{margin:40px}.book-details.jsx-8ca113d3d4009b4e{display:none}}"})]})}}},function(e){e.O(0,[5584,5400,4104,1350,9009,4749,3740,2476,3391,6508,9774,2888,179],function(){return e(e.s=83936)}),_N_E=e.O()}]);