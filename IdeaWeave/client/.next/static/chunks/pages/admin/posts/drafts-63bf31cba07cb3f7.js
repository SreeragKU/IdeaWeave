(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[5694],{62466:function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M766.4 744.3c43.7 0 79.4-36.2 79.4-80.5 0-53.5-79.4-140.8-79.4-140.8S687 610.3 687 663.8c0 44.3 35.7 80.5 79.4 80.5zm-377.1-44.1c7.1 7.1 18.6 7.1 25.6 0l256.1-256c7.1-7.1 7.1-18.6 0-25.6l-256-256c-.6-.6-1.3-1.2-2-1.7l-78.2-78.2a9.11 9.11 0 00-12.8 0l-48 48a9.11 9.11 0 000 12.8l67.2 67.2-207.8 207.9c-7.1 7.1-7.1 18.6 0 25.6l255.9 256zm12.9-448.6l178.9 178.9H223.4l178.8-178.9zM904 816H120c-4.4 0-8 3.6-8 8v80c0 4.4 3.6 8 8 8h784c4.4 0 8-3.6 8-8v-80c0-4.4-3.6-8-8-8z"}}]},name:"bg-colors",theme:"outlined"}},11776:function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"defs",attrs:{},children:[{tag:"style",attrs:{}}]},{tag:"path",attrs:{d:"M759 335c0-137-111-248-248-248S263 198 263 335c0 82.8 40.6 156.2 103 201.2-.4.2-.7.3-.9.4-44.7 18.9-84.8 46-119.3 80.6a373.42 373.42 0 00-80.4 119.5A373.6 373.6 0 00136 874.8a8 8 0 008 8.2h59.9c4.3 0 7.9-3.5 8-7.8 2-77.2 32.9-149.5 87.6-204.3C356 614.2 431 583 511 583c137 0 248-111 248-248zM511 507c-95 0-172-77-172-172s77-172 172-172 172 77 172 172-77 172-172 172zm105 221h264c4.4 0 8-3.6 8-8v-56c0-4.4-3.6-8-8-8H703.5l47.2-60.1a8.1 8.1 0 001.7-4.9c0-4.4-3.6-8-8-8h-72.6c-4.9 0-9.5 2.3-12.6 6.1l-68.5 87.1c-4.4 5.6-6.8 12.6-6.8 19.8.1 17.7 14.4 32 32.1 32zm240 64H592c-4.4 0-8 3.6-8 8v56c0 4.4 3.6 8 8 8h176.5l-47.2 60.1a8.1 8.1 0 00-1.7 4.9c0 4.4 3.6 8 8 8h72.6c4.9 0 9.5-2.3 12.6-6.1l68.5-87.1c4.4-5.6 6.8-12.6 6.8-19.8-.1-17.7-14.4-32-32.1-32z"}}]},name:"user-switch",theme:"outlined"}},65772:function(e,t,s){"use strict";var a=s(64836),i=s(18698);t.Z=void 0;var n=a(s(42122)),l=function(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!==i(e)&&"function"!=typeof e)return{default:e};var s=c(t);if(s&&s.has(e))return s.get(e);var a={},n=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var l in e)if("default"!==l&&Object.prototype.hasOwnProperty.call(e,l)){var r=n?Object.getOwnPropertyDescriptor(e,l):null;r&&(r.get||r.set)?Object.defineProperty(a,l,r):a[l]=e[l]}return a.default=e,s&&s.set(e,a),a}(s(67294)),r=a(s(62466)),d=a(s(92074));function c(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,s=new WeakMap;return(c=function(e){return e?s:t})(e)}var o=function(e,t){return l.createElement(d.default,(0,n.default)((0,n.default)({},e),{},{ref:t,icon:r.default}))};o.displayName="BgColorsOutlined";var u=l.forwardRef(o);t.Z=u},5099:function(e,t,s){"use strict";var a=s(64836),i=s(18698);t.Z=void 0;var n=a(s(42122)),l=function(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!==i(e)&&"function"!=typeof e)return{default:e};var s=c(t);if(s&&s.has(e))return s.get(e);var a={},n=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var l in e)if("default"!==l&&Object.prototype.hasOwnProperty.call(e,l)){var r=n?Object.getOwnPropertyDescriptor(e,l):null;r&&(r.get||r.set)?Object.defineProperty(a,l,r):a[l]=e[l]}return a.default=e,s&&s.set(e,a),a}(s(67294)),r=a(s(11776)),d=a(s(92074));function c(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,s=new WeakMap;return(c=function(e){return e?s:t})(e)}var o=function(e,t){return l.createElement(d.default,(0,n.default)((0,n.default)({},e),{},{ref:t,icon:r.default}))};o.displayName="UserSwitchOutlined";var u=l.forwardRef(o);t.Z=u},38377:function(e,t,s){(window.__NEXT_P=window.__NEXT_P||[]).push(["/admin/posts/drafts",function(){return s(45850)}])},49923:function(e,t,s){"use strict";var a=s(85893),i=s(67294),n=s(11163),l=s(4851);t.Z=e=>{let{path:t="/"}=e,[s,r]=(0,i.useState)(3),d=(0,n.useRouter)();return(0,i.useEffect)(()=>{let e=setInterval(()=>{r(s-1)},1e3);return 0===s&&(clearInterval(e),d.push(t)),()=>clearInterval(e)},[s]),(0,a.jsx)("div",{style:{display:"flex",justifyContent:"center",alignItems:"center",height:"100vh"},children:(0,a.jsx)(l.default,{style:{display:"flex",justifyContent:"center",alignItems:"center",height:"100vh",fontSize:"50px",color:"red"}})})}},22631:function(e,t,s){"use strict";s.d(t,{Z:function(){return _}});var a=s(85893),i=s(67294),n=s(16373),l=s(12386),r=s(41664),d=s.n(r),c=s(9470),o=s(26401),u=s(5099),f=s(35741),m=s(65772),h=s(46403),v=s(63521),p=s(27478),x=s(42074),j=s(42567);let{SubMenu:g}=l.default,{Sider:y}=n.default;var w=()=>{var e,t,s,n;let[r,w]=(0,i.useState)(""),[b,I]=(0,i.useState)(""),[k,O]=(0,i.useContext)(x.V),[_]=(0,i.useContext)(j.N),[C,N]=(0,i.useState)(!1),S=()=>{N(window.innerWidth<1e3)};(0,i.useEffect)(()=>{w(window.location.pathname);let e=window.location.pathname.split("/");return e.length>=3?I("/".concat(e[1])):I(""),window.addEventListener("resize",S),()=>{window.removeEventListener("resize",S)}},[]),(0,i.useEffect)(()=>{S()},[]);let Z={sider:{width:C?50:100,transition:"width 0.3s cubic-bezier(0.645, 0.045, 0.355, 1)",overflow:"hidden",paddingTop:"64px",height:"100vh"},fixedSider:{position:"fixed",top:0,left:0,bottom:0,zIndex:1e3,background:"dark"===_?"#001529":"#fff",boxShadow:"0 2px 8px rgba(0, 0, 0, 0.1)"},menu:{background:"dark"===_?"#001529":"#fff",height:"calc(100% - 64px)",overflowY:"auto",overflowX:"hidden",scrollbarWidth:"thin",WebkitOverflowScrolling:"touch"},item:{background:"transparent",transition:"background 0.3s"},activeItem:{background:"dark"===_?"#007F7F":"#00BFFF",color:"#fff"},activeSubMenu:{background:"dark"===_?"#007F7F":"#00BFFF",color:"#fff",transition:"width 0.3s cubic-bezier(0.645, 0.045, 0.355, 1) 0.1s"}};return(0,a.jsx)(y,{collapsible:!0,collapsed:C,onCollapse:()=>N(!C),style:{...Z.sider,...Z.fixedSider},children:(0,a.jsxs)(l.default,{defaultOpenKeys:["2","6","10"],mode:"inline",inlineCollapsed:C,selectedKeys:[r],style:Z.menu,theme:_,children:[(0,a.jsx)(l.default.Item,{icon:(0,a.jsx)(f.Z,{}),className:"/admin"===r?"active":"",style:"/admin"===r?Z.activeItem:Z.item,children:(0,a.jsx)(d(),{href:"/admin",children:"Dashboard"})},"/admin"),(0,a.jsx)(l.default.Item,{icon:(0,a.jsx)(p.Z,{}),className:"/admin/library"===r?"active":"",style:"/admin/library"===r?Z.activeItem:Z.item,children:(0,a.jsx)(d(),{href:"/admin/library",children:"Library"})},"/admin/library"),(0,a.jsxs)(g,{icon:(0,a.jsx)(c.Z,{}),title:"Posts",className:"/admin"===b?"active":"",style:"/admin"===b?Z.activeSubMenu:{},children:[(0,a.jsx)(l.default.Item,{className:"/admin/posts"===r?"active":"",style:"/admin/posts"===r?Z.activeItem:Z.item,children:(0,a.jsx)(d(),{href:"/admin/posts",children:"All Books"})},"/admin/posts"),(0,a.jsx)(l.default.Item,{className:"/admin/posts/drafts"===r?"active":"",style:"/admin/posts/drafts"===r?Z.activeItem:Z.item,children:(0,a.jsx)(d(),{href:"/admin/posts/drafts",children:"All Drafts"})},"/admin/drafts"),(0,a.jsx)(l.default.Item,{className:"/admin/posts/new"===r?"active":"",style:"/admin/posts/new"===r?Z.activeItem:Z.item,children:(0,a.jsx)(d(),{href:"/admin/posts/new",children:"Add New Book"})},"/admin/posts/new"),(0,a.jsx)(l.default.Item,{className:"/admin/categories"===r?"active":"",style:"/admin/categories"===r?Z.activeItem:Z.item,children:(0,a.jsx)(d(),{href:"/admin/categories",children:"Categories"})},"/admin/categories")]},"2"),(0,a.jsxs)(g,{icon:(0,a.jsx)(o.Z,{}),title:"Media",children:[(0,a.jsx)(l.default.Item,{className:"/admin/media/library"===r?"active":"",style:"/admin/media/library"===r?Z.activeItem:Z.item,children:(0,a.jsx)(d(),{href:"/admin/media/library",children:"Media Library"})},"/admin/media/library"),(0,a.jsx)(l.default.Item,{className:"/admin/media/new"===r?"active":"",style:"/admin/media/new"===r?Z.activeItem:Z.item,children:(0,a.jsx)(d(),{href:"/admin/media/new",children:"Add New Media"})},"/admin/media/new")]},"6"),(0,a.jsx)(l.default.Item,{icon:(0,a.jsx)(v.Z,{}),className:"/admin/comments"===r?"active":"",style:"/admin/comments"===r?Z.activeItem:Z.item,children:(0,a.jsx)(d(),{href:"/admin/comments",children:"Comments"})},"/admin/comments"),(0,a.jsxs)(g,{icon:(0,a.jsx)(u.Z,{}),title:"Users",children:[(0,a.jsx)(l.default.Item,{className:"/admin/users"===r?"active":"",style:"/admin/users"===r?Z.activeItem:Z.item,children:(0,a.jsx)(d(),{href:"/admin/users",children:"All Users"})},"/admin/users"),(0,a.jsx)(l.default.Item,{className:"/admin/users/new"===r?"active":"",style:"/admin/users/new"===r?Z.activeItem:Z.item,children:(0,a.jsx)(d(),{href:"/admin/users/new",children:"Add New"})},"/admin/users/new")]},"10"),(0,a.jsx)(l.default.Item,{icon:(0,a.jsx)(h.Z,{}),className:r==="/admin/".concat(null==k?void 0:null===(e=k.user)||void 0===e?void 0:e._id)?"active":"",style:r==="/admin/".concat(null==k?void 0:null===(t=k.user)||void 0===t?void 0:t._id)?Z.activeItem:Z.item,children:(0,a.jsx)(d(),{href:"/admin/".concat(null==k?void 0:null===(s=k.user)||void 0===s?void 0:s._id),id:"profile",children:"Profile"})},"/admin/".concat(null==k?void 0:null===(n=k.user)||void 0===n?void 0:n._id)),(0,a.jsx)(l.default.Item,{icon:(0,a.jsx)(m.Z,{}),className:"/admin/customize"===r?"active":"",style:"/admin/customize"===r?Z.activeItem:Z.item,children:(0,a.jsx)(d(),{href:"/admin/customize",children:"Customize"})},"/admin/customize")]})})},b=s(11163),I=s(6154),k=s(49923);let{Content:O}=n.default;function _(e){let{children:t}=e,[s,l]=(0,i.useContext)(x.V),[r,d]=(0,i.useState)(!0),[c,o]=(0,i.useState)(!0),u=(0,b.useRouter)();(0,i.useEffect)(()=>{(null==s?void 0:s.token)&&f()},[null==s?void 0:s.token]);let f=async()=>{try{let{data:e}=await I.Z.get("/current-admin");d(!1)}catch(e){console.log(e),u.push("/")}};return r?(0,a.jsx)(k.Z,{}):(0,a.jsxs)(n.default,{children:[(0,a.jsx)(w,{isOpen:c,toggleNav:()=>{o(!c)}}),(0,a.jsx)(n.default,{style:{marginLeft:c?90:80,transition:"margin 0.5s"},children:(0,a.jsx)(O,{style:{padding:"10px"},children:t})})]})}},65190:function(e,t,s){"use strict";var a=s(85893),i=s(67294),n=s(88758),l=s.n(n),r=s(27484),d=s.n(r),c=s(70302),o=s(5789),u=s(74048),f=s(35297),m=s(51024),h=s(64749),v=s(55673),p=s(31059),x=s(58452),j=s(19702),g=s(53740);let{Text:y,Title:w}=g.default,{Search:b}=m.default,{Option:I}=h.default;t.Z=e=>{let{posts:t,handleDelete:s,handleEdit:n,handleCardClick:r,selectedPosts:m}=e,[g,k]=(0,i.useState)(""),[O,_]=(0,i.useState)("asc"),C=e=>e.replace(/<\/?(u|b|i)>/g,""),N=e=>{k(e)},S=t.filter(e=>e.title.toLowerCase().includes(g.toLowerCase())).sort((e,t)=>"asc"===O?d()(e.createdAt).valueOf()-d()(t.createdAt).valueOf():d()(t.createdAt).valueOf()-d()(e.createdAt).valueOf()),Z=e=>{if(e.length>0){let t=e[0];return(0,a.jsx)("div",{children:(0,a.jsxs)(y,{ellipsis:!0,children:[l()(C(t.content)).substring(0,100),"..."]})},t.name)}return null},M=e=>e.map(e=>(0,a.jsxs)("div",{children:[(0,a.jsx)(y,{strong:!0,children:e.volume}),(0,a.jsxs)(y,{type:"secondary",children:["\xa0(",e.chapters.length," chapters)"]}),Z(e.chapters)]},e.volume));return(0,a.jsxs)(a.Fragment,{children:[(0,a.jsxs)(v.default,{justify:"space-between",style:{marginBottom:16,paddingRight:16},children:[(0,a.jsx)(o.default,{xs:24,sm:24,md:12,lg:12,children:(0,a.jsx)(b,{placeholder:"Search by title",onSearch:N,onChange:e=>N(e.target.value),value:g,style:{width:"100%"}})}),(0,a.jsx)(o.default,{xs:24,sm:24,md:12,lg:12,children:(0,a.jsxs)(h.default,{defaultValue:"asc",onChange:e=>{_(e)},style:{width:"100%"},children:[(0,a.jsx)(I,{value:"asc",children:"Ascending"}),(0,a.jsx)(I,{value:"desc",children:"Descending"})]})})]}),(0,a.jsx)(v.default,{gutter:[16,16],children:S.map(e=>{var t;return(0,a.jsx)(o.default,{xs:24,sm:12,md:8,lg:6,children:(0,a.jsxs)(c.default,{hoverable:!0,actions:[(0,a.jsxs)(u.default,{children:[(0,a.jsx)(p.Z,{onChange:()=>r(e._id),checked:m.includes(e._id)}),(0,a.jsx)(x.default,{onClick:()=>n(e)}),(0,a.jsx)(f.Z,{title:"Are you sure you want to delete?",onConfirm:()=>s(e),okText:"Yes",cancelText:"No",children:(0,a.jsx)(j.default,{})})]})],children:[(0,a.jsx)("img",{alt:e.title,src:null===(t=e.coverImage)||void 0===t?void 0:t.url,style:{width:"100%",height:"150px"}}),(0,a.jsx)(w,{level:5,children:e.title}),(0,a.jsxs)("div",{children:[(0,a.jsx)(y,{strong:!0,children:"Total Volumes:"}),(0,a.jsx)(y,{children:e.volumes.length}),(0,a.jsx)("br",{}),(0,a.jsx)(y,{strong:!0,children:"Total Chapters:"}),(0,a.jsx)(y,{children:e.volumes.reduce((e,t)=>e+t.chapters.length,0)})]}),M(e.volumes),(0,a.jsxs)("div",{style:{marginTop:"16px"},children:[(0,a.jsx)("u",{children:"Posted On"}),":"," ",(0,a.jsx)("i",{children:d()(e.createdAt).format("D MMMM, YYYY h:mm A")}),(0,a.jsx)("br",{}),(0,a.jsx)("u",{children:"Posted By"}),": ",e.postedBy.name]})]})},e._id)})})]})}},45850:function(e,t,s){"use strict";s.r(t);var a=s(85893),i=s(67294),n=s(55673),l=s(5789),r=s(65400),d=s(38614),c=s(53740),o=s(89552),u=s(6154),f=s(88775),m=s(11163),h=s(22631);s(41664);var v=s(65190),p=s(42074);let{useBreakpoint:x}=d.default,{Title:j,Text:g}=c.default;t.default=function(e){let{page:t="admin"}=e,[s,d]=(0,i.useContext)(f.W),[c,g]=(0,i.useContext)(p.V),{posts:y}=s,w=(0,m.useRouter)();x();let[b,I]=(0,i.useState)(!0),[k,O]=(0,i.useState)([]);(0,i.useEffect)(()=>{c.token&&_()},[null==c?void 0:c.token]);let _=async()=>{try{I(!0);let{data:e}=await u.Z.get("/draft-by-author");d(t=>({...t,posts:e}))}catch(e){console.log(e)}finally{I(!1)}},C=async e=>w.push("/admin/drafts/".concat(e.slug)),N=async e=>{try{let{data:t}=await u.Z.delete("/draft/".concat(e._id));t.ok&&d(t=>({...t,posts:t.posts.filter(t=>t._id!==e._id)}))}catch(e){console.log(e)}},S=async()=>{try{let{data:e}=await u.Z.post("/publish-draft-posts",{postIds:k});e.ok&&(console.log("Selected posts published successfully",e.publishedPosts),O([]),w.push("/".concat(t,"/posts")))}catch(e){console.error("Error publishing posts",e)}};return(0,a.jsx)(h.Z,{children:(0,a.jsxs)(n.default,{gutter:[16,16],style:{paddingLeft:120,marginTop:60,paddingRight:50},children:[(0,a.jsx)(l.default,{span:24,children:(0,a.jsx)(j,{style:{marginTop:15},level:3,children:b?(0,a.jsx)(o.default,{}):"".concat(null==y?void 0:y.length," Drafts")})}),(0,a.jsxs)(l.default,{span:24,children:[(0,a.jsx)(r.default,{type:"primary",onClick:S,disabled:0===k.length,children:"Publish Selected"}),(0,a.jsx)(v.Z,{posts:y,handleDelete:N,handleEdit:C,handleCardClick:e=>{O(t=>t.includes(e)?t.filter(t=>t!==e):[...t,e])},selectedPosts:k})]})]})})}}},function(e){e.O(0,[5584,5400,4104,1024,1350,9009,4749,3740,3391,3943,2157,2713,9774,2888,179],function(){return e(e.s=38377)}),_N_E=e.O()}]);