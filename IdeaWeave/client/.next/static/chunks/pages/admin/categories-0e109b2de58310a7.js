(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[8444],{58386:function(e,t,i){(window.__NEXT_P=window.__NEXT_P||[]).push(["/admin/categories",function(){return i(6677)}])},49923:function(e,t,i){"use strict";var a=i(85893),s=i(67294),n=i(11163),r=i(4851);t.Z=e=>{let{path:t="/"}=e,[i,l]=(0,s.useState)(3),d=(0,n.useRouter)();return(0,s.useEffect)(()=>{let e=setInterval(()=>{l(i-1)},1e3);return 0===i&&(clearInterval(e),d.push(t)),()=>clearInterval(e)},[i]),(0,a.jsx)("div",{style:{display:"flex",justifyContent:"center",alignItems:"center",height:"100vh"},children:(0,a.jsx)(r.default,{style:{display:"flex",justifyContent:"center",alignItems:"center",height:"100vh",fontSize:"50px",color:"red"}})})}},22631:function(e,t,i){"use strict";i.d(t,{Z:function(){return _}});var a=i(85893),s=i(67294),n=i(16373),r=i(12386),l=i(41664),d=i.n(l),c=i(9470),o=i(26401),m=i(5099),u=i(35741),f=i(65772),h=i(46403),x=i(63521),y=i(27478),g=i(42074),p=i(42567);let{SubMenu:j}=r.default,{Sider:v}=n.default;var w=()=>{var e,t,i,n;let[l,w]=(0,s.useState)(""),[b,I]=(0,s.useState)(""),[C,N]=(0,s.useContext)(g.V),[_]=(0,s.useContext)(p.N),[Z,k]=(0,s.useState)(!1),S=()=>{k(window.innerWidth<1e3)};(0,s.useEffect)(()=>{w(window.location.pathname);let e=window.location.pathname.split("/");return e.length>=3?I("/".concat(e[1])):I(""),window.addEventListener("resize",S),()=>{window.removeEventListener("resize",S)}},[]),(0,s.useEffect)(()=>{S()},[]);let A={sider:{width:Z?50:100,transition:"width 0.3s cubic-bezier(0.645, 0.045, 0.355, 1)",overflow:"hidden",paddingTop:"64px",height:"100vh"},fixedSider:{position:"fixed",top:0,left:0,bottom:0,zIndex:1e3,background:"dark"===_?"#001529":"#fff",boxShadow:"0 2px 8px rgba(0, 0, 0, 0.1)"},menu:{background:"dark"===_?"#001529":"#fff",height:"calc(100% - 64px)",overflowY:"auto",overflowX:"hidden",scrollbarWidth:"thin",WebkitOverflowScrolling:"touch"},item:{background:"transparent",transition:"background 0.3s"},activeItem:{background:"dark"===_?"#007F7F":"#00BFFF",color:"#fff"},activeSubMenu:{background:"dark"===_?"#007F7F":"#00BFFF",color:"#fff",transition:"width 0.3s cubic-bezier(0.645, 0.045, 0.355, 1) 0.1s"}};return(0,a.jsx)(v,{collapsible:!0,collapsed:Z,onCollapse:()=>k(!Z),style:{...A.sider,...A.fixedSider},children:(0,a.jsxs)(r.default,{defaultOpenKeys:["2","6","10"],mode:"inline",inlineCollapsed:Z,selectedKeys:[l],style:A.menu,theme:_,children:[(0,a.jsx)(r.default.Item,{icon:(0,a.jsx)(u.Z,{}),className:"/admin"===l?"active":"",style:"/admin"===l?A.activeItem:A.item,children:(0,a.jsx)(d(),{href:"/admin",children:"Dashboard"})},"/admin"),(0,a.jsx)(r.default.Item,{icon:(0,a.jsx)(y.Z,{}),className:"/admin/library"===l?"active":"",style:"/admin/library"===l?A.activeItem:A.item,children:(0,a.jsx)(d(),{href:"/admin/library",children:"Library"})},"/admin/library"),(0,a.jsxs)(j,{icon:(0,a.jsx)(c.Z,{}),title:"Posts",className:"/admin"===b?"active":"",style:"/admin"===b?A.activeSubMenu:{},children:[(0,a.jsx)(r.default.Item,{className:"/admin/posts"===l?"active":"",style:"/admin/posts"===l?A.activeItem:A.item,children:(0,a.jsx)(d(),{href:"/admin/posts",children:"All Books"})},"/admin/posts"),(0,a.jsx)(r.default.Item,{className:"/admin/posts/drafts"===l?"active":"",style:"/admin/posts/drafts"===l?A.activeItem:A.item,children:(0,a.jsx)(d(),{href:"/admin/posts/drafts",children:"All Drafts"})},"/admin/drafts"),(0,a.jsx)(r.default.Item,{className:"/admin/posts/new"===l?"active":"",style:"/admin/posts/new"===l?A.activeItem:A.item,children:(0,a.jsx)(d(),{href:"/admin/posts/new",children:"Add New Book"})},"/admin/posts/new"),(0,a.jsx)(r.default.Item,{className:"/admin/categories"===l?"active":"",style:"/admin/categories"===l?A.activeItem:A.item,children:(0,a.jsx)(d(),{href:"/admin/categories",children:"Categories"})},"/admin/categories")]},"2"),(0,a.jsxs)(j,{icon:(0,a.jsx)(o.Z,{}),title:"Media",children:[(0,a.jsx)(r.default.Item,{className:"/admin/media/library"===l?"active":"",style:"/admin/media/library"===l?A.activeItem:A.item,children:(0,a.jsx)(d(),{href:"/admin/media/library",children:"Media Library"})},"/admin/media/library"),(0,a.jsx)(r.default.Item,{className:"/admin/media/new"===l?"active":"",style:"/admin/media/new"===l?A.activeItem:A.item,children:(0,a.jsx)(d(),{href:"/admin/media/new",children:"Add New Media"})},"/admin/media/new")]},"6"),(0,a.jsx)(r.default.Item,{icon:(0,a.jsx)(x.Z,{}),className:"/admin/comments"===l?"active":"",style:"/admin/comments"===l?A.activeItem:A.item,children:(0,a.jsx)(d(),{href:"/admin/comments",children:"Comments"})},"/admin/comments"),(0,a.jsxs)(j,{icon:(0,a.jsx)(m.Z,{}),title:"Users",children:[(0,a.jsx)(r.default.Item,{className:"/admin/users"===l?"active":"",style:"/admin/users"===l?A.activeItem:A.item,children:(0,a.jsx)(d(),{href:"/admin/users",children:"All Users"})},"/admin/users"),(0,a.jsx)(r.default.Item,{className:"/admin/users/new"===l?"active":"",style:"/admin/users/new"===l?A.activeItem:A.item,children:(0,a.jsx)(d(),{href:"/admin/users/new",children:"Add New"})},"/admin/users/new")]},"10"),(0,a.jsx)(r.default.Item,{icon:(0,a.jsx)(h.Z,{}),className:l==="/admin/".concat(null==C?void 0:null===(e=C.user)||void 0===e?void 0:e._id)?"active":"",style:l==="/admin/".concat(null==C?void 0:null===(t=C.user)||void 0===t?void 0:t._id)?A.activeItem:A.item,children:(0,a.jsx)(d(),{href:"/admin/".concat(null==C?void 0:null===(i=C.user)||void 0===i?void 0:i._id),id:"profile",children:"Profile"})},"/admin/".concat(null==C?void 0:null===(n=C.user)||void 0===n?void 0:n._id)),(0,a.jsx)(r.default.Item,{icon:(0,a.jsx)(f.Z,{}),className:"/admin/customize"===l?"active":"",style:"/admin/customize"===l?A.activeItem:A.item,children:(0,a.jsx)(d(),{href:"/admin/customize",children:"Customize"})},"/admin/customize")]})})},b=i(11163),I=i(6154),C=i(49923);let{Content:N}=n.default;function _(e){let{children:t}=e,[i,r]=(0,s.useContext)(g.V),[l,d]=(0,s.useState)(!0),[c,o]=(0,s.useState)(!0),m=(0,b.useRouter)();(0,s.useEffect)(()=>{(null==i?void 0:i.token)&&u()},[null==i?void 0:i.token]);let u=async()=>{try{let{data:e}=await I.Z.get("/current-admin");d(!1)}catch(e){console.log(e),m.push("/")}};return l?(0,a.jsx)(C.Z,{}):(0,a.jsxs)(n.default,{children:[(0,a.jsx)(w,{isOpen:c,toggleNav:()=>{o(!c)}}),(0,a.jsx)(n.default,{style:{marginLeft:c?90:80,transition:"margin 0.5s"},children:(0,a.jsx)(N,{style:{padding:"10px"},children:t})})]})}},6677:function(e,t,i){"use strict";i.r(t),i.d(t,{default:function(){return w}});var a=i(85893),s=i(67294),n=i(16373),r=i(22631),l=i(97538),d=i(51024),c=i(55673),o=i(5789),m=i(65400),u=i(56590),f=i(58452),h=i(6154),x=i(86501),y=i(42567),g=i(56697),p=e=>{let{visible:t,setVisible:i,handleUpdate:s,updatingCategory:n,setPost:r}=e,[c]=l.Z.useForm(),o=async e=>{if(!e.name){x.Am.error("Category name cannot be empty");return}try{await s(e),r(t=>({...t,categories:t.categories.map(t=>t._id===n._id?{...t,name:e.name}:t)})),i(!1)}catch(e){console.error(e),x.Am.error("Category update failed")}};return(0,a.jsx)(g.default,{title:"Update Category",visible:t,footer:null,onCancel:()=>i(!1),children:(0,a.jsxs)(l.Z,{form:c,onFinish:o,fields:[{name:["name"],value:n.name}],children:[(0,a.jsx)(l.Z.Item,{name:"name",style:{marginBottom:"16px"},children:(0,a.jsx)(d.default,{prefix:(0,a.jsx)(f.default,{className:"site-form-item-icon"}),placeholder:"Provide a Category Name"})}),(0,a.jsx)(m.default,{type:"primary",htmlType:"submit",children:"Submit"})]})})},j=i(88775);let{Content:v}=n.default;function w(e){let{children:t}=e,[i,n]=(0,s.useState)(!1),[g,w]=(0,s.useContext)(y.N),[b,I]=(0,s.useState)({}),[C,N]=(0,s.useState)(!1),[_,Z]=(0,s.useState)([]),[k,S]=(0,s.useState)({}),[A]=l.Z.useForm(),[F,E]=(0,s.useContext)(j.W),{categories:z}=F;(0,s.useEffect)(()=>{P()},[]);let P=async()=>{try{let{data:e}=await h.Z.get("/category");E(t=>({...t,categories:e})),Z(e)}catch(e){console.error(e)}},L=async e=>{if(!e.name){x.Am.error("Category name cannot be empty");return}let t=z.find(t=>t.name===e.name);if(t){x.Am.error("Category already exists");return}try{n(!0);let{data:t}=await h.Z.post("/category",e);Z([t,..._]),x.Am.success("Category created successfully"),n(!1),A.resetFields(["name"])}catch(e){console.log(e),x.Am.error("Category create failed"),n(!1)}},B=async e=>{try{let{data:t}=await h.Z.delete("/category/".concat(e.slug));Z(_.filter(e=>e._id!==t._id)),E(e=>({...e,categories:e.categories.filter(e=>e._id!==t._id)})),x.Am.success("Category deleted successfully")}catch(e){console.log(e),x.Am.error("Category delete failed")}},M=async e=>{I(e),N(!0)},T=async e=>{if(!e.name){x.Am.error("Category name cannot be empty");return}let t=z.find(t=>t.name===e.name);if(t&&t.slug!==b.slug){x.Am.error("Category already exists"),N(!1),I({});return}try{let{data:t}=await h.Z.put("/category/".concat(b.slug),e);t?(x.Am.success("Category update successfully"),N(!1),I({}),P()):x.Am.error("Category update failed")}catch(e){console.error(e),x.Am.error("Category update failed")}},O=[k,..._].filter(e=>""!==e.name).filter(e=>e._id!==b._id&&e.slug!==k.slug);return!C&&b._id&&O.push(b),(0,a.jsx)(r.Z,{children:(0,a.jsxs)(c.default,{style:{paddingLeft:80,paddingTop:"50px",paddingRight:50},children:[(0,a.jsx)(o.default,{xs:22,sm:22,lg:10,offset:1,children:(0,a.jsxs)(v,{children:[(0,a.jsx)("h1",{children:"Categories"}),(0,a.jsx)("p",{children:"Add a new category"}),(0,a.jsxs)(l.Z,{onFinish:L,form:A,children:[(0,a.jsx)(l.Z.Item,{name:"name",style:{marginBottom:"16px"},rules:[{required:!0,message:"Please provide a Category Name"}],children:(0,a.jsx)(d.default,{prefix:(0,a.jsx)(f.default,{className:"site-form-item-icon"}),placeholder:"Provide a Category Name",id:"input"})}),(0,a.jsx)(m.default,{loading:i,type:"primary",htmlType:"submit",id:"submit",children:"Submit"})]})]})}),(0,a.jsx)(o.default,{xs:22,sm:22,lg:10,offset:1,children:(0,a.jsx)(u.default,{itemLayout:"horizontal",dataSource:O,renderItem:e=>(0,a.jsx)(u.default.Item,{actions:[(0,a.jsx)("a",{onClick:()=>M(e),children:"Edit"}),(0,a.jsx)("a",{onClick:()=>B(e),id:"remove",children:"Remove"})],children:(0,a.jsx)(u.default.Item.Meta,{title:(0,a.jsx)("span",{style:{color:"light"===g?"black":"white"},children:e.name})})})})}),b._id&&(0,a.jsx)(p,{visible:C,setVisible:N,handleUpdate:T,updatingCategory:b,setPost:E})]})})}}},function(e){e.O(0,[5584,5400,4104,1024,4749,6298,6697,2476,7538,3095,9774,2888,179],function(){return e(e.s=58386)}),_N_E=e.O()}]);