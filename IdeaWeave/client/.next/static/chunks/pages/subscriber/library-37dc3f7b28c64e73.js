(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[2316],{57208:function(e,i,t){(window.__NEXT_P=window.__NEXT_P||[]).push(["/subscriber/library",function(){return t(20471)}])},49923:function(e,i,t){"use strict";var s=t(85893),a=t(67294),r=t(11163),l=t(4851);i.Z=e=>{let{path:i="/"}=e,[t,c]=(0,a.useState)(3),o=(0,r.useRouter)();return(0,a.useEffect)(()=>{let e=setInterval(()=>{c(t-1)},1e3);return 0===t&&(clearInterval(e),o.push(i)),()=>clearInterval(e)},[t]),(0,s.jsx)("div",{style:{display:"flex",justifyContent:"center",alignItems:"center",height:"100vh"},children:(0,s.jsx)(l.default,{style:{display:"flex",justifyContent:"center",alignItems:"center",height:"100vh",fontSize:"50px",color:"red"}})})}},84184:function(e,i,t){"use strict";t.d(i,{Z:function(){return g}});var s=t(85893),a=t(67294),r=t(16373),l=t(12386),c=t(41664),o=t.n(c),n=t(26401),d=t(27478),b=t(35741),x=t(46403),u=t(63521),f=t(42074),m=t(42567);let{SubMenu:h}=l.default,{Sider:j}=r.default;var p=()=>{var e,i,t,r;let[c,p]=(0,a.useState)(""),[v,w]=(0,a.useState)(""),[y,k]=(0,a.useContext)(f.V),[g]=(0,a.useContext)(m.N),[N,I]=(0,a.useState)(!1),_=()=>{I(window.innerWidth<1e3)};(0,a.useEffect)(()=>{p(window.location.pathname);let e=window.location.pathname.split("/");return e.length>=3?w("/".concat(e[1])):w(""),window.addEventListener("resize",_),()=>{window.removeEventListener("resize",_)}},[]),(0,a.useEffect)(()=>{_()},[]);let z={sider:{width:N?50:100,height:"100vh",transition:"width 0.3s cubic-bezier(0.645, 0.045, 0.355, 1)",overflow:"hidden",paddingTop:"64px"},fixedSider:{position:"fixed",top:0,left:0,height:"100vh",zIndex:1e3,background:"dark"===g?"#001529":"#fff",boxShadow:"0 2px 8px rgba(0, 0, 0, 0.1)"},menu:{background:"dark"===g?"#001529":"#fff",height:"calc(100% - 64px)",overflowY:"auto",overflowX:"hidden",scrollbarWidth:"thin",WebkitOverflowScrolling:"touch"},item:{background:"transparent",transition:"background 0.3s"},activeItem:{background:"dark"===g?"#007F7F":"#00BFFF",color:"#fff"}};return(0,s.jsx)(j,{collapsible:!0,collapsed:N,onCollapse:()=>I(!N),style:{...z.sider,...z.fixedSider},children:(0,s.jsxs)(l.default,{defaultOpenKeys:["2","6","10"],mode:"inline",inlineCollapsed:N,selectedKeys:[c],style:z.menu,theme:g,children:[(0,s.jsx)(l.default.Item,{icon:(0,s.jsx)(b.Z,{}),className:"/subscriber"===c?"active":"",style:"/subscriber"===c?z.activeItem:z.item,children:(0,s.jsx)(o(),{href:"/subscriber",children:"Dashboard"})},"/subscriber"),(0,s.jsx)(l.default.Item,{icon:(0,s.jsx)(d.Z,{}),className:"/subscriber/library"===c?"active":"",style:"/subscriber/library"===c?z.activeItem:z.item,children:(0,s.jsx)(o(),{href:"/subscriber/library",children:"Library"})},"/subscriber/library"),(0,s.jsx)(l.default.Item,{icon:(0,s.jsx)(u.Z,{}),className:"/subscriber/comments"===c?"active":"",style:"/subscriber/comments"===c?z.activeItem:z.item,children:(0,s.jsx)(o(),{href:"/subscriber/comments",children:"Comments"})},"/subscriber/comments"),(0,s.jsxs)(h,{icon:(0,s.jsx)(n.Z,{}),title:"Media",children:[(0,s.jsx)(l.default.Item,{className:"/subscriber/media/library"===c?"active":"",style:"/subscriber/media/library"===c?z.activeItem:z.item,children:(0,s.jsx)(o(),{href:"/subscriber/media/library",children:"Media Library"})},"/subscriber/media/library"),(0,s.jsx)(l.default.Item,{className:"/subscriber/media/new"===c?"active":"",style:"/subscriber/media/new"===c?z.activeItem:z.item,children:(0,s.jsx)(o(),{href:"/subscriber/media/new",children:"Add New Media"})},"/subscriber/media/new")]},"6"),(0,s.jsx)(l.default.Item,{icon:(0,s.jsx)(x.Z,{}),className:c==="/subscriber/".concat(null==y?void 0:null===(e=y.user)||void 0===e?void 0:e._id)?"active":"",style:c==="/subscriber/".concat(null==y?void 0:null===(i=y.user)||void 0===i?void 0:i._id)?z.activeItem:z.item,children:(0,s.jsx)(o(),{href:"/subscriber/".concat(null==y?void 0:null===(t=y.user)||void 0===t?void 0:t._id),children:"Profile"})},"/subscriber/".concat(null==y?void 0:null===(r=y.user)||void 0===r?void 0:r._id))]})})},v=t(11163),w=t(6154),y=t(49923);let{Content:k}=r.default;function g(e){let{children:i}=e,[t,l]=(0,a.useContext)(f.V),[c,o]=(0,a.useState)(!0),[n,d]=(0,a.useState)(!0),b=(0,v.useRouter)();(0,a.useEffect)(()=>{(null==t?void 0:t.token)&&x()},[null==t?void 0:t.token]);let x=async()=>{try{let{data:e}=await w.Z.get("/current-subscriber");o(!1)}catch(e){console.log(e),b.push("/")}};return c?(0,s.jsx)(y.Z,{}):(0,s.jsxs)(r.default,{children:[(0,s.jsx)(p,{isOpen:n,toggleNav:()=>{d(!n)}}),(0,s.jsx)(r.default,{style:{marginLeft:n?90:80,transition:"margin 0.5s"},children:(0,s.jsx)(k,{style:{padding:"10px"},children:i})})]})}},20471:function(e,i,t){"use strict";t.r(i);var s=t(85893),a=t(48848),r=t.n(a),l=t(67294),c=t(6154),o=t(70302),n=t(56590),d=t(53740),b=t(65400),x=t(74048),u=t(42074),f=t(41664),m=t.n(f),h=t(60077),j=t(45799),p=t(19702),v=t(84184);let{Meta:w}=o.default,{Text:y}=d.default;i.default=()=>{let[e,i]=(0,l.useState)([]),[t,a]=(0,l.useState)(!0),[d,f]=(0,l.useContext)(u.V),[k,g]=(0,l.useState)("grid"),[N,I]=(0,l.useState)([]),[_,z]=(0,l.useState)(!1);(0,l.useEffect)(()=>{let e=async()=>{try{let e=d.user._id,t=await c.Z.get("/get-library/".concat(e));i(t.data.library),a(!1)}catch(e){console.error(e),a(!1)}};e()},[d]);let S=e=>{g(e)},C=e=>{let i=N.includes(e._id);i?I(N.filter(i=>i!==e._id)):I([...N,e._id])},Z=async()=>{try{console.log("Book Ids",N),await c.Z.delete("/bulkdelete-from-library",{data:{bookIds:N}});let e=d.user._id,t=await c.Z.get("/get-library/".concat(e));i(t.data.library),I([]),z(!1)}catch(e){console.error("Failed to delete books:",e)}};return(0,s.jsxs)(v.Z,{children:[(0,s.jsxs)("div",{className:"jsx-8a37979ceb38f789 library-container",children:[(0,s.jsx)("div",{className:"jsx-8a37979ceb38f789 view-mode",children:(0,s.jsxs)(x.default,{children:[(0,s.jsx)(b.default,{icon:(0,s.jsx)(h.Z,{}),onClick:()=>S("grid"),type:"grid"===k?"primary":"default"}),(0,s.jsx)(b.default,{icon:(0,s.jsx)(j.default,{}),onClick:()=>S("list"),type:"list"===k?"primary":"default"}),(0,s.jsx)(b.default,{onClick:Z,danger:!0,icon:(0,s.jsx)(p.default,{}),children:"Delete Selected"}),(0,s.jsxs)("div",{className:"jsx-8a37979ceb38f789 select-all",children:[(0,s.jsx)("input",{type:"checkbox",onChange:()=>{if(_)I([]);else{let i=e.map(e=>e._id);I(i)}z(!_)},checked:_,className:"jsx-8a37979ceb38f789"}),(0,s.jsx)("span",{className:"jsx-8a37979ceb38f789",children:"Select All"})]})]})}),(0,s.jsx)("h1",{className:"jsx-8a37979ceb38f789",children:"Personal Library"}),t?(0,s.jsx)("p",{className:"jsx-8a37979ceb38f789",children:"Loading..."}):"grid"===k?(0,s.jsx)(n.default,{grid:{gutter:16,xs:1,sm:2,md:3,lg:4,xl:5,xxl:6},dataSource:e,renderItem:e=>(0,s.jsx)(n.default.Item,{children:(0,s.jsxs)("div",{className:"jsx-8a37979ceb38f789 "+"book-card ".concat(N.includes(e._id)?"selected":""),children:[(0,s.jsx)("input",{type:"checkbox",onChange:()=>C(e),checked:N.includes(e._id),className:"jsx-8a37979ceb38f789"}),(0,s.jsx)(m(),{href:"/post/".concat(e.slug),children:(0,s.jsxs)(o.default,{hoverable:!0,className:"book-card",cover:(0,s.jsx)("img",{alt:e.title,src:e.coverImage,className:"jsx-8a37979ceb38f789 book-cover"}),children:[(0,s.jsx)(w,{title:e.title,description:"By ".concat(e.postedBy)}),(0,s.jsx)("div",{className:"jsx-8a37979ceb38f789 book-details",children:(0,s.jsx)(y,{children:"By ".concat(e.postedBy)})})]})})]})})}):(0,s.jsx)(n.default,{dataSource:e,renderItem:e=>(0,s.jsx)(n.default.Item,{children:(0,s.jsxs)("div",{className:"jsx-8a37979ceb38f789 "+"book-list-card ".concat(N.includes(e._id)?"selected":""),children:[(0,s.jsx)("input",{type:"checkbox",onChange:()=>C(e),checked:N.includes(e._id),className:"jsx-8a37979ceb38f789"}),(0,s.jsx)(m(),{href:"/post/".concat(e.slug),children:(0,s.jsx)(o.default,{className:"book-list-card",children:(0,s.jsxs)("div",{className:"jsx-8a37979ceb38f789 book-list-content",children:[(0,s.jsx)("div",{className:"jsx-8a37979ceb38f789 book-list-cover-container",children:(0,s.jsx)("img",{alt:e.title,src:e.coverImage,className:"jsx-8a37979ceb38f789 book-list-cover"})}),(0,s.jsx)("div",{className:"jsx-8a37979ceb38f789 book-details",children:(0,s.jsx)(w,{title:e.title,description:"By ".concat(e.postedBy)})})]})})})]})})})]}),(0,s.jsx)(r(),{id:"8a37979ceb38f789",children:".library-container.jsx-8a37979ceb38f789{margin:70px 110px}.view-mode.jsx-8a37979ceb38f789{margin-bottom:10px}h1.jsx-8a37979ceb38f789{font-size:24px;margin-bottom:20px}.book-card.jsx-8a37979ceb38f789{width:100%;position:relative}.book-cover.jsx-8a37979ceb38f789{width:100%;height:200px;-o-object-fit:cover;object-fit:cover}.book-list-card.jsx-8a37979ceb38f789,.book-card.jsx-8a37979ceb38f789{position:relative}.book-list-card.jsx-8a37979ceb38f789 .individual-delete-btn.jsx-8a37979ceb38f789,.book-card.jsx-8a37979ceb38f789 .individual-delete-btn.jsx-8a37979ceb38f789{position:absolute;top:10px;right:10px}.book-list-card.jsx-8a37979ceb38f789{width:100%;height:200px;display:-webkit-box;display:-webkit-flex;display:-moz-box;display:-ms-flexbox;display:flex;border:1px solid#d9d9d9;-webkit-border-radius:4px;-moz-border-radius:4px;border-radius:4px;overflow:hidden;-webkit-transition:box-shadow.3s;-moz-transition:box-shadow.3s;-o-transition:box-shadow.3s;transition:box-shadow.3s;cursor:pointer;&.jsx-8a37979ceb38f789:hover{-webkit-box-shadow:0 4px 8px rgba(0,0,0,.1);-moz-box-shadow:0 4px 8px rgba(0,0,0,.1);box-shadow:0 4px 8px rgba(0,0,0,.1)}}.book-list-content.jsx-8a37979ceb38f789{display:-webkit-box;display:-webkit-flex;display:-moz-box;display:-ms-flexbox;display:flex;-webkit-box-orient:vertical;-webkit-box-direction:normal;-webkit-flex-direction:column;-moz-box-orient:vertical;-moz-box-direction:normal;-ms-flex-direction:column;flex-direction:column;width:100%;@media only screen and (min-width:768px){-webkit-box-orient:horizontal;-webkit-box-direction:normal;-webkit-flex-direction:row;-moz-box-orient:horizontal;-moz-box-direction:normal;-ms-flex-direction:row;flex-direction:row;width:1200px}}.book-list-cover-container.jsx-8a37979ceb38f789{-webkit-box-flex:0;-webkit-flex:0 0 120px;-moz-box-flex:0;-ms-flex:0 0 120px;flex:0 0 120px;width:120px;height:120px;overflow:hidden}.book-list-cover.jsx-8a37979ceb38f789{width:100%;height:100%;-o-object-fit:cover;object-fit:cover}.book-details.jsx-8a37979ceb38f789{-webkit-box-flex:1;-webkit-flex:1;-moz-box-flex:1;-ms-flex:1;flex:1;padding:16px}.select-all.jsx-8a37979ceb38f789{margin-top:10px;display:-webkit-box;display:-webkit-flex;display:-moz-box;display:-ms-flexbox;display:flex;-webkit-box-align:center;-webkit-align-items:center;-moz-box-align:center;-ms-flex-align:center;align-items:center}.select-all.jsx-8a37979ceb38f789 input.jsx-8a37979ceb38f789{margin-right:8px}.individual-delete-btn.jsx-8a37979ceb38f789{margin-left:10px}.selected.jsx-8a37979ceb38f789{background-color:#606361}@media only screen and (max-width:767px){.library-container.jsx-8a37979ceb38f789{margin:40px}.book-details.jsx-8a37979ceb38f789{display:none}}"})]})}}},function(e){e.O(0,[5584,5400,4104,1350,9009,4749,3740,2476,3391,7525,9774,2888,179],function(){return e(e.s=57208)}),_N_E=e.O()}]);