(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[5117],{13864:function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M942.2 486.2C847.4 286.5 704.1 186 512 186c-192.2 0-335.4 100.5-430.2 300.3a60.3 60.3 0 000 51.5C176.6 737.5 319.9 838 512 838c192.2 0 335.4-100.5 430.2-300.3 7.7-16.2 7.7-35 0-51.5zM512 766c-161.3 0-279.4-81.8-362.7-254C232.6 339.8 350.7 258 512 258c161.3 0 279.4 81.8 362.7 254C791.5 684.2 673.4 766 512 766zm-4-430c-97.2 0-176 78.8-176 176s78.8 176 176 176 176-78.8 176-176-78.8-176-176-176zm0 288c-61.9 0-112-50.1-112-112s50.1-112 112-112 112 50.1 112 112-50.1 112-112 112z"}}]},name:"eye",theme:"outlined"}},29918:function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r,s=(r=i(42419))&&r.__esModule?r:{default:r};t.default=s,e.exports=s},42419:function(e,t,i){"use strict";var r=i(64836),s=i(18698);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var l=r(i(42122)),n=function(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!==s(e)&&"function"!=typeof e)return{default:e};var i=d(t);if(i&&i.has(e))return i.get(e);var r={},l=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var n in e)if("default"!==n&&Object.prototype.hasOwnProperty.call(e,n)){var a=l?Object.getOwnPropertyDescriptor(e,n):null;a&&(a.get||a.set)?Object.defineProperty(r,n,a):r[n]=e[n]}return r.default=e,i&&i.set(e,r),r}(i(67294)),a=r(i(13864)),o=r(i(92074));function d(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,i=new WeakMap;return(d=function(e){return e?i:t})(e)}var c=function(e,t){return n.createElement(o.default,(0,l.default)((0,l.default)({},e),{},{ref:t,icon:a.default}))};c.displayName="EyeOutlined";var u=n.forwardRef(c);t.default=u},32425:function(e,t,i){(window.__NEXT_P=window.__NEXT_P||[]).push(["/subscriber/media/library",function(){return i(29717)}])},49923:function(e,t,i){"use strict";var r=i(85893),s=i(67294),l=i(11163),n=i(4851);t.Z=e=>{let{path:t="/"}=e,[i,a]=(0,s.useState)(3),o=(0,l.useRouter)();return(0,s.useEffect)(()=>{let e=setInterval(()=>{a(i-1)},1e3);return 0===i&&(clearInterval(e),o.push(t)),()=>clearInterval(e)},[i]),(0,r.jsx)("div",{style:{display:"flex",justifyContent:"center",alignItems:"center",height:"100vh"},children:(0,r.jsx)(n.default,{style:{display:"flex",justifyContent:"center",alignItems:"center",height:"100vh",fontSize:"50px",color:"red"}})})}},84184:function(e,t,i){"use strict";i.d(t,{Z:function(){return _}});var r=i(85893),s=i(67294),l=i(16373),n=i(12386),a=i(41664),o=i.n(a),d=i(26401),c=i(27478),u=i(35741),f=i(46403),b=i(63521),p=i(42074),m=i(42567);let{SubMenu:h}=n.default,{Sider:v}=l.default;var x=()=>{var e,t,i,l;let[a,x]=(0,s.useState)(""),[g,y]=(0,s.useState)(""),[j,w]=(0,s.useContext)(p.V),[_]=(0,s.useContext)(m.N),[k,C]=(0,s.useState)(!1),I=()=>{C(window.innerWidth<1e3)};(0,s.useEffect)(()=>{x(window.location.pathname);let e=window.location.pathname.split("/");return e.length>=3?y("/".concat(e[1])):y(""),window.addEventListener("resize",I),()=>{window.removeEventListener("resize",I)}},[]),(0,s.useEffect)(()=>{I()},[]);let N={sider:{width:k?50:100,height:"100vh",transition:"width 0.3s cubic-bezier(0.645, 0.045, 0.355, 1)",overflow:"hidden",paddingTop:"64px"},fixedSider:{position:"fixed",top:0,left:0,height:"100vh",zIndex:1e3,background:"dark"===_?"#001529":"#fff",boxShadow:"0 2px 8px rgba(0, 0, 0, 0.1)"},menu:{background:"dark"===_?"#001529":"#fff",height:"calc(100% - 64px)",overflowY:"auto",overflowX:"hidden",scrollbarWidth:"thin",WebkitOverflowScrolling:"touch"},item:{background:"transparent",transition:"background 0.3s"},activeItem:{background:"dark"===_?"#007F7F":"#00BFFF",color:"#fff"}};return(0,r.jsx)(v,{collapsible:!0,collapsed:k,onCollapse:()=>C(!k),style:{...N.sider,...N.fixedSider},children:(0,r.jsxs)(n.default,{defaultOpenKeys:["2","6","10"],mode:"inline",inlineCollapsed:k,selectedKeys:[a],style:N.menu,theme:_,children:[(0,r.jsx)(n.default.Item,{icon:(0,r.jsx)(u.Z,{}),className:"/subscriber"===a?"active":"",style:"/subscriber"===a?N.activeItem:N.item,children:(0,r.jsx)(o(),{href:"/subscriber",children:"Dashboard"})},"/subscriber"),(0,r.jsx)(n.default.Item,{icon:(0,r.jsx)(c.Z,{}),className:"/subscriber/library"===a?"active":"",style:"/subscriber/library"===a?N.activeItem:N.item,children:(0,r.jsx)(o(),{href:"/subscriber/library",children:"Library"})},"/subscriber/library"),(0,r.jsx)(n.default.Item,{icon:(0,r.jsx)(b.Z,{}),className:"/subscriber/comments"===a?"active":"",style:"/subscriber/comments"===a?N.activeItem:N.item,children:(0,r.jsx)(o(),{href:"/subscriber/comments",children:"Comments"})},"/subscriber/comments"),(0,r.jsxs)(h,{icon:(0,r.jsx)(d.Z,{}),title:"Media",children:[(0,r.jsx)(n.default.Item,{className:"/subscriber/media/library"===a?"active":"",style:"/subscriber/media/library"===a?N.activeItem:N.item,children:(0,r.jsx)(o(),{href:"/subscriber/media/library",children:"Media Library"})},"/subscriber/media/library"),(0,r.jsx)(n.default.Item,{className:"/subscriber/media/new"===a?"active":"",style:"/subscriber/media/new"===a?N.activeItem:N.item,children:(0,r.jsx)(o(),{href:"/subscriber/media/new",children:"Add New Media"})},"/subscriber/media/new")]},"6"),(0,r.jsx)(n.default.Item,{icon:(0,r.jsx)(f.Z,{}),className:a==="/subscriber/".concat(null==j?void 0:null===(e=j.user)||void 0===e?void 0:e._id)?"active":"",style:a==="/subscriber/".concat(null==j?void 0:null===(t=j.user)||void 0===t?void 0:t._id)?N.activeItem:N.item,children:(0,r.jsx)(o(),{href:"/subscriber/".concat(null==j?void 0:null===(i=j.user)||void 0===i?void 0:i._id),children:"Profile"})},"/subscriber/".concat(null==j?void 0:null===(l=j.user)||void 0===l?void 0:l._id))]})})},g=i(11163),y=i(6154),j=i(49923);let{Content:w}=l.default;function _(e){let{children:t}=e,[i,n]=(0,s.useContext)(p.V),[a,o]=(0,s.useState)(!0),[d,c]=(0,s.useState)(!0),u=(0,g.useRouter)();(0,s.useEffect)(()=>{(null==i?void 0:i.token)&&f()},[null==i?void 0:i.token]);let f=async()=>{try{let{data:e}=await y.Z.get("/current-subscriber");o(!1)}catch(e){console.log(e),u.push("/")}};return a?(0,r.jsx)(j.Z,{}):(0,r.jsxs)(l.default,{children:[(0,r.jsx)(x,{isOpen:d,toggleNav:()=>{c(!d)}}),(0,r.jsx)(l.default,{style:{marginLeft:d?90:80,transition:"margin 0.5s"},children:(0,r.jsx)(w,{style:{padding:"10px"},children:t})})]})}},50721:function(e,t,i){"use strict";var r=i(85893),s=i(67294),l=i(28465),n=i(11187),a=i(91633),o=i(84996),d=i(35297),c=i(42074),u=i(92018),f=i(83555),b=i(94212),p=i(6154),m=i(86501);let{Dragger:h}=l.default;t.Z=e=>{var t;let{page:i="admin"}=e,[l,v]=(0,s.useContext)(c.V),[x,g]=(0,s.useContext)(b.Y),[y,j]=(0,s.useState)(!1);(0,s.useEffect)(()=>{let e=async()=>{try{let{data:e}=await p.Z.get("/media");g(t=>({...t,images:e}))}catch(e){console.log(e)}};e()},[]);let w={name:"file",multiple:!0,action:"".concat("https://ideaweave-backend.onrender.com/api","/upload-image-file"),headers:{Authorization:"Bearer ".concat(l.token)},onChange(e){"uploading"!==e.file.status&&console.log(e.file,e.fileList),"done"===e.file.status?(n.default.success("".concat(e.file.name," file uploaded successfully")),g({images:[...x.images,e.file.response],selected:e.file.response,showMediaModal:!1})):"error"===e.file.status&&n.default.error("".concat(e.file.name," file upload failed."))},onDrop(e){console.log("Dropped files",e.dataTransfer.files)}},_=async e=>{try{let{data:t}=await p.Z.delete("/media/".concat(e));t.ok&&(g({...x,images:x.images.filter(t=>t._id!==e),selected:null}),m.Am.success("Image deleted successfully"))}catch(e){console.log(e)}};return(0,r.jsxs)("div",{style:{width:"75%",margin:"0 auto",marginTop:40},children:[(0,r.jsxs)(h,{...w,accept:"image/*",children:[(0,r.jsx)("p",{className:"ant-upload-drag-icon",children:(0,r.jsx)(f.Z,{})}),(0,r.jsx)("p",{className:"ant-upload-text",children:"Click or drag file to this area to upload"})]}),(0,r.jsx)("div",{style:{textAlign:"center",marginTop:20,display:"flex",flexWrap:"wrap",justifyContent:"center"},children:null==x?void 0:null===(t=x.images)||void 0===t?void 0:t.filter(e=>{var t,r;return"admin"===i||(null==e?void 0:null===(t=e.postedBy)||void 0===t?void 0:t._id)===(null==l?void 0:null===(r=l.user)||void 0===r?void 0:r._id)}).map(e=>{var t,s;return(0,r.jsx)(o.Z,{children:(0,r.jsxs)("div",{style:{margin:"10px",padding:"10px",border:"1px solid #ddd",borderRadius:"8px",boxShadow:"0 4px 8px rgba(0, 0, 0, 0.1)",position:"relative"},children:[(0,r.jsx)(a.Z,{onClick:()=>g({...x,selected:e}),preview:y,src:e.url,style:{height:"100px",width:"100px",objectFit:"cover",cursor:"pointer",borderRadius:"8px"}}),(0,r.jsx)("br",{}),"author"===i&&(null==e?void 0:null===(t=e.postedBy)||void 0===t?void 0:t._id)==(null==l?void 0:null===(s=l.user)||void 0===s?void 0:s._id)?(0,r.jsx)(d.Z,{title:"Are you sure to delete this image?",onConfirm:()=>_(e._id),okText:"Yes",cancelText:"No",placement:"bottomRight",children:(0,r.jsx)(u.default,{style:{position:"absolute",bottom:"5px",right:"5px",color:"#f5222d",cursor:"pointer"}})}):"admin"===i?(0,r.jsx)(d.Z,{title:"Are you sure to delete this image?",onConfirm:()=>_(e._id),okText:"Yes",cancelText:"No",placement:"bottomRight",children:(0,r.jsx)(u.default,{style:{position:"absolute",bottom:"5px",right:"5px",color:"#f5222d",cursor:"pointer"}})}):""]})},e._id)})})]})}},29717:function(e,t,i){"use strict";i.r(t);var r=i(85893),s=i(55673),l=i(5789),n=i(84184),a=i(50721);t.default=function(){return(0,r.jsx)(n.Z,{children:(0,r.jsx)(s.default,{style:{paddingLeft:80,marginTop:40,paddingRight:50},children:(0,r.jsx)(l.default,{span:24,children:(0,r.jsx)(a.Z,{page:"subscriber"})})})})}}},function(e){e.O(0,[5584,5400,9009,6298,4806,8465,8065,3482,9774,2888,179],function(){return e(e.s=32425)}),_N_E=e.O()}]);