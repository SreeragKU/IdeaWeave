"use strict";(()=>{var e={};e.id=6515,e.ids=[6515,2888,660],e.modules={7905:(e,t,r)=>{r.a(e,async(e,o)=>{try{r.r(t),r.d(t,{config:()=>m,default:()=>b,getServerSideProps:()=>g,getStaticPaths:()=>h,getStaticProps:()=>x,reportWebVitals:()=>y,routeModule:()=>C,unstable_getServerProps:()=>j,unstable_getServerSideProps:()=>k,unstable_getStaticParams:()=>S,unstable_getStaticPaths:()=>v,unstable_getStaticProps:()=>f});var n=r(7093),l=r(5244),s=r(1323),i=r(7481),a=r.n(i),d=r(7648),c=r(3406),u=e([d,c]);[d,c]=u.then?(await u)():u;let p=n.PagesRouteModule,b=(0,s.l)(c,"default"),x=(0,s.l)(c,"getStaticProps"),h=(0,s.l)(c,"getStaticPaths"),g=(0,s.l)(c,"getServerSideProps"),m=(0,s.l)(c,"config"),y=(0,s.l)(c,"reportWebVitals"),f=(0,s.l)(c,"unstable_getStaticProps"),v=(0,s.l)(c,"unstable_getStaticPaths"),S=(0,s.l)(c,"unstable_getStaticParams"),j=(0,s.l)(c,"unstable_getServerProps"),k=(0,s.l)(c,"unstable_getServerSideProps"),C=new p({definition:{kind:l.x.PAGES,page:"/post/[slug]",pathname:"/post/[slug]",bundlePath:"",filename:""},components:{App:d.default,Document:a()},userland:c});o()}catch(e){o(e)}})},3637:(e,t,r)=>{r.a(e,async(e,o)=>{try{r.d(t,{Z:()=>_});var n=r(997),l=r(6689),s=r(5417),i=r.n(s),a=r(6418),d=r.n(a),c=r(3800),u=r.n(c),p=r(4010),b=r.n(p),x=r(1668),h=r.n(x),g=r(3147),m=r.n(g),y=r(1355),f=r.n(y),v=r(2820),S=r.n(v),j=r(3829),k=r.n(j),C=r(7529),q=r.n(C),w=r(4310),$=r(2017),I=r(192),P=r.n(I),A=r(2567),F=e([w,$]);[w,$]=F.then?(await F)():F;let O=r(272),{Sider:B}=i(),T=({visible:e,onCancel:t})=>{let r=[{label:"Email",value:"email",component:$.EmailShareButton,icon:$.EmailIcon},{label:"Facebook",value:"facebook",component:$.FacebookShareButton,icon:$.FacebookIcon},{label:"Twitter",value:"twitter",component:$.TwitterShareButton,icon:$.XIcon},{label:"WhatsApp",value:"whatsapp",component:$.WhatsappShareButton,icon:$.WhatsappIcon},{label:"Reddit",value:"reddit",component:$.RedditShareButton,icon:$.RedditIcon},{label:"Telegram",value:"telegram",component:$.TelegramShareButton,icon:$.TelegramIcon}],[o]=(0,l.useContext)(A.N),s=(0,w.useSpring)({background:e?"dark"===o?"linear-gradient(135deg, #1a0d5a 0%, #004080 100%)":"linear-gradient(135deg, #a6c0fe 0%, #f0f2f5 100%)":"dark"===o?"linear-gradient(135deg, #f0f2f5 0%, #f0f2f5 100%)":"linear-gradient(135deg, #a6c0fe 0%, #f0f2f5 100%)"}),i=(0,w.useSpring)({opacity:e?1:0,transform:e?"translateY(0%)":"translateY(-100%)"}),a=e=>{console.log(`Sharing on ${e}`),t()};return n.jsx(d(),{title:"Share on Social Media",visible:e,onCancel:t,footer:[n.jsx(u(),{onClick:t,children:"Cancel"},"cancel")],bodyStyle:{background:s.background,transition:"background 0.5s",display:"flex",flexDirection:"column",alignItems:"center"},maskStyle:{background:"rgba(0, 0, 0, 0.7)"},children:n.jsx(w.animated.div,{style:i,children:n.jsx("div",{style:{display:"flex",flexWrap:"wrap",justifyContent:"center"},children:r.map(({label:t,value:r,component:o,icon:l})=>(0,n.jsxs)(w.animated.div,{style:{width:"100px",height:"100px",transform:e?"scale(1)":"scale(0.5)",margin:"10px",transition:"transform 0.5s",cursor:"pointer",boxShadow:"0px 4px 8px rgba(0, 0, 0, 0.1)",borderRadius:"50%",padding:"15px",background:s.background,display:"flex",flexDirection:"column",alignItems:"center"},onClick:()=>a(r),children:[n.jsx(o,{url:!1,children:n.jsx(l,{size:45,round:!0})}),n.jsx("div",{style:{marginTop:"5px"},children:t})]},r))})})})},_=({onZoomIn:e,onZoomOut:t,onThemeChange:r,postContent:o,post:s,currentVolume:i,currentChapter:a})=>{let[d]=(0,l.useContext)(A.N),[c,u]=(0,l.useState)(!1),[p,x]=(0,l.useState)(null),[g,y]=(0,l.useState)(!1),[v,j]=(0,l.useState)(!1),[C,w]=(0,l.useState)(!1),$={bubbleContainer:{position:"fixed",top:"50px",left:"0",zIndex:"1000"},bubble:{color:"silver",padding:"10px",borderRadius:"50%",cursor:"grab",border:p?"3px solid silver":"1px solid silver",boxShadow:"0 0 5px rgba(0, 0, 0, 0.2)",width:"60px",height:"60px",display:"flex",justifyContent:"center",alignItems:"center",position:"relative",transition:"border-color 0.3s ease-in-out",borderColor:p?"gold":"silver",animation:p?"pulse 1.5s infinite":"none"},bubbleIcon:{color:p?"dark"===d?"rgba(255, 255, 255, 0.2)":"rgba(0, 0, 0, 0.2":"dark"===d?"white":"black",padding:"10px",borderRadius:"50%",cursor:"pointer",border:"1px solid silver",boxShadow:"0 0 5px rgba(0, 0, 0, 0.2)",width:"50px",height:"50px",display:"flex",justifyContent:"center",alignItems:"center",position:"absolute",transition:"border-color 0.3s ease-in-out",transform:"translate(-50%, -50%)"},bubbleIconLabel:{position:"absolute",top:"50%",left:"50%",transform:"translate(-50%, -50%)",fontSize:"14px",textAlign:"center",display:"none",padding:"5px",color:"dark"===d?"#fff":"#333",borderRadius:"50%",zIndex:1001}},[I,F]=(0,l.useState)({x:0,y:0}),B=()=>{w(!0)},_=[{label:"Default",background:"#F0F2F5"},{label:"Fire",background:"#FF6B6B"},{label:"Ocean",background:"#36A2A6"},{label:"Forest",background:"#228B22"},{label:"Sunset",background:"#FFAC5D"},{label:"Midnight",background:"#20232A"}],z=e=>{if("speechSynthesis"in window){let t=window.speechSynthesis,r=new SpeechSynthesisUtterance(e);r.addEventListener("end",()=>{j(!1),x(null)}),t.speak(r)}else alert("Text-to-Speech is not supported in your browser.")},L=()=>{v?(N(),j(!1)):(M(),j(!0))},M=()=>{if(s&&o&&void 0!==i&&void 0!==a){let e=s.volumes[i].chapters[a].content,t=O(e),r=t.replace(/<u>/g,"").replace(/<\/u>/g,"");z(r)}},N=()=>{if("speechSynthesis"in window){let e=window.speechSynthesis;e.cancel()}},R=[{icon:n.jsx(b(),{}),label:"ZoomIn"},{icon:n.jsx(h(),{}),label:"ZoomOut"},{icon:n.jsx(m(),{}),label:"Share"},{icon:v?n.jsx(q(),{}):n.jsx(k(),{}),label:"T2S"},{icon:n.jsx(f(),{}),label:"Bookmark"},{icon:n.jsx(S(),{}),label:"Translate"}],Z=(e,t,r)=>{let o=360/t*e;return{x:r*Math.cos(o*Math.PI/180)+24,y:r*Math.sin(o*Math.PI/180)+25}},E=e=>{let t=document.querySelector(`.bubbleIconLabel[data-label="${e}"]`);t&&(t.style.display="block",x(e))},H=e=>{let t=document.querySelector(`.bubbleIconLabel[data-label="${e}"]`);t&&(t.style.display="none")};return(0,n.jsxs)("div",{className:"bubble-container",style:$.bubbleContainer,children:[n.jsx(P(),{handle:".bubble",defaultPosition:I,bounds:"body",children:(0,n.jsxs)("div",{className:"bubble",style:{...$.bubble,animation:p?"none":"pulse 1.5s infinite"},onClick:()=>{c?(u(!1),x(null)):u(!0),y(!1)},children:[c&&R.map(({icon:r,label:o},l)=>{let s=Z(l,R.length,70);return(0,n.jsxs)("div",{className:"bubbleIcon",style:{...$.bubbleIcon,transform:`translate(-50%, -50%) translate(${s.x}px, ${s.y}px)`,borderColor:p===o?"gray":"silver",border:p===o?"4px solid":"1px solid silver"},onMouseEnter:()=>{E(o),x(o)},onMouseLeave:()=>{H(o),x(null)},onClick:()=>{"ZoomIn"===o?e():"ZoomOut"===o?t():"T2S"===o?L():"Share"===o&&B()},children:[r,n.jsx("div",{className:"bubbleIconLabel",style:$.bubbleIconLabel,"data-label":o,children:o})]},o)}),c&&_.map(({label:o,background:l,text:s},i)=>{let a=Z(i,_.length,130),d={...$.bubbleIconLabel,color:"#20232A"};return(0,n.jsxs)("div",{className:"bubbleIcon",style:{...$.bubbleIcon,transform:`translate(-50%, -50%) translate(${a.x}px, ${a.y}px)`,backgroundColor:l,color:s,border:p===o?"4px solid gray":"1px solid silver"},onMouseEnter:()=>{E(o),x(o)},onMouseLeave:()=>{H(o),x(null)},onClick:()=>{"ZoomIn"===o?e():"ZoomOut"===o?t():r(o)},children:[n.jsx("div",{className:"bubbleIconCircle",style:{color:s},children:o}),n.jsx("div",{className:"bubbleIconLabel",style:d,"data-label":o,children:o})]},o)})]})}),n.jsx(T,{visible:C,onCancel:()=>{w(!1)},onShare:e=>{console.log(`Sharing on ${e}`),w(!1)}}),n.jsx("style",{children:`
          @keyframes pulse {
            0%, 100% {
              border-width: 2px;
            }
            50% {
              border-width: 6px;
            }
          }
        `})]})};o()}catch(e){o(e)}})},8363:(e,t,r)=>{r.a(e,async(e,o)=>{try{r.d(t,{Z:()=>i});var n=r(6689),l=r(9648),s=e([l]);l=(s.then?(await s)():s)[0];let i=()=>{let[e,t]=(0,n.useState)([]);return(0,n.useEffect)(()=>{let e=async()=>{try{let{data:e}=await l.default.get("/posts-page/1");t(e)}catch(e){console.log(e)}};e()},[]),{latestPosts:e}};o()}catch(e){o(e)}})},3406:(e,t,r)=>{r.a(e,async(e,o)=>{try{r.r(t),r.d(t,{default:()=>U,getServerSideProps:()=>H});var n=r(997),l=r(6689),s=r(9648),i=r(1163),a=r(7050),d=r.n(a),c=r(8518),u=r.n(c),p=r(2317),b=r.n(p),x=r(8168),h=r.n(x),g=r(3800),m=r.n(g),y=r(3526),f=r.n(y),v=r(4779),S=r.n(v),j=r(5998),k=r.n(j),C=r(2278),q=r.n(C),w=r(968),$=r.n(w),I=r(5152),P=r.n(I),A=r(9318),F=r(3637),O=r(1635),B=r.n(O),T=r(2988),_=r(8363),z=r(1664),L=r.n(z),M=r(2074),N=r(6201),R=r(4195),Z=r.n(R),E=e([s,F,T,_,M,N]);[s,F,T,_,M,N]=E.then?(await E)():E,B().extend(Z());let{Title:D}=h(),{Option:V}=f(),W=P()(()=>Promise.resolve().then(r.t.bind(r,305,23)).then(e=>e.default),{loadableGenerated:{modules:["post\\[slug].js -> react-quill"]},ssr:!1}),G={Default:{fontSize:1.2,lineHeight:1.6,backgroundColor:"#F0F2F5",color:"black"},Fire:{fontSize:1.3,lineHeight:1.7,backgroundColor:"#FF6B6B",color:"black"},Ocean:{fontSize:1.3,lineHeight:1.7,backgroundColor:"#36A2A6",color:"white"},Forest:{fontSize:1.3,lineHeight:1.7,backgroundColor:"#4CAF50",color:"white"},Sunset:{fontSize:1.3,lineHeight:1.7,backgroundColor:"#FFAC5D",color:"black"},Midnight:{fontSize:1.2,lineHeight:1.6,backgroundColor:"#20232A",color:"white"}};async function H({params:e}){try{let{data:t}=await s.default.get(`${process.env.API}/post/${e.slug}`);return{props:{post:t.post,postComments:t.comments}}}catch(e){return console.error(e),{props:{post:null,postComments:[]}}}}let U=({post:e,postComments:t})=>{let r=(0,i.useRouter)(),[o,a]=(0,l.useState)(1),[c,p]=(0,l.useState)("Default"),[x,h]=(0,l.useState)(e?e.content:""),[g,y]=(0,l.useState)(0),[v,j]=(0,l.useState)(0),[C,w]=(0,l.useState)(t),[I,P]=(0,l.useState)(""),[O,z]=(0,l.useState)(!1),{latestPosts:R}=(0,_.Z)(),[Z,E]=(0,l.useContext)(M.V);(0,l.useEffect)(()=>{e&&e.volumes&&e.volumes.length>0&&(a(1),h(e.volumes[g]?.chapters[v]?.content||""))},[e,g,v]),(0,l.useEffect)(()=>{e||r.push("/_error")},[e,r]),(0,l.useEffect)(()=>{e&&e.volumes&&e.volumes.length>0&&h(e.volumes[g]?.chapters[v]?.content||"")},[o,e,g,v]),(0,l.useEffect)(()=>{e&&e.volumes&&e.volumes[g]&&e.volumes[g].chapters&&e.volumes[g].chapters[v]&&h(e.volumes[g].chapters[v].content)},[e,g,v]);let H=()=>{v<e.volumes[g].chapters.length-1?j(v+1):g<e.volumes.length-1&&(y(g+1),j(0))},D=()=>{v>0?j(v-1):g>0&&(y(g-1),j(e.volumes[g-1].chapters.length-1))},U=e=>{let[t,r]=e.split(":").map(Number);y(t-1),j(r-1)},[X,Y]=(0,l.useState)(!1);(0,l.useEffect)(()=>{Y(!0),et()},[]);let J=0===g&&0===v,K=e?.volumes&&g===e.volumes.length-1&&v===e.volumes[g]?.chapters?.length-1,Q=async()=>{try{z(!0);let{data:t}=await s.default.post(`/comment/${e._id}`,{comment:I});w([t,...C]),P(""),N.toast.success("Comment posted successfully"),z(!1)}catch(e){console.log(e),z(!1)}},ee=async()=>{try{z(!0);let{data:t}=await s.default.post(`/add-to-library/${e._id}`,{postId:e._id});t.success?N.toast.success("Added to library successfully"):N.toast.error("Failed to add to library"),z(!1)}catch(e){console.error(e),N.toast.error("An error occurred while adding to the library"),z(!1)}},et=()=>{if(Y(!0),X){let e=document.querySelector(".ql-editor");e&&(e.style.fontSize=`${G[c].fontSize*o}rem`,e.style.lineHeight=`${G[c].lineHeight*o}`,e.style.backgroundColor=G[c].backgroundColor,e.style.color=G[c].color,e.style.padding="16px")}};return(0,l.useEffect)(()=>{if(X){let e=document.querySelector(".ql-editor");e&&(e.style.fontSize=`${G[c].fontSize*o}rem`,e.style.lineHeight=`${G[c].lineHeight*o}`,e.style.backgroundColor=G[c].backgroundColor,e.style.color=G[c].color,e.style.padding="16px")}},[o,c,X]),(0,n.jsxs)(n.Fragment,{children:[n.jsx(F.Z,{onZoomIn:()=>{o<2&&a(o+.1)},onZoomOut:()=>{o>.5&&a(o-.1)},onThemeChange:e=>{p(e)},onTextToSpeech:()=>{sendPostContentToBubbleNav(e.content)},postContent:x,post:e,currentVolume:g,currentChapter:v}),n.jsx(A.default,{post:e}),(0,n.jsxs)($(),{children:[n.jsx("title",{children:e?.title||"Untitled Post"}),n.jsx("meta",{name:"description",content:e?.content?.substring(0,160)||"No description available"})]}),n.jsx(d(),{justify:"center",children:(0,n.jsxs)(u(),{xs:24,xl:16,children:[Z.token&&n.jsx(m(),{type:"primary",onClick:ee,children:"Add to Library"}),(0,n.jsxs)(b(),{children:[(0,n.jsxs)("div",{style:{marginBottom:16,textAlign:"center"},children:[n.jsx(m(),{type:"primary",onClick:D,disabled:J,children:"Previous Chapter"})," ",n.jsx(f(),{value:`${g+1}:${v+1}`,style:{width:200,marginRight:8,borderRadius:8,boxShadow:"0 0 10px rgba(0, 0, 0, 0.1)"},dropdownStyle:{borderRadius:8},onChange:U,children:e?.volumes?.map((e,t)=>n.jsx(f().OptGroup,{label:`Volume ${t+1}: ${e.volume}`,children:e.chapters.map((e,r)=>n.jsx(V,{value:`${t+1}:${r+1}`,style:{padding:10},children:`${e.name}`},`${t}-${r}`))},`volume-${t}`))}),n.jsx(m(),{type:"primary",onClick:H,disabled:K,children:"Next Chapter"})," "]}),n.jsx("div",{style:{height:"650px",overflow:"auto"},children:n.jsx(W,{value:x,readOnly:!0,theme:"bubble",modules:{toolbar:!1},style:{visibility:X?"visible":"hidden"},onLoad:et})}),(0,n.jsxs)("div",{style:{marginBottom:16,textAlign:"center",marginTop:16},children:[n.jsx(m(),{type:"primary",onClick:D,disabled:J,children:"Previous Chapter"})," ",n.jsx(f(),{value:`${g+1}:${v+1}`,style:{width:200,marginRight:8,borderRadius:8,boxShadow:"0 0 10px rgba(0, 0, 0, 0.1)"},dropdownStyle:{borderRadius:8},onChange:U,children:e?.volumes?.map((e,t)=>n.jsx(f().OptGroup,{label:`Volume ${t+1}: ${e.volume}`,children:e.chapters.map((e,r)=>n.jsx(V,{value:`${t+1}:${r+1}`,style:{padding:10},children:`${e.name}`},`${t}-${r}`))},`volume-${t}`))}),n.jsx(m(),{type:"primary",onClick:H,disabled:K,children:"Next Chapter"})," "]}),K&&(0,n.jsxs)("div",{children:[n.jsx(q(),{level:2,style:{marginTop:20},children:"Latest Books"}),R.map(e=>n.jsx(L(),{href:`/post/${e.slug}`,children:n.jsx("h4",{children:e.title})},e._id))]}),n.jsx(T.Z,{comment:I,setComment:P,handleSubmit:Q,loading:O}),n.jsx("div",{style:{marginBottom:50},id:"commentSection"}),n.jsx(S(),{itemLayout:"horizontal",dataSource:C,renderItem:e=>n.jsx(S().Item,{id:e._id,children:n.jsx(S().Item.Meta,{avatar:n.jsx(k(),{children:e?.postedBy?.name?.charAt(0)}),title:e?.postedBy?.name,description:`${e.content} - ${B()(e.createdAt).fromNow()}`})},e._id)})]})]})})]})};o()}catch(e){o(e)}})},2746:e=>{e.exports=require("@ant-design/icons/lib/icons/AppstoreOutlined")},7851:e=>{e.exports=require("@ant-design/icons/lib/icons/BookOutlined")},1355:e=>{e.exports=require("@ant-design/icons/lib/icons/FlagOutlined")},2820:e=>{e.exports=require("@ant-design/icons/lib/icons/GlobalOutlined")},7529:e=>{e.exports=require("@ant-design/icons/lib/icons/LoadingOutlined")},6076:e=>{e.exports=require("@ant-design/icons/lib/icons/LogoutOutlined")},4824:e=>{e.exports=require("@ant-design/icons/lib/icons/MailOutlined")},3221:e=>{e.exports=require("@ant-design/icons/lib/icons/SettingOutlined")},3147:e=>{e.exports=require("@ant-design/icons/lib/icons/ShareAltOutlined")},3829:e=>{e.exports=require("@ant-design/icons/lib/icons/SoundOutlined")},891:e=>{e.exports=require("@ant-design/icons/lib/icons/UserAddOutlined")},2127:e=>{e.exports=require("@ant-design/icons/lib/icons/UserOutlined")},4010:e=>{e.exports=require("@ant-design/icons/lib/icons/ZoomInOutlined")},1668:e=>{e.exports=require("@ant-design/icons/lib/icons/ZoomOutOutlined")},5998:e=>{e.exports=require("antd/lib/avatar")},3800:e=>{e.exports=require("antd/lib/button")},2317:e=>{e.exports=require("antd/lib/card")},8518:e=>{e.exports=require("antd/lib/col")},2278:e=>{e.exports=require("antd/lib/divider")},675:e=>{e.exports=require("antd/lib/input")},5417:e=>{e.exports=require("antd/lib/layout")},4779:e=>{e.exports=require("antd/lib/list")},274:e=>{e.exports=require("antd/lib/menu")},6418:e=>{e.exports=require("antd/lib/modal")},7050:e=>{e.exports=require("antd/lib/row")},3526:e=>{e.exports=require("antd/lib/select")},8168:e=>{e.exports=require("antd/lib/typography")},1635:e=>{e.exports=require("dayjs")},4195:e=>{e.exports=require("dayjs/plugin/relativeTime")},272:e=>{e.exports=require("html-to-md")},2785:e=>{e.exports=require("next/dist/compiled/next-server/pages.runtime.prod.js")},968:e=>{e.exports=require("next/head")},6689:e=>{e.exports=require("react")},6405:e=>{e.exports=require("react-dom")},192:e=>{e.exports=require("react-draggable")},305:e=>{e.exports=require("react-quill")},997:e=>{e.exports=require("react/jsx-runtime")},9648:e=>{e.exports=import("axios")},6201:e=>{e.exports=import("react-hot-toast")},2017:e=>{e.exports=import("react-share")},4310:e=>{e.exports=import("react-spring")},7147:e=>{e.exports=require("fs")},1017:e=>{e.exports=require("path")},2781:e=>{e.exports=require("stream")},9796:e=>{e.exports=require("zlib")}};var t=require("../../webpack-runtime.js");t.C(e);var r=e=>t(t.s=e),o=t.X(0,[9966,3424,7481,8450,5152,7648,2988,9318],()=>r(7905));module.exports=o})();