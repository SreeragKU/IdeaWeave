"use strict";exports.id=8316,exports.ids=[8316],exports.modules={8316:(e,t,n)=>{n.a(e,async(e,s)=>{try{n.d(t,{Z:()=>O});var o=n(997),a=n(6689),l=n(7050),c=n.n(l),i=n(8518),d=n.n(i);n(3800);var r=n(675),u=n.n(r),m=n(4779),h=n.n(m),x=n(6418),p=n.n(x),y=n(261),g=n.n(y),f=n(1664),j=n.n(f),C=n(9648),w=n(1163),L=n(2074),S=n(1635),k=n.n(S),$=n(7424),_=n.n($),v=n(2988),I=n(456),T=n.n(I),B=n(6201),b=e([C,L,v,B]);[C,L,v,B]=b.then?(await b)():b,k().extend(_());let O=function(){let[e,t]=(0,a.useContext)(L.V),[n,s]=(0,a.useState)([]),[l,i]=(0,a.useState)(!0),[r,m]=(0,a.useState)(""),[x,y]=(0,a.useState)({}),[f,S]=(0,a.useState)(""),[$,_]=(0,a.useState)(!1);(0,w.useRouter)(),(0,a.useEffect)(()=>{e?.token&&I()},[e?.token]);let I=async()=>{try{let{data:e}=await C.default.get("/user-comments");s(e),i(!1)}catch(e){console.log(e),i(!1)}},b=async e=>{confirm({title:"Are you sure you want to delete this comment?",icon:o.jsx(T(),{}),content:"This action cannot be undone.",async onOk(){try{let{data:t}=await C.default.delete(`/comment/${e._id}`);t?.ok&&(s(n.filter(t=>t._id!==e._id)),setTotal(total-1),B.toast.success("Comment deleted successfully"))}catch(e){console.log(e)}},onCancel(){}})},O=async()=>{try{i(!0);let{data:e}=await C.default.put(`/comment/${x._id}`,{content:f}),t=n.findIndex(e=>e._id===x._id);n[t].content=e.content,s(n),_(!1),i(!1),y({}),B.toast.success("Comment updated")}catch(e){console.log(e),_(!1)}},z=n?.filter(e=>e.content.toLowerCase().includes(r)||e?.postedBy?.name.toLowerCase().includes(r)||e?.postedBy?.role&&e.postedBy.role.toLowerCase().includes(r));return(0,o.jsxs)(o.Fragment,{children:[l?o.jsx(g(),{size:"large",style:{marginLeft:120,marginTop:80}}):o.jsx(c(),{style:{paddingLeft:80,marginTop:40,paddingRight:50},children:(0,o.jsxs)(d(),{xs:24,sm:24,lg:16,offset:1,children:[(0,o.jsxs)("h1",{style:{marginTop:15},children:[n?.length," Comments"]}),o.jsx(u(),{placeholder:"Search",type:"search",value:r,onChange:e=>m(e.target.value.toLowerCase())}),o.jsx(h(),{itemLayout:"horizontal",dataSource:z,renderItem:e=>o.jsx(h().Item,{actions:[o.jsx(j(),{href:`/post/${e?.postId?.slug}#${e._id}`,children:"view"}),o.jsx("a",{onClick:()=>{y(e),_(!0),S(e.content)},children:"edit"}),o.jsx("a",{onClick:()=>b(e),children:"delete"})],children:o.jsx(h().Item.Meta,{description:`On ${e?.postId?.title} | ${e?.postedBy?.name} | ${k()(e.createdAt).format("L LT")}`,title:e.content})})})]})}),o.jsx(c(),{children:o.jsx(d(),{span:24,children:o.jsx(p(),{visible:$,title:"Update comment",onOk:()=>_(!1),onCancel:()=>_(!1),footer:null,children:o.jsx(v.Z,{handleSubmit:O,comment:f,setComment:S,loading:l})})})})]})};s()}catch(e){s(e)}})}};