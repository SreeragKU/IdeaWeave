"use strict";exports.id=7150,exports.ids=[7150],exports.modules={148:(e,t,s)=>{s.a(e,async(e,r)=>{try{s.d(t,{Z:()=>x});var a=s(997);s(6689);var l=s(3338),i=s(721),n=s(6216),d=s.n(n),o=e([l,i]);[l,i]=o.then?(await o)():o;let{TabPane:c}=d(),x=()=>(0,a.jsxs)(d(),{children:[a.jsx(c,{tab:"Upload File",children:a.jsx(l.Z,{})},"1"),a.jsx(c,{tab:"Media Library",children:a.jsx(i.Z,{})},"2")]});r()}catch(e){r(e)}})},7150:(e,t,s)=>{s.a(e,async(e,r)=>{try{s.d(t,{Z:()=>P});var a=s(997),l=s(6689),i=s(7050),n=s.n(i),d=s(8518),o=s.n(d),c=s(3800),x=s.n(c),u=s(675),h=s.n(u),m=s(3526),p=s.n(m),g=s(5998),j=s.n(g),y=s(6216),v=s.n(y),b=s(9648),S=s(6201),f=s(1163),A=s(2074),w=s(4212),B=s(148),z=e([b,S,A,B]);[b,S,A,B]=z.then?(await z)():z;let{TabPane:C}=v(),P=({page:e="admin"})=>{let[t,s]=(0,l.useContext)(A.V),[r,i]=(0,l.useContext)(w.Y),[d,c]=(0,l.useState)(""),[u,m]=(0,l.useState)(""),[g,y]=(0,l.useState)(""),[z,P]=(0,l.useState)(""),[F,O]=(0,l.useState)(""),[Z,_]=(0,l.useState)(""),[U,k]=(0,l.useState)(!1),[I,$]=(0,l.useState)({}),[N,R]=(0,l.useState)(!1),[q,W]=(0,l.useState)(""),[E,J]=(0,l.useState)(""),[L,T]=(0,l.useState)(""),[Y,M]=(0,l.useState)(""),[V,D]=(0,l.useState)(!1),G=(0,f.useRouter)();(0,l.useEffect)(()=>{let e=async()=>{try{let{data:e}=await b.default.get(`/user/${G?.query?.id}`);m(e.name),y(e.email),P(e.website),_(e.role),c(e._id),$(e.image)}catch(e){console.log(e)}};t?.token&&e()},[t,G?.query?.id]);let H=e=>""===e.trim()?(W("Name is required"),!1):(W(""),!0),K=e=>e&&!e.startsWith("http")?(M("Website URL should start with 'http'"),!1):(M(""),!0),Q=e=>{D(!0);let t=e.match(/^(?=.*\d)(?=.*[!@#$%^&*])(?=.*[a-z])(?=.*[A-Z]).{8,}$/);return R(t),T(""),t},X=async()=>{try{k(!0);let{data:a}=await b.default.put(`/update-user-by-${e}`,{id:d,name:u,email:g,website:z,password:F,role:Z,image:r?.selected?._id?r.selected._id:I?._id?I._id:void 0});if(a?.error)a.error.includes("E11000 duplicate key error")&&a.error.includes("name")?S.toast.error("User name already taken. Please choose a different name."):S.toast.error(a.error),k(!1);else{if(t?.user?._id===a._id){s({...t,user:a});let e=JSON.parse(localStorage.getItem("auth"));e.user=a,localStorage.setItem("auth",JSON.stringify(e))}S.toast.success("Profile updated successfully"),k(!1)}}catch(e){console.log(e),S.toast.error("Profile update failed. Try again."),k(!1)}};return a.jsx(n(),{style:{paddingTop:"50px"},children:a.jsx(o(),{span:12,offset:6,children:(0,a.jsxs)(v(),{tabBarStyle:{marginBottom:0},children:[(0,a.jsxs)(C,{tab:"User Info",children:[a.jsx("div",{style:{marginBottom:20}}),a.jsx("h4",{style:{marginBottom:"-10px"},children:"Update User Profile"}),a.jsx("div",{style:{marginBottom:30}}),a.jsx("div",{style:{marginBottom:20,textAlign:"center"},children:r.selected?(0,a.jsxs)(a.Fragment,{children:[a.jsx("div",{style:{marginBottom:15}}),a.jsx(j(),{src:r.selected.url,size:100})]}):I?(0,a.jsxs)(a.Fragment,{children:[a.jsx("div",{style:{marginBottom:15}}),a.jsx(j(),{src:I.url,size:100})]}):""}),a.jsx(h(),{style:{margin:"20px 0px 10px 0px"},size:"large",placeholder:"Full name",value:u,id:"username",onChange:e=>{m(e.target.value),H(e.target.value)}}),q&&a.jsx("div",{style:{color:"red"},children:q}),a.jsx(h(),{style:{margin:"10px 0px 10px 0px"},size:"large",value:g,readOnly:!0,disabled:!0}),E&&a.jsx("div",{style:{color:"red"},children:E}),a.jsx(h(),{style:{margin:"10px 0px 10px 0px"},size:"large",placeholder:"Website (optional)",value:z,onChange:e=>{P(e.target.value),K(e.target.value)}}),Y&&a.jsx("div",{style:{color:"red"},children:Y}),a.jsx(h().Password,{style:{margin:"10px 0px 10px 0px"},size:"large",placeholder:"Password",id:"password",value:F,onChange:e=>{O(e.target.value),Q(e.target.value)}}),L&&a.jsx("div",{style:{color:"red"},children:L}),V&&(0,a.jsxs)("div",{className:"password-strength",children:[(0,a.jsxs)("p",{children:[F.length>=8?"✔":"✘"," At least 8 characters"]}),(0,a.jsxs)("p",{children:[/[A-Z]/.test(F)?"✔":"✘"," At least one uppercase character"]}),(0,a.jsxs)("p",{children:[/[a-z]/.test(F)?"✔":"✘"," At least one lowercase character"]}),(0,a.jsxs)("p",{children:[/[0-9]/.test(F)?"✔":"✘"," At least one number"]}),(0,a.jsxs)("p",{children:[/[!@#$%^&*]/.test(F)?"✔":"✘"," At least one special character"]})]}),"admin"===e&&a.jsx(p(),{value:Z,style:{margin:"10px 0px 10px 0px",width:"100%"},onChange:e=>_(e),children:(0,a.jsxs)(a.Fragment,{children:[a.jsx(p().Option,{value:"Subscriber",disabled:"Admin"===Z,children:"Subscriber"}),a.jsx(p().Option,{value:"Author",disabled:"Admin"===Z,children:"Author"}),a.jsx(p().Option,{value:"Admin",children:"Admin"}),a.jsx(p().Option,{value:"Reviewer",disabled:"Admin"===Z,children:"Reviewer"})]})}),a.jsx(x(),{onClick:X,type:"default",style:{margin:"10px 0px 10px 0px"},loading:U,block:!0,id:"submit-btn",children:"Submit"})]},"1"),(0,a.jsxs)(C,{tab:"Profile Image",children:[a.jsx("div",{style:{marginBottom:20}}),a.jsx("h4",{style:{marginBottom:"-10px"},children:"Your Current Profile Image:"}),a.jsx("div",{style:{marginBottom:30}}),a.jsx("div",{style:{marginBottom:20,textAlign:"center"},children:r.selected?(0,a.jsxs)(a.Fragment,{children:[a.jsx("div",{style:{marginBottom:15}}),a.jsx(j(),{src:r.selected.url,size:100})]}):I?(0,a.jsxs)(a.Fragment,{children:[a.jsx("div",{style:{marginBottom:15}}),a.jsx(j(),{src:I.url,size:100})]}):""}),a.jsx(B.Z,{})]},"2")]})})})};r()}catch(e){r(e)}})}};