"use strict";exports.id=721,exports.ids=[721],exports.modules={721:(e,t,i)=>{i.a(e,async(e,s)=>{try{i.d(t,{Z:()=>T});var o=i(997),a=i(6689),l=i(9538),r=i.n(l),d=i(7369),n=i.n(d),c=i(8070),p=i.n(c),u=i(561),x=i.n(u),m=i(3984),f=i.n(m),g=i(2074),h=i(2332),y=i.n(h),j=i(5901),b=i.n(j),w=i(4212),v=i(9648),C=i(6201),_=e([g,v,C]);[g,v,C]=_.then?(await _)():_;let{Dragger:k}=r(),T=({page:e="admin"})=>{let[t,i]=(0,a.useContext)(g.V),[s,l]=(0,a.useContext)(w.Y),[r,d]=(0,a.useState)(!1);(0,a.useEffect)(()=>{let e=async()=>{try{let{data:e}=await v.default.get("/media");l(t=>({...t,images:e}))}catch(e){console.log(e)}};e()},[]);let c={name:"file",multiple:!0,action:"https://ideaweave-backend.onrender.com/api/upload-image-file",headers:{Authorization:`Bearer ${t.token}`},onChange(e){"uploading"!==e.file.status&&console.log(e.file,e.fileList),"done"===e.file.status?(n().success(`${e.file.name} file uploaded successfully`),l({images:[...s.images,e.file.response],selected:e.file.response,showMediaModal:!1})):"error"===e.file.status&&n().error(`${e.file.name} file upload failed.`)},onDrop(e){console.log("Dropped files",e.dataTransfer.files)}},u=async e=>{try{let{data:t}=await v.default.delete(`/media/${e}`);t.ok&&(l({...s,images:s.images.filter(t=>t._id!==e),selected:null}),C.toast.success("Image deleted successfully"))}catch(e){console.log(e)}};return(0,o.jsxs)("div",{style:{width:"75%",margin:"0 auto",marginTop:40},children:[(0,o.jsxs)(k,{...c,accept:"image/*",children:[o.jsx("p",{className:"ant-upload-drag-icon",children:o.jsx(b(),{})}),o.jsx("p",{className:"ant-upload-text",children:"Click or drag file to this area to upload"})]}),o.jsx("div",{style:{textAlign:"center",marginTop:20,display:"flex",flexWrap:"wrap",justifyContent:"center"},children:s?.images?.filter(i=>"admin"===e||i?.postedBy?._id===t?.user?._id).map(i=>o.jsx(x(),{children:o.jsxs("div",{style:{margin:"10px",padding:"10px",border:"1px solid #ddd",borderRadius:"8px",boxShadow:"0 4px 8px rgba(0, 0, 0, 0.1)",position:"relative"},children:[o.jsx(p(),{onClick:()=>l({...s,selected:i}),preview:r,src:i.url,style:{height:"100px",width:"100px",objectFit:"cover",cursor:"pointer",borderRadius:"8px"}}),o.jsx("br",{}),"author"===e&&i?.postedBy?._id==t?.user?._id?o.jsx(f(),{title:"Are you sure to delete this image?",onConfirm:()=>u(i._id),okText:"Yes",cancelText:"No",placement:"bottomRight",children:o.jsx(y(),{style:{position:"absolute",bottom:"5px",right:"5px",color:"#f5222d",cursor:"pointer"}})}):"admin"===e?o.jsx(f(),{title:"Are you sure to delete this image?",onConfirm:()=>u(i._id),okText:"Yes",cancelText:"No",placement:"bottomRight",children:o.jsx(y(),{style:{position:"absolute",bottom:"5px",right:"5px",color:"#f5222d",cursor:"pointer"}})}):""]})},i._id))})]})};s()}catch(e){s(e)}})}};