(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[7102],{72910:function(e,t,a){(window.__NEXT_P=window.__NEXT_P||[]).push(["/admin/users/new",function(){return a(25227)}])},49923:function(e,t,a){"use strict";var i=a(85893),s=a(67294),n=a(11163),l=a(4851);t.Z=e=>{let{path:t="/"}=e,[a,r]=(0,s.useState)(3),d=(0,n.useRouter)();return(0,s.useEffect)(()=>{let e=setInterval(()=>{r(a-1)},1e3);return 0===a&&(clearInterval(e),d.push(t)),()=>clearInterval(e)},[a]),(0,i.jsx)("div",{style:{display:"flex",justifyContent:"center",alignItems:"center",height:"100vh"},children:(0,i.jsx)(l.default,{style:{display:"flex",justifyContent:"center",alignItems:"center",height:"100vh",fontSize:"50px",color:"red"}})})}},22631:function(e,t,a){"use strict";a.d(t,{Z:function(){return k}});var i=a(85893),s=a(67294),n=a(16373),l=a(12386),r=a(41664),d=a.n(r),c=a(9470),o=a(26401),u=a(5099),m=a(35741),h=a(65772),x=a(46403),f=a(63521),p=a(27478),v=a(42074),j=a(42567);let{SubMenu:g}=l.default,{Sider:y}=n.default;var w=()=>{var e,t,a,n;let[r,w]=(0,s.useState)(""),[b,I]=(0,s.useState)(""),[S,N]=(0,s.useContext)(v.V),[k]=(0,s.useContext)(j.N),[A,C]=(0,s.useState)(!1),Z=()=>{C(window.innerWidth<1e3)};(0,s.useEffect)(()=>{w(window.location.pathname);let e=window.location.pathname.split("/");return e.length>=3?I("/".concat(e[1])):I(""),window.addEventListener("resize",Z),()=>{window.removeEventListener("resize",Z)}},[]),(0,s.useEffect)(()=>{Z()},[]);let z={sider:{width:A?50:100,transition:"width 0.3s cubic-bezier(0.645, 0.045, 0.355, 1)",overflow:"hidden",paddingTop:"64px",height:"100vh"},fixedSider:{position:"fixed",top:0,left:0,bottom:0,zIndex:1e3,background:"dark"===k?"#001529":"#fff",boxShadow:"0 2px 8px rgba(0, 0, 0, 0.1)"},menu:{background:"dark"===k?"#001529":"#fff",height:"calc(100% - 64px)",overflowY:"auto",overflowX:"hidden",scrollbarWidth:"thin",WebkitOverflowScrolling:"touch"},item:{background:"transparent",transition:"background 0.3s"},activeItem:{background:"dark"===k?"#007F7F":"#00BFFF",color:"#fff"},activeSubMenu:{background:"dark"===k?"#007F7F":"#00BFFF",color:"#fff",transition:"width 0.3s cubic-bezier(0.645, 0.045, 0.355, 1) 0.1s"}};return(0,i.jsx)(y,{collapsible:!0,collapsed:A,onCollapse:()=>C(!A),style:{...z.sider,...z.fixedSider},children:(0,i.jsxs)(l.default,{defaultOpenKeys:["2","6","10"],mode:"inline",inlineCollapsed:A,selectedKeys:[r],style:z.menu,theme:k,children:[(0,i.jsx)(l.default.Item,{icon:(0,i.jsx)(m.Z,{}),className:"/admin"===r?"active":"",style:"/admin"===r?z.activeItem:z.item,children:(0,i.jsx)(d(),{href:"/admin",children:"Dashboard"})},"/admin"),(0,i.jsx)(l.default.Item,{icon:(0,i.jsx)(p.Z,{}),className:"/admin/library"===r?"active":"",style:"/admin/library"===r?z.activeItem:z.item,children:(0,i.jsx)(d(),{href:"/admin/library",children:"Library"})},"/admin/library"),(0,i.jsxs)(g,{icon:(0,i.jsx)(c.Z,{}),title:"Posts",className:"/admin"===b?"active":"",style:"/admin"===b?z.activeSubMenu:{},children:[(0,i.jsx)(l.default.Item,{className:"/admin/posts"===r?"active":"",style:"/admin/posts"===r?z.activeItem:z.item,children:(0,i.jsx)(d(),{href:"/admin/posts",children:"All Books"})},"/admin/posts"),(0,i.jsx)(l.default.Item,{className:"/admin/posts/drafts"===r?"active":"",style:"/admin/posts/drafts"===r?z.activeItem:z.item,children:(0,i.jsx)(d(),{href:"/admin/posts/drafts",children:"All Drafts"})},"/admin/drafts"),(0,i.jsx)(l.default.Item,{className:"/admin/posts/new"===r?"active":"",style:"/admin/posts/new"===r?z.activeItem:z.item,children:(0,i.jsx)(d(),{href:"/admin/posts/new",children:"Add New Book"})},"/admin/posts/new"),(0,i.jsx)(l.default.Item,{className:"/admin/categories"===r?"active":"",style:"/admin/categories"===r?z.activeItem:z.item,children:(0,i.jsx)(d(),{href:"/admin/categories",children:"Categories"})},"/admin/categories")]},"2"),(0,i.jsxs)(g,{icon:(0,i.jsx)(o.Z,{}),title:"Media",children:[(0,i.jsx)(l.default.Item,{className:"/admin/media/library"===r?"active":"",style:"/admin/media/library"===r?z.activeItem:z.item,children:(0,i.jsx)(d(),{href:"/admin/media/library",children:"Media Library"})},"/admin/media/library"),(0,i.jsx)(l.default.Item,{className:"/admin/media/new"===r?"active":"",style:"/admin/media/new"===r?z.activeItem:z.item,children:(0,i.jsx)(d(),{href:"/admin/media/new",children:"Add New Media"})},"/admin/media/new")]},"6"),(0,i.jsx)(l.default.Item,{icon:(0,i.jsx)(f.Z,{}),className:"/admin/comments"===r?"active":"",style:"/admin/comments"===r?z.activeItem:z.item,children:(0,i.jsx)(d(),{href:"/admin/comments",children:"Comments"})},"/admin/comments"),(0,i.jsxs)(g,{icon:(0,i.jsx)(u.Z,{}),title:"Users",children:[(0,i.jsx)(l.default.Item,{className:"/admin/users"===r?"active":"",style:"/admin/users"===r?z.activeItem:z.item,children:(0,i.jsx)(d(),{href:"/admin/users",children:"All Users"})},"/admin/users"),(0,i.jsx)(l.default.Item,{className:"/admin/users/new"===r?"active":"",style:"/admin/users/new"===r?z.activeItem:z.item,children:(0,i.jsx)(d(),{href:"/admin/users/new",children:"Add New"})},"/admin/users/new")]},"10"),(0,i.jsx)(l.default.Item,{icon:(0,i.jsx)(x.Z,{}),className:r==="/admin/".concat(null==S?void 0:null===(e=S.user)||void 0===e?void 0:e._id)?"active":"",style:r==="/admin/".concat(null==S?void 0:null===(t=S.user)||void 0===t?void 0:t._id)?z.activeItem:z.item,children:(0,i.jsx)(d(),{href:"/admin/".concat(null==S?void 0:null===(a=S.user)||void 0===a?void 0:a._id),id:"profile",children:"Profile"})},"/admin/".concat(null==S?void 0:null===(n=S.user)||void 0===n?void 0:n._id)),(0,i.jsx)(l.default.Item,{icon:(0,i.jsx)(h.Z,{}),className:"/admin/customize"===r?"active":"",style:"/admin/customize"===r?z.activeItem:z.item,children:(0,i.jsx)(d(),{href:"/admin/customize",children:"Customize"})},"/admin/customize")]})})},b=a(11163),I=a(6154),S=a(49923);let{Content:N}=n.default;function k(e){let{children:t}=e,[a,l]=(0,s.useContext)(v.V),[r,d]=(0,s.useState)(!0),[c,o]=(0,s.useState)(!0),u=(0,b.useRouter)();(0,s.useEffect)(()=>{(null==a?void 0:a.token)&&m()},[null==a?void 0:a.token]);let m=async()=>{try{let{data:e}=await I.Z.get("/current-admin");d(!1)}catch(e){console.log(e),u.push("/")}};return r?(0,i.jsx)(S.Z,{}):(0,i.jsxs)(n.default,{children:[(0,i.jsx)(w,{isOpen:c,toggleNav:()=>{o(!c)}}),(0,i.jsx)(n.default,{style:{marginLeft:c?90:80,transition:"margin 0.5s"},children:(0,i.jsx)(N,{style:{padding:"10px"},children:t})})]})}},25227:function(e,t,a){"use strict";a.r(t);var i=a(85893),s=a(67294),n=a(22631),l=a(55673),r=a(5789),d=a(65400),c=a(51024),o=a(31059),u=a(64749),m=a(6154),h=a(86501);a(11163),a(77725);let x=()=>{let e="0123456789",t="!@#$%^&*",a="abcdefghijklmnopqrstuvwxyz",i="ABCDEFGHIJKLMNOPQRSTUVWXYZ",s=e+t+a+i,n="";n+=e[Math.floor(Math.random()*e.length)]+t[Math.floor(Math.random()*t.length)]+a[Math.floor(Math.random()*a.length)]+i[Math.floor(Math.random()*i.length)];for(let e=4;e<8;e++)n+=s[Math.floor(Math.random()*s.length)];return n.split("").sort(()=>Math.random()-.5).join("")};t.default=()=>{let[e,t]=(0,s.useState)(""),[a,f]=(0,s.useState)(""),[p,v]=(0,s.useState)(""),[j,g]=(0,s.useState)(x()),[y,w]=(0,s.useState)(""),[b,I]=(0,s.useState)(!1),[S,N]=(0,s.useState)(!1),[k,A]=(0,s.useState)(!1),[C,Z]=(0,s.useState)(""),[z,M]=(0,s.useState)(""),[_,E]=(0,s.useState)(""),[F,O]=(0,s.useState)(""),L=e=>""===e.trim()?(Z("Name is required"),!1):(Z(""),!0),P=e=>e.match(/^[A-Z0-9._%+-]+@[A-Z0-9.-]+\.[A-Z]{2,4}$/i)?(M(""),!0):(M("Invalid email address"),!1),W=e=>e&&!e.startsWith("http")?(O("Website URL should start with 'http'"),!1):(O(""),!0),B=e=>{let t=e.match(/^(?=.*\d)(?=.*[!@#$%^&*])(?=.*[a-z])(?=.*[A-Z]).{8,}$/);return A(t),E(""),t},R=async t=>{t.preventDefault();try{N(!0);let{data:t}=await m.Z.post("/create-user",{email:a,name:e,website:p,password:j,role:y,checked:b});t.error?h.Am.error(t.error):h.Am.success("User created successfully"),N(!1)}catch(e){console.log(e),h.Am.error("Signup failed. Try again."),N(!1)}};return(0,i.jsx)(n.Z,{children:(0,i.jsx)(l.default,{style:{paddingLeft:50,paddingTop:"50px"},children:(0,i.jsxs)(r.default,{span:12,offset:6,children:[(0,i.jsx)("h4",{style:{marginBottom:"-10px"},children:"Add new user"}),(0,i.jsx)(c.default,{style:{margin:"20px 0px 10px 0px"},size:"large",placeholder:"Full name",value:e,onChange:e=>{t(e.target.value),L(e.target.value)}}),C&&(0,i.jsx)("div",{style:{color:"red"},children:C}),(0,i.jsx)(c.default,{style:{margin:"10px 0px 10px 0px"},size:"large",placeholder:"Email",value:a,onChange:e=>{f(e.target.value),P(e.target.value)}}),z&&(0,i.jsx)("div",{style:{color:"red"},children:z}),(0,i.jsx)(c.default,{style:{margin:"10px 0px 10px 0px"},size:"large",placeholder:"Website (optional)",value:p,onChange:e=>{v(e.target.value),W(e.target.value)}}),F&&(0,i.jsx)("div",{style:{color:"red"},children:F}),(0,i.jsxs)("div",{style:{display:"flex"},children:[(0,i.jsx)(d.default,{onClick:()=>g(x()),type:"default",size:"large",style:{margin:"10px 0px 10px 0px"},children:"Generate password"}),(0,i.jsx)(c.default.Password,{style:{margin:"10px 0px 10px 0px"},size:"large",placeholder:"Password",value:j,onChange:e=>{g(e.target.value),B(e.target.value)}})]}),_&&(0,i.jsx)("div",{style:{color:"red"},children:_}),(0,i.jsxs)("div",{className:"password-strength",children:[(0,i.jsxs)("p",{children:[j.length>=8?"✔":"✘"," At least 8 characters"]}),(0,i.jsxs)("p",{children:[/[A-Z]/.test(j)?"✔":"✘"," At least one uppercase character"]}),(0,i.jsxs)("p",{children:[/[a-z]/.test(j)?"✔":"✘"," At least one lowercase character"]}),(0,i.jsxs)("p",{children:[/[0-9]/.test(j)?"✔":"✘"," At least one number"]}),(0,i.jsxs)("p",{children:[/[!@#$%^&*]/.test(j)?"✔":"✘"," At least one special character"]})]}),(0,i.jsxs)(u.default,{defaultValue:"Subscriber",style:{margin:"10px 0px 10px 0px",width:"100%"},onChange:e=>w(e),children:[(0,i.jsx)(u.default.Option,{value:"Subscriber",children:"Subscriber"}),(0,i.jsx)(u.default.Option,{value:"Author",children:"Author"}),(0,i.jsx)(u.default.Option,{value:"Admin",children:"Admin"}),(0,i.jsx)(u.default.Option,{value:"Reviewer",children:"Reviewer"})]}),(0,i.jsx)(o.Z,{checked:b,onChange:e=>I(e.target.checked),children:"Send the new user an email about their account."}),(0,i.jsx)(d.default,{onClick:R,type:"default",style:{margin:"10px 0px 10px 0px"},loading:S,block:!0,children:"Submit"})]})})})}}},function(e){e.O(0,[3714,5584,5400,4104,1024,4749,2157,7784,9774,2888,179],function(){return e(e.s=72910)}),_N_E=e.O()}]);