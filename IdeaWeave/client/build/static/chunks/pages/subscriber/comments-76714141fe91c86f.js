(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[6191],{25330:function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M912 190h-69.9c-9.8 0-19.1 4.5-25.1 12.2L404.7 724.5 207 474a32 32 0 00-25.1-12.2H112c-6.7 0-10.4 7.7-6.3 12.9l273.9 347c12.8 16.2 37.4 16.2 50.3 0l488.4-618.9c4.1-5.1.4-12.8-6.3-12.8z"}}]},name:"check",theme:"outlined"}},71961:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var i,r=(i=n(79686))&&i.__esModule?i:{default:i};t.default=r,e.exports=r},79686:function(e,t,n){"use strict";var i=n(64836),r=n(18698);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var l=i(n(42122)),s=function(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!==r(e)&&"function"!=typeof e)return{default:e};var n=c(t);if(n&&n.has(e))return n.get(e);var i={},l=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var s in e)if("default"!==s&&Object.prototype.hasOwnProperty.call(e,s)){var a=l?Object.getOwnPropertyDescriptor(e,s):null;a&&(a.get||a.set)?Object.defineProperty(i,s,a):i[s]=e[s]}return i.default=e,n&&n.set(e,i),i}(n(67294)),a=i(n(25330)),o=i(n(92074));function c(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,n=new WeakMap;return(c=function(e){return e?n:t})(e)}var d=function(e,t){return s.createElement(o.default,(0,l.default)((0,l.default)({},e),{},{ref:t,icon:a.default}))};d.displayName="CheckOutlined";var u=s.forwardRef(d);t.default=u},11413:function(e,t,n){(window.__NEXT_P=window.__NEXT_P||[]).push(["/subscriber/comments",function(){return n(62874)}])},49923:function(e,t,n){"use strict";var i=n(85893),r=n(67294),l=n(11163),s=n(4851);t.Z=e=>{let{path:t="/"}=e,[n,a]=(0,r.useState)(3),o=(0,l.useRouter)();return(0,r.useEffect)(()=>{let e=setInterval(()=>{a(n-1)},1e3);return 0===n&&(clearInterval(e),o.push(t)),()=>clearInterval(e)},[n]),(0,i.jsx)("div",{style:{display:"flex",justifyContent:"center",alignItems:"center",height:"100vh"},children:(0,i.jsx)(s.default,{style:{display:"flex",justifyContent:"center",alignItems:"center",height:"100vh",fontSize:"50px",color:"red"}})})}},52988:function(e,t,n){"use strict";var i=n(85893),r=n(67294),l=n(42074),s=n(51024),a=n(65400);let{TextArea:o}=s.default;t.Z=e=>{let{comment:t,setComment:n,handleSubmit:s,loading:c}=e,[d,u]=(0,r.useContext)(l.V);return(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)("br",{}),(0,i.jsx)(o,{value:t,onChange:e=>n(e.target.value),placeholder:"Write a comment...(Max: 2000)",rows:"4",disabled:(null==d?void 0:d.user)===null&&(null==d?void 0:d.token)==="",maxLength:2e3}),(0,i.jsx)(a.default,{style:{marginTop:5},loading:c,type:"primary",disabled:""===t||(null==d?void 0:d.user)===null&&(null==d?void 0:d.token)==="",onClick:s,children:"Post"})]})}},48316:function(e,t,n){"use strict";var i=n(85893),r=n(67294),l=n(55673),s=n(5789),a=n(51024),o=n(56590),c=n(56697),d=n(89552),u=n(41664),f=n.n(u),m=n(6154),h=n(11163),v=n(42074),b=n(27484),x=n.n(b),p=n(56176),y=n.n(p),j=n(52988),g=n(3855),w=n(86501);x().extend(y()),t.Z=function(){let[e,t]=(0,r.useContext)(v.V),[n,u]=(0,r.useState)([]),[b,p]=(0,r.useState)(!0),[y,_]=(0,r.useState)(""),[k,C]=(0,r.useState)({}),[I,O]=(0,r.useState)(""),[S,Z]=(0,r.useState)(!1);(0,h.useRouter)(),(0,r.useEffect)(()=>{(null==e?void 0:e.token)&&L()},[null==e?void 0:e.token]);let L=async()=>{try{let{data:e}=await m.Z.get("/user-comments");u(e),p(!1)}catch(e){console.log(e),p(!1)}},N=async e=>{confirm({title:"Are you sure you want to delete this comment?",icon:(0,i.jsx)(g.default,{}),content:"This action cannot be undone.",async onOk(){try{let{data:t}=await m.Z.delete("/comment/".concat(e._id));(null==t?void 0:t.ok)&&(u(n.filter(t=>t._id!==e._id)),setTotal(total-1),w.Am.success("Comment deleted successfully"))}catch(e){console.log(e)}},onCancel(){}})},M=async()=>{try{p(!0);let{data:e}=await m.Z.put("/comment/".concat(k._id),{content:I}),t=n.findIndex(e=>e._id===k._id);n[t].content=e.content,u(n),Z(!1),p(!1),C({}),w.Am.success("Comment updated")}catch(e){console.log(e),Z(!1)}},E=null==n?void 0:n.filter(e=>{var t,n;return e.content.toLowerCase().includes(y)||(null==e?void 0:null===(t=e.postedBy)||void 0===t?void 0:t.name.toLowerCase().includes(y))||(null==e?void 0:null===(n=e.postedBy)||void 0===n?void 0:n.role)&&e.postedBy.role.toLowerCase().includes(y)});return(0,i.jsxs)(i.Fragment,{children:[b?(0,i.jsx)(d.default,{size:"large",style:{marginLeft:120,marginTop:80}}):(0,i.jsx)(l.default,{style:{paddingLeft:80,marginTop:40,paddingRight:50},children:(0,i.jsxs)(s.default,{xs:24,sm:24,lg:16,offset:1,children:[(0,i.jsxs)("h1",{style:{marginTop:15},children:[null==n?void 0:n.length," Comments"]}),(0,i.jsx)(a.default,{placeholder:"Search",type:"search",value:y,onChange:e=>_(e.target.value.toLowerCase())}),(0,i.jsx)(o.default,{itemLayout:"horizontal",dataSource:E,renderItem:e=>{var t,n,r;return(0,i.jsx)(o.default.Item,{actions:[(0,i.jsx)(f(),{href:"/post/".concat(null==e?void 0:null===(t=e.postId)||void 0===t?void 0:t.slug,"#").concat(e._id),children:"view"}),(0,i.jsx)("a",{onClick:()=>{C(e),Z(!0),O(e.content)},children:"edit"}),(0,i.jsx)("a",{onClick:()=>N(e),children:"delete"})],children:(0,i.jsx)(o.default.Item.Meta,{description:"On ".concat(null==e?void 0:null===(n=e.postId)||void 0===n?void 0:n.title," | ").concat(null==e?void 0:null===(r=e.postedBy)||void 0===r?void 0:r.name," | ").concat(x()(e.createdAt).format("L LT")),title:e.content})})}})]})}),(0,i.jsx)(l.default,{children:(0,i.jsx)(s.default,{span:24,children:(0,i.jsx)(c.default,{visible:S,title:"Update comment",onOk:()=>Z(!1),onCancel:()=>Z(!1),footer:null,children:(0,i.jsx)(j.Z,{handleSubmit:M,comment:I,setComment:O,loading:b})})})})]})}},84184:function(e,t,n){"use strict";n.d(t,{Z:function(){return _}});var i=n(85893),r=n(67294),l=n(16373),s=n(12386),a=n(41664),o=n.n(a),c=n(26401),d=n(27478),u=n(35741),f=n(46403),m=n(63521),h=n(42074),v=n(42567);let{SubMenu:b}=s.default,{Sider:x}=l.default;var p=()=>{var e,t,n,l;let[a,p]=(0,r.useState)(""),[y,j]=(0,r.useState)(""),[g,w]=(0,r.useContext)(h.V),[_]=(0,r.useContext)(v.N),[k,C]=(0,r.useState)(!1),I=()=>{C(window.innerWidth<1e3)};(0,r.useEffect)(()=>{p(window.location.pathname);let e=window.location.pathname.split("/");return e.length>=3?j("/".concat(e[1])):j(""),window.addEventListener("resize",I),()=>{window.removeEventListener("resize",I)}},[]),(0,r.useEffect)(()=>{I()},[]);let O={sider:{width:k?50:100,height:"100vh",transition:"width 0.3s cubic-bezier(0.645, 0.045, 0.355, 1)",overflow:"hidden",paddingTop:"64px"},fixedSider:{position:"fixed",top:0,left:0,height:"100vh",zIndex:1e3,background:"dark"===_?"#001529":"#fff",boxShadow:"0 2px 8px rgba(0, 0, 0, 0.1)"},menu:{background:"dark"===_?"#001529":"#fff",height:"calc(100% - 64px)",overflowY:"auto",overflowX:"hidden",scrollbarWidth:"thin",WebkitOverflowScrolling:"touch"},item:{background:"transparent",transition:"background 0.3s"},activeItem:{background:"dark"===_?"#007F7F":"#00BFFF",color:"#fff"}};return(0,i.jsx)(x,{collapsible:!0,collapsed:k,onCollapse:()=>C(!k),style:{...O.sider,...O.fixedSider},children:(0,i.jsxs)(s.default,{defaultOpenKeys:["2","6","10"],mode:"inline",inlineCollapsed:k,selectedKeys:[a],style:O.menu,theme:_,children:[(0,i.jsx)(s.default.Item,{icon:(0,i.jsx)(u.Z,{}),className:"/subscriber"===a?"active":"",style:"/subscriber"===a?O.activeItem:O.item,children:(0,i.jsx)(o(),{href:"/subscriber",children:"Dashboard"})},"/subscriber"),(0,i.jsx)(s.default.Item,{icon:(0,i.jsx)(d.Z,{}),className:"/subscriber/library"===a?"active":"",style:"/subscriber/library"===a?O.activeItem:O.item,children:(0,i.jsx)(o(),{href:"/subscriber/library",children:"Library"})},"/subscriber/library"),(0,i.jsx)(s.default.Item,{icon:(0,i.jsx)(m.Z,{}),className:"/subscriber/comments"===a?"active":"",style:"/subscriber/comments"===a?O.activeItem:O.item,children:(0,i.jsx)(o(),{href:"/subscriber/comments",children:"Comments"})},"/subscriber/comments"),(0,i.jsxs)(b,{icon:(0,i.jsx)(c.Z,{}),title:"Media",children:[(0,i.jsx)(s.default.Item,{className:"/subscriber/media/library"===a?"active":"",style:"/subscriber/media/library"===a?O.activeItem:O.item,children:(0,i.jsx)(o(),{href:"/subscriber/media/library",children:"Media Library"})},"/subscriber/media/library"),(0,i.jsx)(s.default.Item,{className:"/subscriber/media/new"===a?"active":"",style:"/subscriber/media/new"===a?O.activeItem:O.item,children:(0,i.jsx)(o(),{href:"/subscriber/media/new",children:"Add New Media"})},"/subscriber/media/new")]},"6"),(0,i.jsx)(s.default.Item,{icon:(0,i.jsx)(f.Z,{}),className:a==="/subscriber/".concat(null==g?void 0:null===(e=g.user)||void 0===e?void 0:e._id)?"active":"",style:a==="/subscriber/".concat(null==g?void 0:null===(t=g.user)||void 0===t?void 0:t._id)?O.activeItem:O.item,children:(0,i.jsx)(o(),{href:"/subscriber/".concat(null==g?void 0:null===(n=g.user)||void 0===n?void 0:n._id),children:"Profile"})},"/subscriber/".concat(null==g?void 0:null===(l=g.user)||void 0===l?void 0:l._id))]})})},y=n(11163),j=n(6154),g=n(49923);let{Content:w}=l.default;function _(e){let{children:t}=e,[n,s]=(0,r.useContext)(h.V),[a,o]=(0,r.useState)(!0),[c,d]=(0,r.useState)(!0),u=(0,y.useRouter)();(0,r.useEffect)(()=>{(null==n?void 0:n.token)&&f()},[null==n?void 0:n.token]);let f=async()=>{try{let{data:e}=await j.Z.get("/current-subscriber");o(!1)}catch(e){console.log(e),u.push("/")}};return a?(0,i.jsx)(g.Z,{}):(0,i.jsxs)(l.default,{children:[(0,i.jsx)(p,{isOpen:c,toggleNav:()=>{d(!c)}}),(0,i.jsx)(l.default,{style:{marginLeft:c?90:80,transition:"margin 0.5s"},children:(0,i.jsx)(w,{style:{padding:"10px"},children:t})})]})}},62874:function(e,t,n){"use strict";n.r(t),n.d(t,{default:function(){return c}});var i=n(85893),r=n(16373),l=n(84184),s=n(48316);let{Content:a,Sider:o}=r.default;function c(e){let{children:t}=e;return(0,i.jsx)(l.Z,{children:(0,i.jsx)(a,{children:(0,i.jsx)(s.Z,{})})})}}},function(e){e.O(0,[5584,5400,4104,1024,4749,6298,6697,2476,533,9774,2888,179],function(){return e(e.s=11413)}),_N_E=e.O()}]);