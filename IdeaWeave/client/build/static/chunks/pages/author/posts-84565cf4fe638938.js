(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[9568],{60475:function(e,t,s){(window.__NEXT_P=window.__NEXT_P||[]).push(["/author/posts",function(){return s(1660)}])},49923:function(e,t,s){"use strict";var a=s(85893),l=s(67294),r=s(11163),i=s(4851);t.Z=e=>{let{path:t="/"}=e,[s,n]=(0,l.useState)(3),o=(0,r.useRouter)();return(0,l.useEffect)(()=>{let e=setInterval(()=>{n(s-1)},1e3);return 0===s&&(clearInterval(e),o.push(t)),()=>clearInterval(e)},[s]),(0,a.jsx)("div",{style:{display:"flex",justifyContent:"center",alignItems:"center",height:"100vh"},children:(0,a.jsx)(i.default,{style:{display:"flex",justifyContent:"center",alignItems:"center",height:"100vh",fontSize:"50px",color:"red"}})})}},91161:function(e,t,s){"use strict";s.d(t,{Z:function(){return k}});var a=s(85893),l=s(67294),r=s(16373),i=s(12386),n=s(41664),o=s.n(n),d=s(9470),c=s(26401),u=s(35741),h=s(27478),f=s(46403),x=s(63521),m=s(42074),v=s(42567);let{SubMenu:j}=i.default,{Sider:p}=r.default;var g=()=>{var e,t,s,r;let[n,g]=(0,l.useState)(""),[y,w]=(0,l.useState)(""),[b,I]=(0,l.useContext)(m.V),[k]=(0,l.useContext)(v.N),[N,_]=(0,l.useState)(!1),C=()=>{_(window.innerWidth<1e3)};(0,l.useEffect)(()=>{g(window.location.pathname);let e=window.location.pathname.split("/");return e.length>=3?w("/".concat(e[1])):w(""),window.addEventListener("resize",C),()=>{window.removeEventListener("resize",C)}},[]),(0,l.useEffect)(()=>{C()},[]);let S={sider:{width:N?50:100,height:"100vh",transition:"width 0.3s cubic-bezier(0.645, 0.045, 0.355, 1)",overflow:"hidden",paddingTop:"64px"},fixedSider:{position:"fixed",top:0,left:0,height:"100vh",zIndex:1e3,background:"dark"===k?"#001529":"#fff",boxShadow:"0 2px 8px rgba(0, 0, 0, 0.1)"},menu:{background:"dark"===k?"#001529":"#fff",height:"calc(100% - 64px)",overflowY:"auto",overflowX:"hidden",scrollbarWidth:"thin",WebkitOverflowScrolling:"touch"},item:{background:"transparent",transition:"background 0.3s"},activeItem:{background:"dark"===k?"#007F7F":"#00BFFF",color:"#fff"},activeSubMenu:{background:"dark"===k?"#007F7F":"#00BFFF",color:"#fff",transition:"width 0.3s cubic-bezier(0.645, 0.045, 0.355, 1) 0.1s"}};return(0,a.jsx)(p,{collapsible:!0,collapsed:N,onCollapse:()=>_(!N),style:{...S.sider,...S.fixedSider},children:(0,a.jsxs)(i.default,{defaultOpenKeys:["2","6","10"],mode:"inline",inlineCollapsed:N,selectedKeys:[n],style:S.menu,theme:k,children:[(0,a.jsx)(i.default.Item,{icon:(0,a.jsx)(u.Z,{}),className:"/author"===n?"active":"",style:"/author"===n?S.activeItem:S.item,children:(0,a.jsx)(o(),{href:"/author",children:"Dashboard"})},"/author"),(0,a.jsx)(i.default.Item,{icon:(0,a.jsx)(h.Z,{}),className:"/author/library"===n?"active":"",style:"/author/library"===n?S.activeItem:S.item,children:(0,a.jsx)(o(),{href:"/author/library",children:"Library"})},"/author/library"),(0,a.jsxs)(j,{icon:(0,a.jsx)(d.Z,{}),title:"Posts",className:"/author"===y?"active":"",style:"/author"===y?S.activeSubMenu:{},children:[(0,a.jsx)(i.default.Item,{className:"/author/posts"===n?"active":"",style:"/author/posts"===n?S.activeItem:S.item,children:(0,a.jsx)(o(),{href:"/author/posts",children:"All Books"})},"/author/posts"),(0,a.jsx)(i.default.Item,{className:"/author/posts/drafts"===n?"active":"",style:"/author/posts/drafts"===n?S.activeItem:S.item,children:(0,a.jsx)(o(),{href:"/author/posts/drafts",children:"All Drafts"})},"/author/drafts"),(0,a.jsx)(i.default.Item,{className:"/author/posts/new"===n?"active":"",style:"/author/posts/new"===n?S.activeItem:S.item,children:(0,a.jsx)(o(),{href:"/author/posts/new",children:"Add New Book"})},"/author/posts/new")]},"2"),(0,a.jsxs)(j,{icon:(0,a.jsx)(c.Z,{}),title:"Media",children:[(0,a.jsx)(i.default.Item,{className:"/author/media/library"===n?"active":"",style:"/author/media/library"===n?S.activeItem:S.item,children:(0,a.jsx)(o(),{href:"/author/media/library",children:"Media Library"})},"/author/media/library"),(0,a.jsx)(i.default.Item,{className:"/author/media/new"===n?"active":"",style:"/author/media/new"===n?S.activeItem:S.item,children:(0,a.jsx)(o(),{href:"/author/media/new",children:"Add New Media"})},"/author/media/new")]},"6"),(0,a.jsx)(i.default.Item,{icon:(0,a.jsx)(x.Z,{}),className:"/author/comments"===n?"active":"",style:"/author/comments"===n?S.activeItem:S.item,children:(0,a.jsx)(o(),{href:"/author/comments",children:"Comments"})},"/author/comments"),(0,a.jsx)(i.default.Item,{icon:(0,a.jsx)(f.Z,{}),className:n==="/author/".concat(null==b?void 0:null===(e=b.user)||void 0===e?void 0:e._id)?"active":"",style:n==="/author/".concat(null==b?void 0:null===(t=b.user)||void 0===t?void 0:t._id)?S.activeItem:S.item,children:(0,a.jsx)(o(),{href:"/author/".concat(null==b?void 0:null===(s=b.user)||void 0===s?void 0:s._id),children:"Profile"})},"/author/".concat(null==b?void 0:null===(r=b.user)||void 0===r?void 0:r._id))]})})},y=s(11163),w=s(6154),b=s(49923);let{Content:I}=r.default;function k(e){let{children:t}=e,[s,i]=(0,l.useContext)(m.V),[n,o]=(0,l.useState)(!0),[d,c]=(0,l.useState)(!0),u=(0,y.useRouter)();(0,l.useEffect)(()=>{(null==s?void 0:s.token)&&h()},[null==s?void 0:s.token]);let h=async()=>{try{let{data:e}=await w.Z.get("/current-author");o(!1)}catch(e){console.log(e),u.push("/")}};return n?(0,a.jsx)(b.Z,{}):(0,a.jsxs)(r.default,{children:[(0,a.jsx)(g,{isOpen:d,toggleNav:()=>{c(!d)}}),(0,a.jsx)(r.default,{style:{marginLeft:d?90:80,transition:"margin 0.5s"},children:(0,a.jsx)(I,{style:{padding:"10px"},children:t})})]})}},79011:function(e,t,s){"use strict";var a=s(85893),l=s(67294),r=s(88758),i=s.n(r),n=s(27484),o=s.n(n),d=s(70302),c=s(5789),u=s(74048),h=s(35297),f=s(51024),x=s(64749),m=s(55673),v=s(58452),j=s(19702),p=s(53740);let{Text:g,Title:y}=p.default,{Search:w}=f.default,{Option:b}=x.default;t.Z=e=>{let{posts:t,handleDelete:s,handleEdit:r}=e,[n,f]=(0,l.useState)(""),[p,I]=(0,l.useState)("asc"),k=e=>e.replace(/<\/?(u|b|i)>/g,""),N=e=>{f(e)},_=t.filter(e=>e.title.toLowerCase().includes(n.toLowerCase())).sort((e,t)=>"asc"===p?o()(e.createdAt).valueOf()-o()(t.createdAt).valueOf():o()(t.createdAt).valueOf()-o()(e.createdAt).valueOf()),C=e=>{if(e.length>0){let t=e[0];return(0,a.jsx)("div",{children:(0,a.jsxs)(g,{ellipsis:!0,children:[i()(k(t.content)).substring(0,100),"..."]})},t.name)}return null},S=e=>e.map(e=>(0,a.jsxs)("div",{children:[(0,a.jsx)(g,{strong:!0,children:e.volume}),(0,a.jsxs)(g,{type:"secondary",children:["\xa0(",e.chapters.length," chapters)"]}),C(e.chapters)]},e.volume));return(0,a.jsxs)(a.Fragment,{children:[(0,a.jsxs)(m.default,{justify:"space-between",style:{marginBottom:16,paddingRight:16},children:[(0,a.jsx)(c.default,{xs:24,sm:24,md:12,lg:12,children:(0,a.jsx)(w,{placeholder:"Search by title",onSearch:N,onChange:e=>N(e.target.value),value:n,style:{width:"100%"}})}),(0,a.jsx)(c.default,{xs:24,sm:24,md:12,lg:12,children:(0,a.jsxs)(x.default,{defaultValue:"asc",onChange:e=>{I(e)},style:{width:"100%"},children:[(0,a.jsx)(b,{value:"asc",children:"Ascending"}),(0,a.jsx)(b,{value:"desc",children:"Descending"})]})})]}),(0,a.jsx)(m.default,{gutter:[16,16],children:_.map(e=>{var t;return(0,a.jsx)(c.default,{xs:24,sm:12,md:8,lg:6,children:(0,a.jsxs)(d.default,{hoverable:!0,actions:[(0,a.jsxs)(u.default,{children:[(0,a.jsx)(v.default,{onClick:()=>r(e)}),(0,a.jsx)(h.Z,{title:"Are you sure you want to delete?",onConfirm:()=>s(e),okText:"Yes",cancelText:"No",children:(0,a.jsx)(j.default,{})})]})],children:[(0,a.jsx)("img",{alt:e.title,src:null===(t=e.coverImage)||void 0===t?void 0:t.url,style:{width:"100%",height:"150px"}}),(0,a.jsx)(y,{level:5,children:e.title}),(0,a.jsxs)("div",{children:[(0,a.jsx)(g,{strong:!0,children:"Total Volumes:"}),(0,a.jsx)(g,{children:e.volumes.length}),(0,a.jsx)("br",{}),(0,a.jsx)(g,{strong:!0,children:"Total Chapters:"}),(0,a.jsx)(g,{children:e.volumes.reduce((e,t)=>e+t.chapters.length,0)})]}),S(e.volumes),(0,a.jsxs)("div",{style:{marginTop:"16px"},children:[(0,a.jsx)("u",{children:"Posted On"}),":"," ",(0,a.jsx)("i",{children:o()(e.createdAt).format("D MMMM, YYYY h:mm A")}),(0,a.jsx)("br",{}),(0,a.jsx)("u",{children:"Posted By"}),": ",e.postedBy.name]})]})},e._id)})})]})}},1660:function(e,t,s){"use strict";s.r(t);var a=s(85893),l=s(67294),r=s(55673),i=s(5789),n=s(65400),o=s(53740),d=s(89552),c=s(32615),u=s(6154),h=s(88775),f=s(11163),x=s(91161),m=s(41664),v=s.n(m),j=s(79011),p=s(42074);let{Title:g,Text:y}=o.default;t.default=function(){let[e,t]=(0,l.useContext)(h.W),[s,o]=(0,l.useContext)(p.V),{posts:m}=e,y=(0,f.useRouter)(),[w,b]=(0,l.useState)(!0);(0,l.useEffect)(()=>{s.token&&I()},[null==s?void 0:s.token]);let I=async()=>{try{b(!0);let{data:e}=await u.Z.get("/post-by-author");t(t=>({...t,posts:e}))}catch(e){console.log(e)}finally{b(!1)}},k=async e=>y.push("/author/posts/".concat(e.slug)),N=async e=>{try{let{data:s}=await u.Z.delete("/post/".concat(e._id));s.ok&&t(t=>({...t,posts:t.posts.filter(t=>t._id!==e._id)}))}catch(e){console.log(e)}};return(0,a.jsx)(x.Z,{children:(0,a.jsxs)(r.default,{gutter:[16,16],style:{marginLeft:85,padding:"16px"},children:[(0,a.jsx)(i.default,{span:24,style:{marginTop:"30px",marginBottom:"16px"},children:(0,a.jsx)(n.default,{type:"primary",children:(0,a.jsxs)(v(),{href:"/author/posts/new",children:[(0,a.jsx)(c.default,{})," Add New"]})})}),(0,a.jsx)(i.default,{span:24,children:(0,a.jsx)(g,{level:3,style:{marginTop:w?"15px":"0"},children:w?(0,a.jsx)(d.default,{}):"".concat(null==m?void 0:m.length," Posts")})}),(0,a.jsx)(i.default,{span:24,children:(0,a.jsx)(j.Z,{posts:m,handleDelete:N,handleEdit:k})})]})})}}},function(e){e.O(0,[5584,5400,4104,1024,1350,9009,4749,3740,3391,3943,5977,9774,2888,179],function(){return e(e.s=60475)}),_N_E=e.O()}]);