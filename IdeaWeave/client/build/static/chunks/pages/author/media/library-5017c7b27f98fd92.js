(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[3911],{13864:function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M942.2 486.2C847.4 286.5 704.1 186 512 186c-192.2 0-335.4 100.5-430.2 300.3a60.3 60.3 0 000 51.5C176.6 737.5 319.9 838 512 838c192.2 0 335.4-100.5 430.2-300.3 7.7-16.2 7.7-35 0-51.5zM512 766c-161.3 0-279.4-81.8-362.7-254C232.6 339.8 350.7 258 512 258c161.3 0 279.4 81.8 362.7 254C791.5 684.2 673.4 766 512 766zm-4-430c-97.2 0-176 78.8-176 176s78.8 176 176 176 176-78.8 176-176-78.8-176-176-176zm0 288c-61.9 0-112-50.1-112-112s50.1-112 112-112 112 50.1 112 112-50.1 112-112 112z"}}]},name:"eye",theme:"outlined"}},14059:function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M878.3 392.1L631.9 145.7c-6.5-6.5-15-9.7-23.5-9.7s-17 3.2-23.5 9.7L423.8 306.9c-12.2-1.4-24.5-2-36.8-2-73.2 0-146.4 24.1-206.5 72.3a33.23 33.23 0 00-2.7 49.4l181.7 181.7-215.4 215.2a15.8 15.8 0 00-4.6 9.8l-3.4 37.2c-.9 9.4 6.6 17.4 15.9 17.4.5 0 1 0 1.5-.1l37.2-3.4c3.7-.3 7.2-2 9.8-4.6l215.4-215.4 181.7 181.7c6.5 6.5 15 9.7 23.5 9.7 9.7 0 19.3-4.2 25.9-12.4 56.3-70.3 79.7-158.3 70.2-243.4l161.1-161.1c12.9-12.8 12.9-33.8 0-46.8zM666.2 549.3l-24.5 24.5 3.8 34.4a259.92 259.92 0 01-30.4 153.9L262 408.8c12.9-7.1 26.3-13.1 40.3-17.9 27.2-9.4 55.7-14.1 84.7-14.1 9.6 0 19.3.5 28.9 1.6l34.4 3.8 24.5-24.5L608.5 224 800 415.5 666.2 549.3z"}}]},name:"pushpin",theme:"outlined"}},29918:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r,i=(r=a(42419))&&r.__esModule?r:{default:r};t.default=i,e.exports=i},42419:function(e,t,a){"use strict";var r=a(64836),i=a(18698);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var n=r(a(42122)),l=function(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!==i(e)&&"function"!=typeof e)return{default:e};var a=d(t);if(a&&a.has(e))return a.get(e);var r={},n=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var l in e)if("default"!==l&&Object.prototype.hasOwnProperty.call(e,l)){var o=n?Object.getOwnPropertyDescriptor(e,l):null;o&&(o.get||o.set)?Object.defineProperty(r,l,o):r[l]=e[l]}return r.default=e,a&&a.set(e,r),r}(a(67294)),o=r(a(13864)),s=r(a(92074));function d(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,a=new WeakMap;return(d=function(e){return e?a:t})(e)}var u=function(e,t){return l.createElement(s.default,(0,n.default)((0,n.default)({},e),{},{ref:t,icon:o.default}))};u.displayName="EyeOutlined";var c=l.forwardRef(u);t.default=c},9470:function(e,t,a){"use strict";var r=a(64836),i=a(18698);t.Z=void 0;var n=r(a(42122)),l=function(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!==i(e)&&"function"!=typeof e)return{default:e};var a=d(t);if(a&&a.has(e))return a.get(e);var r={},n=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var l in e)if("default"!==l&&Object.prototype.hasOwnProperty.call(e,l)){var o=n?Object.getOwnPropertyDescriptor(e,l):null;o&&(o.get||o.set)?Object.defineProperty(r,l,o):r[l]=e[l]}return r.default=e,a&&a.set(e,r),r}(a(67294)),o=r(a(14059)),s=r(a(92074));function d(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,a=new WeakMap;return(d=function(e){return e?a:t})(e)}var u=function(e,t){return l.createElement(s.default,(0,n.default)((0,n.default)({},e),{},{ref:t,icon:o.default}))};u.displayName="PushpinOutlined";var c=l.forwardRef(u);t.Z=c},28390:function(e,t,a){(window.__NEXT_P=window.__NEXT_P||[]).push(["/author/media/library",function(){return a(44376)}])},49923:function(e,t,a){"use strict";var r=a(85893),i=a(67294),n=a(11163),l=a(4851);t.Z=e=>{let{path:t="/"}=e,[a,o]=(0,i.useState)(3),s=(0,n.useRouter)();return(0,i.useEffect)(()=>{let e=setInterval(()=>{o(a-1)},1e3);return 0===a&&(clearInterval(e),s.push(t)),()=>clearInterval(e)},[a]),(0,r.jsx)("div",{style:{display:"flex",justifyContent:"center",alignItems:"center",height:"100vh"},children:(0,r.jsx)(l.default,{style:{display:"flex",justifyContent:"center",alignItems:"center",height:"100vh",fontSize:"50px",color:"red"}})})}},91161:function(e,t,a){"use strict";a.d(t,{Z:function(){return k}});var r=a(85893),i=a(67294),n=a(16373),l=a(12386),o=a(41664),s=a.n(o),d=a(9470),u=a(26401),c=a(35741),f=a(27478),h=a(46403),p=a(63521),m=a(42074),v=a(42567);let{SubMenu:x}=l.default,{Sider:y}=n.default;var g=()=>{var e,t,a,n;let[o,g]=(0,i.useState)(""),[j,b]=(0,i.useState)(""),[w,_]=(0,i.useContext)(m.V),[k]=(0,i.useContext)(v.N),[O,I]=(0,i.useState)(!1),N=()=>{I(window.innerWidth<1e3)};(0,i.useEffect)(()=>{g(window.location.pathname);let e=window.location.pathname.split("/");return e.length>=3?b("/".concat(e[1])):b(""),window.addEventListener("resize",N),()=>{window.removeEventListener("resize",N)}},[]),(0,i.useEffect)(()=>{N()},[]);let M={sider:{width:O?50:100,height:"100vh",transition:"width 0.3s cubic-bezier(0.645, 0.045, 0.355, 1)",overflow:"hidden",paddingTop:"64px"},fixedSider:{position:"fixed",top:0,left:0,height:"100vh",zIndex:1e3,background:"dark"===k?"#001529":"#fff",boxShadow:"0 2px 8px rgba(0, 0, 0, 0.1)"},menu:{background:"dark"===k?"#001529":"#fff",height:"calc(100% - 64px)",overflowY:"auto",overflowX:"hidden",scrollbarWidth:"thin",WebkitOverflowScrolling:"touch"},item:{background:"transparent",transition:"background 0.3s"},activeItem:{background:"dark"===k?"#007F7F":"#00BFFF",color:"#fff"},activeSubMenu:{background:"dark"===k?"#007F7F":"#00BFFF",color:"#fff",transition:"width 0.3s cubic-bezier(0.645, 0.045, 0.355, 1) 0.1s"}};return(0,r.jsx)(y,{collapsible:!0,collapsed:O,onCollapse:()=>I(!O),style:{...M.sider,...M.fixedSider},children:(0,r.jsxs)(l.default,{defaultOpenKeys:["2","6","10"],mode:"inline",inlineCollapsed:O,selectedKeys:[o],style:M.menu,theme:k,children:[(0,r.jsx)(l.default.Item,{icon:(0,r.jsx)(c.Z,{}),className:"/author"===o?"active":"",style:"/author"===o?M.activeItem:M.item,children:(0,r.jsx)(s(),{href:"/author",children:"Dashboard"})},"/author"),(0,r.jsx)(l.default.Item,{icon:(0,r.jsx)(f.Z,{}),className:"/author/library"===o?"active":"",style:"/author/library"===o?M.activeItem:M.item,children:(0,r.jsx)(s(),{href:"/author/library",children:"Library"})},"/author/library"),(0,r.jsxs)(x,{icon:(0,r.jsx)(d.Z,{}),title:"Posts",className:"/author"===j?"active":"",style:"/author"===j?M.activeSubMenu:{},children:[(0,r.jsx)(l.default.Item,{className:"/author/posts"===o?"active":"",style:"/author/posts"===o?M.activeItem:M.item,children:(0,r.jsx)(s(),{href:"/author/posts",children:"All Books"})},"/author/posts"),(0,r.jsx)(l.default.Item,{className:"/author/posts/drafts"===o?"active":"",style:"/author/posts/drafts"===o?M.activeItem:M.item,children:(0,r.jsx)(s(),{href:"/author/posts/drafts",children:"All Drafts"})},"/author/drafts"),(0,r.jsx)(l.default.Item,{className:"/author/posts/new"===o?"active":"",style:"/author/posts/new"===o?M.activeItem:M.item,children:(0,r.jsx)(s(),{href:"/author/posts/new",children:"Add New Book"})},"/author/posts/new")]},"2"),(0,r.jsxs)(x,{icon:(0,r.jsx)(u.Z,{}),title:"Media",children:[(0,r.jsx)(l.default.Item,{className:"/author/media/library"===o?"active":"",style:"/author/media/library"===o?M.activeItem:M.item,children:(0,r.jsx)(s(),{href:"/author/media/library",children:"Media Library"})},"/author/media/library"),(0,r.jsx)(l.default.Item,{className:"/author/media/new"===o?"active":"",style:"/author/media/new"===o?M.activeItem:M.item,children:(0,r.jsx)(s(),{href:"/author/media/new",children:"Add New Media"})},"/author/media/new")]},"6"),(0,r.jsx)(l.default.Item,{icon:(0,r.jsx)(p.Z,{}),className:"/author/comments"===o?"active":"",style:"/author/comments"===o?M.activeItem:M.item,children:(0,r.jsx)(s(),{href:"/author/comments",children:"Comments"})},"/author/comments"),(0,r.jsx)(l.default.Item,{icon:(0,r.jsx)(h.Z,{}),className:o==="/author/".concat(null==w?void 0:null===(e=w.user)||void 0===e?void 0:e._id)?"active":"",style:o==="/author/".concat(null==w?void 0:null===(t=w.user)||void 0===t?void 0:t._id)?M.activeItem:M.item,children:(0,r.jsx)(s(),{href:"/author/".concat(null==w?void 0:null===(a=w.user)||void 0===a?void 0:a._id),children:"Profile"})},"/author/".concat(null==w?void 0:null===(n=w.user)||void 0===n?void 0:n._id))]})})},j=a(11163),b=a(6154),w=a(49923);let{Content:_}=n.default;function k(e){let{children:t}=e,[a,l]=(0,i.useContext)(m.V),[o,s]=(0,i.useState)(!0),[d,u]=(0,i.useState)(!0),c=(0,j.useRouter)();(0,i.useEffect)(()=>{(null==a?void 0:a.token)&&f()},[null==a?void 0:a.token]);let f=async()=>{try{let{data:e}=await b.Z.get("/current-author");s(!1)}catch(e){console.log(e),c.push("/")}};return o?(0,r.jsx)(w.Z,{}):(0,r.jsxs)(n.default,{children:[(0,r.jsx)(g,{isOpen:d,toggleNav:()=>{u(!d)}}),(0,r.jsx)(n.default,{style:{marginLeft:d?90:80,transition:"margin 0.5s"},children:(0,r.jsx)(_,{style:{padding:"10px"},children:t})})]})}},50721:function(e,t,a){"use strict";var r=a(85893),i=a(67294),n=a(28465),l=a(11187),o=a(91633),s=a(84996),d=a(35297),u=a(42074),c=a(92018),f=a(83555),h=a(94212),p=a(6154),m=a(86501);let{Dragger:v}=n.default;t.Z=e=>{var t;let{page:a="admin"}=e,[n,x]=(0,i.useContext)(u.V),[y,g]=(0,i.useContext)(h.Y),[j,b]=(0,i.useState)(!1);(0,i.useEffect)(()=>{let e=async()=>{try{let{data:e}=await p.Z.get("/media");g(t=>({...t,images:e}))}catch(e){console.log(e)}};e()},[]);let w={name:"file",multiple:!0,action:"".concat("https://ideaweave-backend.onrender.com/api","/upload-image-file"),headers:{Authorization:"Bearer ".concat(n.token)},onChange(e){"uploading"!==e.file.status&&console.log(e.file,e.fileList),"done"===e.file.status?(l.default.success("".concat(e.file.name," file uploaded successfully")),g({images:[...y.images,e.file.response],selected:e.file.response,showMediaModal:!1})):"error"===e.file.status&&l.default.error("".concat(e.file.name," file upload failed."))},onDrop(e){console.log("Dropped files",e.dataTransfer.files)}},_=async e=>{try{let{data:t}=await p.Z.delete("/media/".concat(e));t.ok&&(g({...y,images:y.images.filter(t=>t._id!==e),selected:null}),m.Am.success("Image deleted successfully"))}catch(e){console.log(e)}};return(0,r.jsxs)("div",{style:{width:"75%",margin:"0 auto",marginTop:40},children:[(0,r.jsxs)(v,{...w,accept:"image/*",children:[(0,r.jsx)("p",{className:"ant-upload-drag-icon",children:(0,r.jsx)(f.Z,{})}),(0,r.jsx)("p",{className:"ant-upload-text",children:"Click or drag file to this area to upload"})]}),(0,r.jsx)("div",{style:{textAlign:"center",marginTop:20,display:"flex",flexWrap:"wrap",justifyContent:"center"},children:null==y?void 0:null===(t=y.images)||void 0===t?void 0:t.filter(e=>{var t,r;return"admin"===a||(null==e?void 0:null===(t=e.postedBy)||void 0===t?void 0:t._id)===(null==n?void 0:null===(r=n.user)||void 0===r?void 0:r._id)}).map(e=>{var t,i;return(0,r.jsx)(s.Z,{children:(0,r.jsxs)("div",{style:{margin:"10px",padding:"10px",border:"1px solid #ddd",borderRadius:"8px",boxShadow:"0 4px 8px rgba(0, 0, 0, 0.1)",position:"relative"},children:[(0,r.jsx)(o.Z,{onClick:()=>g({...y,selected:e}),preview:j,src:e.url,style:{height:"100px",width:"100px",objectFit:"cover",cursor:"pointer",borderRadius:"8px"}}),(0,r.jsx)("br",{}),"author"===a&&(null==e?void 0:null===(t=e.postedBy)||void 0===t?void 0:t._id)==(null==n?void 0:null===(i=n.user)||void 0===i?void 0:i._id)?(0,r.jsx)(d.Z,{title:"Are you sure to delete this image?",onConfirm:()=>_(e._id),okText:"Yes",cancelText:"No",placement:"bottomRight",children:(0,r.jsx)(c.default,{style:{position:"absolute",bottom:"5px",right:"5px",color:"#f5222d",cursor:"pointer"}})}):"admin"===a?(0,r.jsx)(d.Z,{title:"Are you sure to delete this image?",onConfirm:()=>_(e._id),okText:"Yes",cancelText:"No",placement:"bottomRight",children:(0,r.jsx)(c.default,{style:{position:"absolute",bottom:"5px",right:"5px",color:"#f5222d",cursor:"pointer"}})}):""]})},e._id)})})]})}},44376:function(e,t,a){"use strict";a.r(t);var r=a(85893),i=a(55673),n=a(5789),l=a(91161),o=a(50721);t.default=function(){return(0,r.jsx)(l.Z,{children:(0,r.jsx)(i.default,{style:{paddingLeft:80,marginTop:40,paddingRight:50},children:(0,r.jsx)(n.default,{span:24,children:(0,r.jsx)(o.Z,{page:"author"})})})})}}},function(e){e.O(0,[5584,5400,9009,6298,4806,8465,8065,3482,9774,2888,179],function(){return e(e.s=28390)}),_N_E=e.O()}]);