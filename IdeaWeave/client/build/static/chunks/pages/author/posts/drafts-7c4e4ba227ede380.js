(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[8918],{14667:function(e,t,s){(window.__NEXT_P=window.__NEXT_P||[]).push(["/author/posts/drafts",function(){return s(87879)}])},49923:function(e,t,s){"use strict";var l=s(85893),a=s(67294),r=s(11163),i=s(4851);t.Z=e=>{let{path:t="/"}=e,[s,n]=(0,a.useState)(3),o=(0,r.useRouter)();return(0,a.useEffect)(()=>{let e=setInterval(()=>{n(s-1)},1e3);return 0===s&&(clearInterval(e),o.push(t)),()=>clearInterval(e)},[s]),(0,l.jsx)("div",{style:{display:"flex",justifyContent:"center",alignItems:"center",height:"100vh"},children:(0,l.jsx)(i.default,{style:{display:"flex",justifyContent:"center",alignItems:"center",height:"100vh",fontSize:"50px",color:"red"}})})}},91161:function(e,t,s){"use strict";s.d(t,{Z:function(){return I}});var l=s(85893),a=s(67294),r=s(16373),i=s(12386),n=s(41664),o=s.n(n),d=s(9470),c=s(26401),u=s(35741),h=s(27478),f=s(46403),x=s(63521),m=s(42074),v=s(42567);let{SubMenu:p}=i.default,{Sider:j}=r.default;var g=()=>{var e,t,s,r;let[n,g]=(0,a.useState)(""),[y,w]=(0,a.useState)(""),[b,k]=(0,a.useContext)(m.V),[I]=(0,a.useContext)(v.N),[C,_]=(0,a.useState)(!1),S=()=>{_(window.innerWidth<1e3)};(0,a.useEffect)(()=>{g(window.location.pathname);let e=window.location.pathname.split("/");return e.length>=3?w("/".concat(e[1])):w(""),window.addEventListener("resize",S),()=>{window.removeEventListener("resize",S)}},[]),(0,a.useEffect)(()=>{S()},[]);let N={sider:{width:C?50:100,height:"100vh",transition:"width 0.3s cubic-bezier(0.645, 0.045, 0.355, 1)",overflow:"hidden",paddingTop:"64px"},fixedSider:{position:"fixed",top:0,left:0,height:"100vh",zIndex:1e3,background:"dark"===I?"#001529":"#fff",boxShadow:"0 2px 8px rgba(0, 0, 0, 0.1)"},menu:{background:"dark"===I?"#001529":"#fff",height:"calc(100% - 64px)",overflowY:"auto",overflowX:"hidden",scrollbarWidth:"thin",WebkitOverflowScrolling:"touch"},item:{background:"transparent",transition:"background 0.3s"},activeItem:{background:"dark"===I?"#007F7F":"#00BFFF",color:"#fff"},activeSubMenu:{background:"dark"===I?"#007F7F":"#00BFFF",color:"#fff",transition:"width 0.3s cubic-bezier(0.645, 0.045, 0.355, 1) 0.1s"}};return(0,l.jsx)(j,{collapsible:!0,collapsed:C,onCollapse:()=>_(!C),style:{...N.sider,...N.fixedSider},children:(0,l.jsxs)(i.default,{defaultOpenKeys:["2","6","10"],mode:"inline",inlineCollapsed:C,selectedKeys:[n],style:N.menu,theme:I,children:[(0,l.jsx)(i.default.Item,{icon:(0,l.jsx)(u.Z,{}),className:"/author"===n?"active":"",style:"/author"===n?N.activeItem:N.item,children:(0,l.jsx)(o(),{href:"/author",children:"Dashboard"})},"/author"),(0,l.jsx)(i.default.Item,{icon:(0,l.jsx)(h.Z,{}),className:"/author/library"===n?"active":"",style:"/author/library"===n?N.activeItem:N.item,children:(0,l.jsx)(o(),{href:"/author/library",children:"Library"})},"/author/library"),(0,l.jsxs)(p,{icon:(0,l.jsx)(d.Z,{}),title:"Posts",className:"/author"===y?"active":"",style:"/author"===y?N.activeSubMenu:{},children:[(0,l.jsx)(i.default.Item,{className:"/author/posts"===n?"active":"",style:"/author/posts"===n?N.activeItem:N.item,children:(0,l.jsx)(o(),{href:"/author/posts",children:"All Books"})},"/author/posts"),(0,l.jsx)(i.default.Item,{className:"/author/posts/drafts"===n?"active":"",style:"/author/posts/drafts"===n?N.activeItem:N.item,children:(0,l.jsx)(o(),{href:"/author/posts/drafts",children:"All Drafts"})},"/author/drafts"),(0,l.jsx)(i.default.Item,{className:"/author/posts/new"===n?"active":"",style:"/author/posts/new"===n?N.activeItem:N.item,children:(0,l.jsx)(o(),{href:"/author/posts/new",children:"Add New Book"})},"/author/posts/new")]},"2"),(0,l.jsxs)(p,{icon:(0,l.jsx)(c.Z,{}),title:"Media",children:[(0,l.jsx)(i.default.Item,{className:"/author/media/library"===n?"active":"",style:"/author/media/library"===n?N.activeItem:N.item,children:(0,l.jsx)(o(),{href:"/author/media/library",children:"Media Library"})},"/author/media/library"),(0,l.jsx)(i.default.Item,{className:"/author/media/new"===n?"active":"",style:"/author/media/new"===n?N.activeItem:N.item,children:(0,l.jsx)(o(),{href:"/author/media/new",children:"Add New Media"})},"/author/media/new")]},"6"),(0,l.jsx)(i.default.Item,{icon:(0,l.jsx)(x.Z,{}),className:"/author/comments"===n?"active":"",style:"/author/comments"===n?N.activeItem:N.item,children:(0,l.jsx)(o(),{href:"/author/comments",children:"Comments"})},"/author/comments"),(0,l.jsx)(i.default.Item,{icon:(0,l.jsx)(f.Z,{}),className:n==="/author/".concat(null==b?void 0:null===(e=b.user)||void 0===e?void 0:e._id)?"active":"",style:n==="/author/".concat(null==b?void 0:null===(t=b.user)||void 0===t?void 0:t._id)?N.activeItem:N.item,children:(0,l.jsx)(o(),{href:"/author/".concat(null==b?void 0:null===(s=b.user)||void 0===s?void 0:s._id),children:"Profile"})},"/author/".concat(null==b?void 0:null===(r=b.user)||void 0===r?void 0:r._id))]})})},y=s(11163),w=s(6154),b=s(49923);let{Content:k}=r.default;function I(e){let{children:t}=e,[s,i]=(0,a.useContext)(m.V),[n,o]=(0,a.useState)(!0),[d,c]=(0,a.useState)(!0),u=(0,y.useRouter)();(0,a.useEffect)(()=>{(null==s?void 0:s.token)&&h()},[null==s?void 0:s.token]);let h=async()=>{try{let{data:e}=await w.Z.get("/current-author");o(!1)}catch(e){console.log(e),u.push("/")}};return n?(0,l.jsx)(b.Z,{}):(0,l.jsxs)(r.default,{children:[(0,l.jsx)(g,{isOpen:d,toggleNav:()=>{c(!d)}}),(0,l.jsx)(r.default,{style:{marginLeft:d?90:80,transition:"margin 0.5s"},children:(0,l.jsx)(k,{style:{padding:"10px"},children:t})})]})}},65190:function(e,t,s){"use strict";var l=s(85893),a=s(67294),r=s(88758),i=s.n(r),n=s(27484),o=s.n(n),d=s(70302),c=s(5789),u=s(74048),h=s(35297),f=s(51024),x=s(64749),m=s(55673),v=s(31059),p=s(58452),j=s(19702),g=s(53740);let{Text:y,Title:w}=g.default,{Search:b}=f.default,{Option:k}=x.default;t.Z=e=>{let{posts:t,handleDelete:s,handleEdit:r,handleCardClick:n,selectedPosts:f}=e,[g,I]=(0,a.useState)(""),[C,_]=(0,a.useState)("asc"),S=e=>e.replace(/<\/?(u|b|i)>/g,""),N=e=>{I(e)},Z=t.filter(e=>e.title.toLowerCase().includes(g.toLowerCase())).sort((e,t)=>"asc"===C?o()(e.createdAt).valueOf()-o()(t.createdAt).valueOf():o()(t.createdAt).valueOf()-o()(e.createdAt).valueOf()),E=e=>{if(e.length>0){let t=e[0];return(0,l.jsx)("div",{children:(0,l.jsxs)(y,{ellipsis:!0,children:[i()(S(t.content)).substring(0,100),"..."]})},t.name)}return null},A=e=>e.map(e=>(0,l.jsxs)("div",{children:[(0,l.jsx)(y,{strong:!0,children:e.volume}),(0,l.jsxs)(y,{type:"secondary",children:["\xa0(",e.chapters.length," chapters)"]}),E(e.chapters)]},e.volume));return(0,l.jsxs)(l.Fragment,{children:[(0,l.jsxs)(m.default,{justify:"space-between",style:{marginBottom:16,paddingRight:16},children:[(0,l.jsx)(c.default,{xs:24,sm:24,md:12,lg:12,children:(0,l.jsx)(b,{placeholder:"Search by title",onSearch:N,onChange:e=>N(e.target.value),value:g,style:{width:"100%"}})}),(0,l.jsx)(c.default,{xs:24,sm:24,md:12,lg:12,children:(0,l.jsxs)(x.default,{defaultValue:"asc",onChange:e=>{_(e)},style:{width:"100%"},children:[(0,l.jsx)(k,{value:"asc",children:"Ascending"}),(0,l.jsx)(k,{value:"desc",children:"Descending"})]})})]}),(0,l.jsx)(m.default,{gutter:[16,16],children:Z.map(e=>{var t;return(0,l.jsx)(c.default,{xs:24,sm:12,md:8,lg:6,children:(0,l.jsxs)(d.default,{hoverable:!0,actions:[(0,l.jsxs)(u.default,{children:[(0,l.jsx)(v.Z,{onChange:()=>n(e._id),checked:f.includes(e._id)}),(0,l.jsx)(p.default,{onClick:()=>r(e)}),(0,l.jsx)(h.Z,{title:"Are you sure you want to delete?",onConfirm:()=>s(e),okText:"Yes",cancelText:"No",children:(0,l.jsx)(j.default,{})})]})],children:[(0,l.jsx)("img",{alt:e.title,src:null===(t=e.coverImage)||void 0===t?void 0:t.url,style:{width:"100%",height:"150px"}}),(0,l.jsx)(w,{level:5,children:e.title}),(0,l.jsxs)("div",{children:[(0,l.jsx)(y,{strong:!0,children:"Total Volumes:"}),(0,l.jsx)(y,{children:e.volumes.length}),(0,l.jsx)("br",{}),(0,l.jsx)(y,{strong:!0,children:"Total Chapters:"}),(0,l.jsx)(y,{children:e.volumes.reduce((e,t)=>e+t.chapters.length,0)})]}),A(e.volumes),(0,l.jsxs)("div",{style:{marginTop:"16px"},children:[(0,l.jsx)("u",{children:"Posted On"}),":"," ",(0,l.jsx)("i",{children:o()(e.createdAt).format("D MMMM, YYYY h:mm A")}),(0,l.jsx)("br",{}),(0,l.jsx)("u",{children:"Posted By"}),": ",e.postedBy.name]})]})},e._id)})})]})}},87879:function(e,t,s){"use strict";s.r(t);var l=s(85893),a=s(67294),r=s(55673),i=s(5789),n=s(65400),o=s(38614),d=s(53740),c=s(89552),u=s(6154),h=s(88775),f=s(11163),x=s(91161);s(41664);var m=s(65190),v=s(42074);let{useBreakpoint:p}=o.default,{Title:j,Text:g}=d.default;t.default=function(e){let{page:t="author"}=e,[s,o]=(0,a.useContext)(h.W),[d,g]=(0,a.useContext)(v.V),{posts:y}=s,w=(0,f.useRouter)();p();let[b,k]=(0,a.useState)(!0),[I,C]=(0,a.useState)([]);(0,a.useEffect)(()=>{d.token&&_()},[null==d?void 0:d.token]);let _=async()=>{try{k(!0);let{data:e}=await u.Z.get("/draft-by-author");o(t=>({...t,posts:e}))}catch(e){console.log(e)}finally{k(!1)}},S=async e=>w.push("/author/drafts/".concat(e.slug)),N=async e=>{try{let{data:t}=await u.Z.delete("/draft/".concat(e._id));t.ok&&o(t=>({...t,posts:t.posts.filter(t=>t._id!==e._id)}))}catch(e){console.log(e)}},Z=async()=>{try{let{data:e}=await u.Z.post("/publish-draft-posts",{postIds:I});e.ok&&(console.log("Selected posts published successfully",e.publishedPosts),C([]),w.push("/".concat(t,"/posts")))}catch(e){console.error("Error publishing posts",e)}};return(0,l.jsx)(x.Z,{children:(0,l.jsxs)(r.default,{gutter:[16,16],style:{paddingLeft:120,marginTop:60,paddingRight:50},children:[(0,l.jsx)(i.default,{span:24,children:(0,l.jsx)(j,{style:{marginTop:15},level:3,children:b?(0,l.jsx)(c.default,{}):"".concat(null==y?void 0:y.length," Drafts")})}),(0,l.jsxs)(i.default,{span:24,children:[(0,l.jsx)(n.default,{type:"primary",onClick:Z,disabled:0===I.length,children:"Publish Selected"}),(0,l.jsx)(m.Z,{posts:y,handleDelete:N,handleEdit:S,handleCardClick:e=>{C(t=>t.includes(e)?t.filter(t=>t!==e):[...t,e])},selectedPosts:I})]})]})})}}},function(e){e.O(0,[5584,5400,4104,1024,1350,9009,4749,3740,3391,3943,2157,2713,9774,2888,179],function(){return e(e.s=14667)}),_N_E=e.O()}]);